"use strict";(self.webpackChunktodoApp=self.webpackChunktodoApp||[]).push([[179],{2011:(dt,Se,L)=>{L.d(Se,{Dh:()=>le,GT:()=>de,cc:()=>xe,hO:()=>ze,on:()=>$,pX:()=>ie,xv:()=>ve});var I=L(4650),X=L(127),k=L(2680);dt=L.hmd(dt);const ae=["ngOnDestroy"],ie=(pe,qe,Qe,be={})=>new Proxy(pe,{get:(me,Ie)=>Qe.runOutsideAngular(()=>{var Ue;if(pe[Ie])return!(null===(Ue=be?.spy)||void 0===Ue)&&Ue.get&&be.spy.get(Ie,pe[Ie]),pe[Ie];if(ae.indexOf(Ie)>-1)return()=>{};const Ve=qe.toPromise().then(V=>{const ce=V&&V[Ie];return"function"==typeof ce?ce.bind(V):ce&&ce.then?ce.then(H=>Qe.run(()=>H)):Qe.run(()=>ce)});return new Proxy(()=>{},{get:(V,ce)=>Ve[ce],apply:(V,ce,H)=>Ve.then(Q=>{var ne;const ee=Q&&Q(...H);return!(null===(ne=be?.spy)||void 0===ne)&&ne.apply&&be.spy.apply(Ie,H,ee),ee})})})}),de=(pe,qe)=>{qe.forEach(Qe=>{Object.getOwnPropertyNames(Qe.prototype||Qe).forEach(be=>{Object.defineProperty(pe.prototype,be,Object.getOwnPropertyDescriptor(Qe.prototype||Qe,be))})})};class he{constructor(qe){return qe}}const le=new I.OlP("angularfire2.app.options"),ve=new I.OlP("angularfire2.app.name");function $(pe,qe,Qe){const me="object"==typeof Qe&&Qe||{};me.name=me.name||"string"==typeof Qe&&Qe||"[DEFAULT]";const Ue=X.Z.apps.filter(Ve=>Ve&&Ve.name===me.name)[0]||qe.runOutsideAngular(()=>X.Z.initializeApp(pe,me));try{JSON.stringify(pe)!==JSON.stringify(Ue.options)&&U("error",`${Ue.name} Firebase App already initialized with different options${dt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new he(Ue)}const U=(pe,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[pe](...qe)},Y={provide:he,useFactory:$,deps:[le,I.R0b,[new I.FiY,ve]]};let ze=(()=>{class pe{constructor(Qe){X.Z.registerVersion("angularfire",k.q4.full,"core"),X.Z.registerVersion("angularfire",k.q4.full,"app-compat"),X.Z.registerVersion("angular",I.q4F.full,Qe.toString())}static initializeApp(Qe,be){return{ngModule:pe,providers:[{provide:le,useValue:Qe},{provide:ve,useValue:be}]}}}return pe.\u0275fac=function(Qe){return new(Qe||pe)(I.LFG(I.Lbi))},pe.\u0275mod=I.oAB({type:pe}),pe.\u0275inj=I.cJS({providers:[Y]}),pe})();function xe(pe,qe,Qe,be,me){const[,Ie,Ue]=globalThis.\u0275AngularfireInstanceCache.find(Ve=>Ve[0]===pe)||[];if(Ie)return function Ae(pe,qe){try{return pe.toString()===qe.toString()}catch{return pe===qe}}(me,Ue)||(fe("error",`${qe} was already initialized on the ${Qe} Firebase App with different settings.${We?" You may need to reload as Firebase is not HMR aware.":""}`),fe("warn",{is:me,was:Ue})),Ie;{const Ve=be();return globalThis.\u0275AngularfireInstanceCache.push([pe,Ve,me]),Ve}}const We=!!dt.hot,fe=(pe,...qe)=>{(0,I.X6Q)()&&typeof console<"u"&&console[pe](...qe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2680:(dt,Se,L)=>{L.d(Se,{q4:()=>Wc,iC:()=>Bn,HU:()=>wo,vb:()=>vo,JM:()=>nt});var I=L(4650),X=L(5867),k=L(5861),ae=L(9681),ie=L(2090),de=L(4859),he=L(1877),le=L(8766);const ve="@firebase/installations",$="0.5.15",Y=`w:${$}`,ze="FIS_v2",qe=new ie.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Qe(E){return E instanceof ie.ZR&&E.code.includes("request-failed")}function be({projectId:E}){return`https://firebaseinstallations.googleapis.com/v1/projects/${E}/installations`}function me(E){return{token:E.token,requestStatus:2,expiresIn:Q(E.expiresIn),creationTime:Date.now()}}function Ie(E,b){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,k.Z)(function*(E,b){const O=(yield b.json()).error;return qe.create("request-failed",{requestName:E,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function Ve({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function V(E,{refreshToken:b}){const A=Ve(E);return A.append("Authorization",function ne(E){return`${ze} ${E}`}(b)),A}function ce(E){return H.apply(this,arguments)}function H(){return(H=(0,k.Z)(function*(E){const b=yield E();return b.status>=500&&b.status<600?E():b})).apply(this,arguments)}function Q(E){return Number(E.replace("s","000"))}function ee(E,b){return Re.apply(this,arguments)}function Re(){return(Re=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:b},{fid:A}){const O=be(E),W=Ve(E),Z=b.getImmediate({optional:!0});if(Z){const at=yield Z.getHeartbeatsHeader();at&&W.append("x-firebase-client",at)}const Le={method:"POST",headers:W,body:JSON.stringify({fid:A,authVersion:ze,appId:E.appId,sdkVersion:Y})},Ze=yield ce(()=>fetch(O,Le));if(Ze.ok){const at=yield Ze.json();return{fid:at.fid||A,registrationStatus:2,refreshToken:at.refreshToken,authToken:me(at.authToken)}}throw yield Ie("Create Installation",Ze)})).apply(this,arguments)}function Me(E){return new Promise(b=>{setTimeout(b,E)})}const zt=/^[cdef][\w-]{21}$/;function Ye(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const A=function en(E){return function lt(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return zt.test(A)?A:""}catch{return""}}function un(E){return`${E.appName}!${E.appId}`}const Ht=new Map;function Wt(E,b){const A=un(E);nn(A,b),function Qi(E,b){const A=function Er(){return!ci&&"BroadcastChannel"in self&&(ci=new BroadcastChannel("[Firebase] FID Change"),ci.onmessage=E=>{nn(E.data.key,E.data.fid)}),ci}();A&&A.postMessage({key:E,fid:b}),function Or(){0===Ht.size&&ci&&(ci.close(),ci=null)}()}(A,b)}function nn(E,b){const A=Ht.get(E);if(A)for(const O of A)O(b)}let ci=null;const Kr="firebase-installations-store";let Zr=null;function Ho(){return Zr||(Zr=(0,le.X3)("firebase-installations-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Kr)}})),Zr}function Je(E,b){return gr.apply(this,arguments)}function gr(){return(gr=(0,k.Z)(function*(E,b){const A=un(E),W=(yield Ho()).transaction(Kr,"readwrite"),Z=W.objectStore(Kr),we=yield Z.get(A);return yield Z.put(b,A),yield W.done,(!we||we.fid!==b.fid)&&Wt(E,b.fid),b})).apply(this,arguments)}function Ji(E){return $n.apply(this,arguments)}function $n(){return($n=(0,k.Z)(function*(E){const b=un(E),O=(yield Ho()).transaction(Kr,"readwrite");yield O.objectStore(Kr).delete(b),yield O.done})).apply(this,arguments)}function Yr(E,b){return vi.apply(this,arguments)}function vi(){return(vi=(0,k.Z)(function*(E,b){const A=un(E),W=(yield Ho()).transaction(Kr,"readwrite"),Z=W.objectStore(Kr),we=yield Z.get(A),Le=b(we);return void 0===Le?yield Z.delete(A):yield Z.put(Le,A),yield W.done,Le&&(!we||we.fid!==Le.fid)&&Wt(E,Le.fid),Le})).apply(this,arguments)}function An(E){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,k.Z)(function*(E){let b;const A=yield Yr(E.appConfig,O=>{const W=sn(O),Z=ht(E,W);return b=Z.registrationPromise,Z.installationEntry});return""===A.fid?{installationEntry:yield b}:{installationEntry:A,registrationPromise:b}})).apply(this,arguments)}function sn(E){return bt(E||{fid:Ye(),registrationStatus:0})}function ht(E,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(qe.create("app-offline"))};const A={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},O=function ut(E,b){return Xt.apply(this,arguments)}(E,A);return{installationEntry:A,registrationPromise:O}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:ar(E)}:{installationEntry:b}}function Xt(){return(Xt=(0,k.Z)(function*(E,b){try{const A=yield ee(E,b);return Je(E.appConfig,A)}catch(A){throw Qe(A)&&409===A.customData.serverCode?yield Ji(E.appConfig):yield Je(E.appConfig,{fid:b.fid,registrationStatus:0}),A}})).apply(this,arguments)}function ar(E){return On.apply(this,arguments)}function On(){return(On=(0,k.Z)(function*(E){let b=yield Lr(E.appConfig);for(;1===b.registrationStatus;)yield Me(100),b=yield Lr(E.appConfig);if(0===b.registrationStatus){const{installationEntry:A,registrationPromise:O}=yield An(E);return O||A}return b})).apply(this,arguments)}function Lr(E){return Yr(E,b=>{if(!b)throw qe.create("installation-not-found");return bt(b)})}function bt(E){return function Xi(E){return 1===E.registrationStatus&&E.registrationTime+1e4<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function Zt(E,b){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,k.Z)(function*({appConfig:E,heartbeatServiceProvider:b},A){const O=Yt(E,A),W=V(E,A),Z=b.getImmediate({optional:!0});if(Z){const at=yield Z.getHeartbeatsHeader();at&&W.append("x-firebase-client",at)}const Le={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:Y,appId:E.appId}})},Ze=yield ce(()=>fetch(O,Le));if(Ze.ok)return me(yield Ze.json());throw yield Ie("Generate Auth Token",Ze)})).apply(this,arguments)}function Yt(E,{fid:b}){return`${be(E)}/${b}/authTokens:generate`}function Hn(E){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,k.Z)(function*(E,b=!1){let A;const O=yield Yr(E.appConfig,Z=>{if(!At(Z))throw qe.create("not-registered");const we=Z.authToken;if(!b&&B(we))return Z;if(1===we.requestStatus)return A=tt(E,b),Z;{if(!navigator.onLine)throw qe.create("app-offline");const Le=z(Z);return A=vt(E,Le),Le}});return A?yield A:O.authToken})).apply(this,arguments)}function tt(E,b){return Ee.apply(this,arguments)}function Ee(){return(Ee=(0,k.Z)(function*(E,b){let A=yield et(E.appConfig);for(;1===A.authToken.requestStatus;)yield Me(100),A=yield et(E.appConfig);const O=A.authToken;return 0===O.requestStatus?Hn(E,b):O})).apply(this,arguments)}function et(E){return Yr(E,b=>{if(!At(b))throw qe.create("not-registered");return function _e(E){return 1===E.requestStatus&&E.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function vt(E,b){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*(E,b){try{const A=yield Zt(E,b),O=Object.assign(Object.assign({},b),{authToken:A});return yield Je(E.appConfig,O),A}catch(A){if(!Qe(A)||401!==A.customData.serverCode&&404!==A.customData.serverCode){const O=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Je(E.appConfig,O)}else yield Ji(E.appConfig);throw A}})).apply(this,arguments)}function At(E){return void 0!==E&&2===E.registrationStatus}function B(E){return 2===E.requestStatus&&!function F(E){const b=Date.now();return b<E.creationTime||E.creationTime+E.expiresIn<b+36e5}(E)}function z(E){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:b})}function $e(){return($e=(0,k.Z)(function*(E){const b=E,{installationEntry:A,registrationPromise:O}=yield An(b);return O?O.catch(console.error):Hn(b).catch(console.error),A.fid})).apply(this,arguments)}function qt(){return(qt=(0,k.Z)(function*(E,b=!1){const A=E;return yield rn(A),(yield Hn(A,b)).token})).apply(this,arguments)}function rn(E){return jt.apply(this,arguments)}function jt(){return(jt=(0,k.Z)(function*(E){const{registrationPromise:b}=yield An(E);b&&(yield b)})).apply(this,arguments)}function es(E){return qe.create("missing-app-config-values",{valueName:E})}const to="installations",hn=E=>{const b=E.getProvider("app").getImmediate(),A=function cn(E){if(!E||!E.options)throw es("App Configuration");if(!E.name)throw es("App Name");const b=["projectId","apiKey","appId"];for(const A of b)if(!E.options[A])throw es(A);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(b);return{app:b,appConfig:A,heartbeatServiceProvider:(0,ae._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ss=E=>{const b=E.getProvider("app").getImmediate(),A=(0,ae._getProvider)(b,to).getImmediate();return{getId:()=>function K(E){return $e.apply(this,arguments)}(A),getToken:W=>function ct(E){return qt.apply(this,arguments)}(A,W)}};(function $a(){(0,ae._registerComponent)(new de.wA(to,hn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("installations-internal",Ss,"PRIVATE"))})(),(0,ae.registerVersion)(ve,$),(0,ae.registerVersion)(ve,$,"esm2017");const wi="@firebase/remote-config",Fn=new ie.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class bh{constructor(b,A,O,W){this.client=b,this.storage=A,this.storageCache=O,this.logger=W}isCachedDataFresh(b,A){if(!A)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-A,W=O<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var A=this;return(0,k.Z)(function*(){const[O,W]=yield Promise.all([A.storage.getLastSuccessfulFetchTimestampMillis(),A.storage.getLastSuccessfulFetchResponse()]);if(W&&A.isCachedDataFresh(b.cacheMaxAgeMillis,O))return W;b.eTag=W&&W.eTag;const Z=yield A.client.fetch(b),we=[A.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Z.status&&we.push(A.storage.setLastSuccessfulFetchResponse(Z)),yield Promise.all(we),Z})()}}function Ec(E=navigator){return E.languages&&E.languages[0]||E.language}class Dc{constructor(b,A,O,W,Z,we){this.firebaseInstallations=b,this.sdkVersion=A,this.namespace=O,this.projectId=W,this.apiKey=Z,this.appId=we}fetch(b){var A=this;return(0,k.Z)(function*(){var O,W,Z;const[we,Le]=yield Promise.all([A.firebaseInstallations.getId(),A.firebaseInstallations.getToken()]),at=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${A.projectId}/namespaces/${A.namespace}:fetch?key=${A.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},rt={sdk_version:A.sdkVersion,app_instance_id:we,app_instance_id_token:Le,app_id:A.appId,language_code:Ec()},Un={method:"POST",headers:Tt,body:JSON.stringify(rt)},Kn=fetch(at,Un),Bi=new Promise((ys,Ui)=>{b.signal.addEventListener(()=>{const ga=new Error("The operation was aborted.");ga.name="AbortError",Ui(ga)})});let ti;try{yield Promise.race([Kn,Bi]),ti=yield Kn}catch(ys){let Ui="fetch-client-network";throw"AbortError"===(null===(O=ys)||void 0===O?void 0:O.name)&&(Ui="fetch-timeout"),Fn.create(Ui,{originalErrorMessage:null===(W=ys)||void 0===W?void 0:W.message})}let Do=ti.status;const Iu=ti.headers.get("ETag")||void 0;let wu,bo;if(200===ti.status){let ys;try{ys=yield ti.json()}catch(Ui){throw Fn.create("fetch-client-parse",{originalErrorMessage:null===(Z=Ui)||void 0===Z?void 0:Z.message})}wu=ys.entries,bo=ys.state}if("INSTANCE_STATE_UNSPECIFIED"===bo?Do=500:"NO_CHANGE"===bo?Do=304:("NO_TEMPLATE"===bo||"EMPTY_CONFIG"===bo)&&(wu={}),304!==Do&&200!==Do)throw Fn.create("fetch-status",{httpStatus:Do});return{status:Do,eTag:Iu,config:wu}})()}}class ep{constructor(b,A){this.client=b,this.storage=A}fetch(b){var A=this;return(0,k.Z)(function*(){const O=(yield A.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return A.attemptFetch(b,O)})()}attemptFetch(b,{throttleEndTimeMillis:A,backoffCount:O}){var W=this;return(0,k.Z)(function*(){yield function zn(E,b){return new Promise((A,O)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(Z),O(Fn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,A);try{const Z=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Z}catch(Z){if(!function Kl(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Z))throw Z;const we={throttleEndTimeMillis:Date.now()+(0,ie.$s)(O),backoffCount:O+1};return yield W.storage.setThrottleMetadata(we),W.attemptFetch(b,we)}})()}}class Zl{constructor(b,A,O,W,Z){this.app=b,this._client=A,this._storageCache=O,this._storage=W,this._logger=Z,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function bc(E,b){var A;const O=E.target.error||void 0;return Fn.create(b,{originalErrorMessage:O&&(null===(A=O)||void 0===A?void 0:A.message)})}const is="app_namespace_store";class ip{constructor(b,A,O,W=function rp(){return new Promise((E,b)=>{var A;try{const O=indexedDB.open("firebase_remote_config",1);O.onerror=W=>{b(bc(W,"storage-open"))},O.onsuccess=W=>{E(W.target.result)},O.onupgradeneeded=W=>{0===W.oldVersion&&W.target.result.createObjectStore(is,{keyPath:"compositeKey"})}}catch(O){b(Fn.create("storage-open",{originalErrorMessage:null===(A=O)||void 0===A?void 0:A.message}))}})}()){this.appId=b,this.appName=A,this.namespace=O,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((W,Z)=>{var we;const Ze=O.transaction([is],"readonly").objectStore(is),at=A.createCompositeKey(b);try{const Tt=Ze.get(at);Tt.onerror=rt=>{Z(bc(rt,"storage-get"))},Tt.onsuccess=rt=>{const Un=rt.target.result;W(Un?Un.value:void 0)}}catch(Tt){Z(Fn.create("storage-get",{originalErrorMessage:null===(we=Tt)||void 0===we?void 0:we.message}))}})})()}set(b,A){var O=this;return(0,k.Z)(function*(){const W=yield O.openDbPromise;return new Promise((Z,we)=>{var Le;const at=W.transaction([is],"readwrite").objectStore(is),Tt=O.createCompositeKey(b);try{const rt=at.put({compositeKey:Tt,value:A});rt.onerror=Un=>{we(bc(Un,"storage-set"))},rt.onsuccess=()=>{Z()}}catch(rt){we(Fn.create("storage-set",{originalErrorMessage:null===(Le=rt)||void 0===Le?void 0:Le.message}))}})})()}delete(b){var A=this;return(0,k.Z)(function*(){const O=yield A.openDbPromise;return new Promise((W,Z)=>{var we;const Ze=O.transaction([is],"readwrite").objectStore(is),at=A.createCompositeKey(b);try{const Tt=Ze.delete(at);Tt.onerror=rt=>{Z(bc(rt,"storage-delete"))},Tt.onsuccess=()=>{W()}}catch(Tt){Z(Fn.create("storage-delete",{originalErrorMessage:null===(we=Tt)||void 0===we?void 0:we.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Ql{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,k.Z)(function*(){const A=b.storage.getLastFetchStatus(),O=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Z=yield A;Z&&(b.lastFetchStatus=Z);const we=yield O;we&&(b.lastSuccessfulFetchTimestampMillis=we);const Le=yield W;Le&&(b.activeConfig=Le)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function za(){return Th.apply(this,arguments)}function Th(){return(Th=(0,k.Z)(function*(){if(!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}!function ss(){(0,ae._registerComponent)(new de.wA("remote-config",function E(b,{instanceIdentifier:A}){const O=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Fn.create("registration-window");if(!(0,ie.hl)())throw Fn.create("indexed-db-unavailable");const{projectId:Z,apiKey:we,appId:Le}=O.options;if(!Z)throw Fn.create("registration-project-id");if(!we)throw Fn.create("registration-api-key");if(!Le)throw Fn.create("registration-app-id");const Ze=new ip(Le,O.name,A=A||"firebase"),at=new Ql(Ze),Tt=new he.Yd(wi);Tt.logLevel=he.in.ERROR;const rt=new Dc(W,ae.SDK_VERSION,A,Z,we,Le),Un=new ep(rt,Ze),Kn=new bh(Un,Ze,at,Tt),Bi=new Zl(O,Kn,at,Ze,Tt);return function cr(E){const b=(0,ie.m9)(E);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(Bi),Bi},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(wi,"0.3.14"),(0,ae.registerVersion)(wi,"0.3.14","esm2017")}();const Ei="/firebase-messaging-sw.js",Ni="/firebase-cloud-messaging-push-scope",Ri="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Wo="google.c.a.c_id",Wa="google.c.a.c_l",Tc="google.c.a.ts",Ch="google.c.a.e";var ki=(()=>{return(E=ki||(ki={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ki;var E})();function Qr(E){const b=new Uint8Array(E);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Vr(E){const A=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(A),W=new Uint8Array(O.length);for(let Z=0;Z<O.length;++Z)W[Z]=O.charCodeAt(Z);return W}const no="fcm_token_details_db",lr="fcm_token_object_Store";function Sh(E){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,k.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Z=>Z.name).includes(no))return null;let b=null;return(yield(0,le.X3)(no,5,{upgrade:(O=(0,k.Z)(function*(W,Z,we,Le){var Ze;if(Z<2||!W.objectStoreNames.contains(lr))return;const at=Le.objectStore(lr),Tt=yield at.index("fcmSenderId").get(E);if(yield at.clear(),Tt)if(2===Z){const rt=Tt;if(!rt.auth||!rt.p256dh||!rt.endpoint)return;b={token:rt.fcmToken,createTime:null!==(Ze=rt.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:rt.auth,p256dh:rt.p256dh,endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:"string"==typeof rt.vapidKey?rt.vapidKey:Qr(rt.vapidKey)}}}else if(3===Z){const rt=Tt;b={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Qr(rt.auth),p256dh:Qr(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Qr(rt.vapidKey)}}}else if(4===Z){const rt=Tt;b={token:rt.fcmToken,createTime:rt.createTime,subscriptionOptions:{auth:Qr(rt.auth),p256dh:Qr(rt.p256dh),endpoint:rt.endpoint,swScope:rt.swScope,vapidKey:Qr(rt.vapidKey)}}}}),function(Z,we,Le,Ze){return O.apply(this,arguments)})})).close(),yield(0,le.Lj)(no),yield(0,le.Lj)("fcm_vapid_details_db"),yield(0,le.Lj)("undefined"),wn(b)?b:null;var O}),Ah.apply(this,arguments)}function wn(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:b}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Jr="firebase-messaging-store";let Tr=null;function qa(){return Tr||(Tr=(0,le.X3)("firebase-messaging-database",1,{upgrade:(E,b)=>{0===b&&E.createObjectStore(Jr)}})),Tr}function ro(E){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,k.Z)(function*(E){const b=hi(E),O=yield(yield qa()).transaction(Jr).objectStore(Jr).get(b);if(O)return O;{const W=yield Sh(E.appConfig.senderId);if(W)return yield $t(E,W),W}})).apply(this,arguments)}function $t(E,b){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,k.Z)(function*(E,b){const A=hi(E),W=(yield qa()).transaction(Jr,"readwrite");return yield W.objectStore(Jr).put(b,A),yield W.done,b})).apply(this,arguments)}function Ns(E){return Za.apply(this,arguments)}function Za(){return(Za=(0,k.Z)(function*(E){const b=hi(E),O=(yield qa()).transaction(Jr,"readwrite");yield O.objectStore(Jr).delete(b),yield O.done})).apply(this,arguments)}function hi({appConfig:E}){return E.appId}const mn=new ie.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function wt(E,b){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,k.Z)(function*(E,b){var A;const O=yield Ac(E),W=De(b),Z={method:"POST",headers:O,body:JSON.stringify(W)};let we;try{we=yield(yield fetch(Oi(E.appConfig),Z)).json()}catch(Le){throw mn.create("token-subscribe-failed",{errorInfo:null===(A=Le)||void 0===A?void 0:A.toString()})}if(we.error)throw mn.create("token-subscribe-failed",{errorInfo:we.error.message});if(!we.token)throw mn.create("token-subscribe-no-token");return we.token})).apply(this,arguments)}function xh(E,b){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,k.Z)(function*(E,b){var A;const O=yield Ac(E),W=De(b.subscriptionOptions),Z={method:"PATCH",headers:O,body:JSON.stringify(W)};let we;try{we=yield(yield fetch(`${Oi(E.appConfig)}/${b.token}`,Z)).json()}catch(Le){throw mn.create("token-update-failed",{errorInfo:null===(A=Le)||void 0===A?void 0:A.toString()})}if(we.error)throw mn.create("token-update-failed",{errorInfo:we.error.message});if(!we.token)throw mn.create("token-update-no-token");return we.token})).apply(this,arguments)}function Xa(E,b){return Sc.apply(this,arguments)}function Sc(){return(Sc=(0,k.Z)(function*(E,b){var A;const W={method:"DELETE",headers:yield Ac(E)};try{const we=yield(yield fetch(`${Oi(E.appConfig)}/${b}`,W)).json();if(we.error)throw mn.create("token-unsubscribe-failed",{errorInfo:we.error.message})}catch(Z){throw mn.create("token-unsubscribe-failed",{errorInfo:null===(A=Z)||void 0===A?void 0:A.toString()})}})).apply(this,arguments)}function Oi({projectId:E}){return`https://fcmregistrations.googleapis.com/v1/projects/${E}/registrations`}function Ac(E){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,k.Z)(function*({appConfig:E,installations:b}){const A=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${A}`})})).apply(this,arguments)}function De({p256dh:E,auth:b,endpoint:A,vapidKey:O}){const W={web:{endpoint:A,auth:b,p256dh:E}};return O!==Ri&&(W.web.applicationPubKey=O),W}const Ft=6048e5;function eu(E){return tu.apply(this,arguments)}function tu(){return(tu=(0,k.Z)(function*(E){const b=yield xc(E.swRegistration,E.vapidKey),A={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:b.endpoint,auth:Qr(b.getKey("auth")),p256dh:Qr(b.getKey("p256dh"))},O=yield ro(E.firebaseDependencies);if(O){if(td(O.subscriptionOptions,A))return Date.now()>=O.createTime+Ft?io(E,{token:O.token,createTime:Date.now(),subscriptionOptions:A}):O.token;try{yield Xa(E.firebaseDependencies,O.token)}catch(W){console.warn(W)}return Zo(E.firebaseDependencies,A)}return Zo(E.firebaseDependencies,A)})).apply(this,arguments)}function En(E){return nu.apply(this,arguments)}function nu(){return(nu=(0,k.Z)(function*(E){const b=yield ro(E.firebaseDependencies);b&&(yield Xa(E.firebaseDependencies,b.token),yield Ns(E.firebaseDependencies));const A=yield E.swRegistration.pushManager.getSubscription();return!A||A.unsubscribe()})).apply(this,arguments)}function io(E,b){return Xr.apply(this,arguments)}function Xr(){return(Xr=(0,k.Z)(function*(E,b){try{const A=yield xh(E.firebaseDependencies,b),O=Object.assign(Object.assign({},b),{token:A,createTime:Date.now()});return yield $t(E.firebaseDependencies,O),A}catch(A){throw yield En(E),A}})).apply(this,arguments)}function Zo(E,b){return Yo.apply(this,arguments)}function Yo(){return(Yo=(0,k.Z)(function*(E,b){const O={token:yield wt(E,b),createTime:Date.now(),subscriptionOptions:b};return yield $t(E,O),O.token})).apply(this,arguments)}function xc(E,b){return Mc.apply(this,arguments)}function Mc(){return(Mc=(0,k.Z)(function*(E,b){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Vr(b)})})).apply(this,arguments)}function td(E,b){return b.vapidKey===E.vapidKey&&b.endpoint===E.endpoint&&b.auth===E.auth&&b.p256dh===E.p256dh}function Qo(E){const b={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function Dn(E,b){if(!b.notification)return;E.notification={};const A=b.notification.title;A&&(E.notification.title=A);const O=b.notification.body;O&&(E.notification.body=O);const W=b.notification.image;W&&(E.notification.image=W)}(b,E),function Di(E,b){!b.data||(E.data=b.data)}(b,E),function Nc(E,b){var A,O,W,Z,we;if(!(b.fcmOptions||null!==(A=b.notification)&&void 0!==A&&A.click_action))return;E.fcmOptions={};const Le=null!==(W=null===(O=b.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==W?W:null===(Z=b.notification)||void 0===Z?void 0:Z.click_action;Le&&(E.fcmOptions.link=Le);const Ze=null===(we=b.fcmOptions)||void 0===we?void 0:we.analytics_label;Ze&&(E.fcmOptions.analyticsLabel=Ze)}(b,E),b}function Rs(E){return"object"==typeof E&&!!E&&Wo in E}function Li(E,b){const A=[];for(let O=0;O<E.length;O++)A.push(E.charAt(O)),O<b.length&&A.push(b.charAt(O));return A.join("")}function Jo(E){return mn.create("missing-app-config-values",{valueName:E})}Li("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Li("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ap{constructor(b,A,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function op(E){if(!E||!E.options)throw Jo("App Configuration Object");if(!E.name)throw Jo("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:A}=E;for(const O of b)if(!A[O])throw Jo(O);return{appName:E.name,projectId:A.projectId,apiKey:A.apiKey,appId:A.appId,senderId:A.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:A,analyticsProvider:O}}_delete(){return Promise.resolve()}}function Rc(E){return ru.apply(this,arguments)}function ru(){return(ru=(0,k.Z)(function*(E){var b;try{E.swRegistration=yield navigator.serviceWorker.register(Ei,{scope:Ni}),E.swRegistration.update().catch(()=>{})}catch(A){throw mn.create("failed-service-worker-registration",{browserErrorMessage:null===(b=A)||void 0===b?void 0:b.message})}})).apply(this,arguments)}function Xo(E,b){return kc.apply(this,arguments)}function kc(){return(kc=(0,k.Z)(function*(E,b){if(!b&&!E.swRegistration&&(yield Rc(E)),b||!E.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw mn.create("invalid-sw-registration");E.swRegistration=b}})).apply(this,arguments)}function ea(E,b){return Pc.apply(this,arguments)}function Pc(){return(Pc=(0,k.Z)(function*(E,b){b?E.vapidKey=b:E.vapidKey||(E.vapidKey=Ri)})).apply(this,arguments)}function su(){return(su=(0,k.Z)(function*(E,b){if(!navigator)throw mn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw mn.create("permission-blocked");return yield ea(E,b?.vapidKey),yield Xo(E,b?.serviceWorkerRegistration),eu(E)})).apply(this,arguments)}function Oc(E,b,A){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,k.Z)(function*(E,b,A){const O=Fc(b);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:A[Wo],message_name:A[Wa],message_time:A[Tc],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Fc(E){switch(E){case ki.NOTIFICATION_CLICKED:return"notification_open";case ki.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ks(){return(ks=(0,k.Z)(function*(E,b){const A=b.data;if(!A.isFirebaseMessaging)return;E.onMessageHandler&&A.messageType===ki.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler(Qo(A)):E.onMessageHandler.next(Qo(A)));const O=A.data;Rs(O)&&"1"===O[Ch]&&(yield Oc(E,A.messageType,O))})).apply(this,arguments)}const Ps="@firebase/messaging",Wn=E=>{const b=new ap(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",A=>function nd(E,b){return ks.apply(this,arguments)}(b,A)),b},Br=E=>{const b=E.getProvider("messaging").getImmediate();return{getToken:O=>function iu(E,b){return su.apply(this,arguments)}(b,O)}};function rd(){return Vc.apply(this,arguments)}function Vc(){return(Vc=(0,k.Z)(function*(){try{yield(0,ie.eu)()}catch{return!1}return typeof window<"u"&&(0,ie.hl)()&&(0,ie.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function ln(){(0,ae._registerComponent)(new de.wA("messaging",Wn,"PUBLIC")),(0,ae._registerComponent)(new de.wA("messaging-internal",Br,"PRIVATE")),(0,ae.registerVersion)(Ps,"0.9.19"),(0,ae.registerVersion)(Ps,"0.9.19","esm2017")}();const oo="analytics",od="firebase_id",Ls="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",cu="https://www.googletagmanager.com/gtag/js",bn=new he.Yd("@firebase/analytics");function lu(E){return Promise.all(E.map(b=>b.catch(A=>A)))}function du(E,b){const A=document.createElement("script");A.src=`${cu}?l=${E}&id=${b}`,A.async=!0,document.head.appendChild(A)}function Nh(E,b,A,O,W,Z){return ao.apply(this,arguments)}function ao(){return(ao=(0,k.Z)(function*(E,b,A,O,W,Z){const we=O[W];try{if(we)yield b[we];else{const Ze=(yield lu(A)).find(at=>at.measurementId===W);Ze&&(yield b[Ze.appId])}}catch(Le){bn.error(Le)}E("config",W,Z)})).apply(this,arguments)}function uo(E,b,A,O,W){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,k.Z)(function*(E,b,A,O,W){try{let Z=[];if(W&&W.send_to){let we=W.send_to;Array.isArray(we)||(we=[we]);const Le=yield lu(A);for(const Ze of we){const at=Le.find(rt=>rt.measurementId===Ze),Tt=at&&b[at.appId];if(!Tt){Z=[];break}Z.push(Tt)}}0===Z.length&&(Z=Object.values(b)),yield Promise.all(Z),E("event",O,W||{})}catch(Z){bn.error(Z)}})).apply(this,arguments)}function ud(E){const b=window.document.getElementsByTagName("script");for(const A of Object.values(b))if(A.src&&A.src.includes(cu)&&A.src.includes(E))return A;return null}const er=new ie.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ia=new class bi{constructor(b={},A=1e3){this.throttleMetadata=b,this.intervalMillis=A}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,A){this.throttleMetadata[b]=A}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function ld(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function sa(E){return Uc.apply(this,arguments)}function Uc(){return(Uc=(0,k.Z)(function*(E){var b;const{appId:A,apiKey:O}=E,W={method:"GET",headers:ld(O)},Z=Ls.replace("{app-id}",A),we=yield fetch(Z,W);if(200!==we.status&&304!==we.status){let Le="";try{const Ze=yield we.json();null!==(b=Ze.error)&&void 0!==b&&b.message&&(Le=Ze.error.message)}catch{}throw er.create("config-fetch-failed",{httpStatus:we.status,responseMessage:Le})}return we.json()})).apply(this,arguments)}function xn(E){return fi.apply(this,arguments)}function fi(){return(fi=(0,k.Z)(function*(E,b=ia,A){const{appId:O,apiKey:W,measurementId:Z}=E.options;if(!O)throw er.create("no-app-id");if(!W){if(Z)return{measurementId:Z,appId:O};throw er.create("no-api-key")}const we=b.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Le=new gu;return setTimeout((0,k.Z)(function*(){Le.abort()}),void 0!==A?A:6e4),fu({appId:O,apiKey:W,measurementId:Z},we,Le,b)})).apply(this,arguments)}function fu(E,b,A){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,k.Z)(function*(E,{throttleEndTimeMillis:b,backoffCount:A},O,W=ia){var Z,we;const{appId:Le,measurementId:Ze}=E;try{yield oa(O,b)}catch(at){if(Ze)return bn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${null===(Z=at)||void 0===Z?void 0:Z.message}]`),{appId:Le,measurementId:Ze};throw at}try{const at=yield sa(E);return W.deleteThrottleMetadata(Le),at}catch(at){const Tt=at;if(!pu(Tt)){if(W.deleteThrottleMetadata(Le),Ze)return bn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${Tt?.message}]`),{appId:Le,measurementId:Ze};throw at}const rt=503===Number(null===(we=Tt?.customData)||void 0===we?void 0:we.httpStatus)?(0,ie.$s)(A,W.intervalMillis,30):(0,ie.$s)(A,W.intervalMillis),Un={throttleEndTimeMillis:Date.now()+rt,backoffCount:A+1};return W.setThrottleMetadata(Le,Un),bn.debug(`Calling attemptFetch again in ${rt} millis`),fu(E,Un,O,W)}})).apply(this,arguments)}function oa(E,b){return new Promise((A,O)=>{const W=Math.max(b-Date.now(),0),Z=setTimeout(A,W);E.addEventListener(()=>{clearTimeout(Z),O(er.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function pu(E){if(!(E instanceof ie.ZR&&E.customData))return!1;const b=Number(E.customData.httpStatus);return 429===b||500===b||503===b||504===b}class gu{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let us,ca;function cs(){return(cs=(0,k.Z)(function*(E,b,A,O,W){if(W&&W.global)E("event",A,O);else{const Z=yield b;E("event",A,Object.assign(Object.assign({},O),{send_to:Z}))}})).apply(this,arguments)}function Us(E){ca=E}function Hc(E){us=E}function ds(){return yu.apply(this,arguments)}function yu(){return(yu=(0,k.Z)(function*(){var E;if(!(0,ie.hl)())return bn.warn(er.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ie.eu)()}catch(b){return bn.warn(er.create("indexeddb-unavailable",{errorInfo:null===(E=b)||void 0===E?void 0:E.toString()}).message),!1}return!0})).apply(this,arguments)}function lo(){return(lo=(0,k.Z)(function*(E,b,A,O,W,Z,we){var Le;const Ze=xn(E);Ze.then(Kn=>{A[Kn.measurementId]=Kn.appId,E.options.measurementId&&Kn.measurementId!==E.options.measurementId&&bn.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${Kn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Kn=>bn.error(Kn)),b.push(Ze);const at=ds().then(Kn=>{if(Kn)return O.getId()}),[Tt,rt]=yield Promise.all([Ze,at]);ud(Z)||du(Z,Tt.measurementId),ca&&(W("consent","default",ca),Us(void 0)),W("js",new Date);const Un=null!==(Le=we?.config)&&void 0!==Le?Le:{};return Un.origin="firebase",Un.update=!0,null!=rt&&(Un[od]=rt),W("config",Tt.measurementId,Un),us&&(W("set",us),Hc(void 0)),Tt.measurementId})).apply(this,arguments)}class _u{constructor(b){this.app=b}_delete(){return delete Ur[this.app.options.appId],Promise.resolve()}}let Ur={},hs=[];const ho={};let po,js,fo="dataLayer",la=!1;function fm(E,b,A){!function up(){const E=[];if((0,ie.ru)()&&E.push("This is a browser extension environment."),(0,ie.zI)()||E.push("Cookies are not available."),E.length>0){const b=E.map((O,W)=>`(${W+1}) ${O}`).join(" "),A=er.create("invalid-analytics-context",{errorInfo:b});bn.warn(A.message)}}();const O=E.options.appId;if(!O)throw er.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw er.create("no-api-key");bn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ur[O])throw er.create("already-exists",{id:O});if(!la){!function ad(E){let b=[];Array.isArray(window[E])?b=window[E]:window[E]=b}(fo);const{wrappedGtag:Z,gtagCore:we}=function ta(E,b,A,O,W){let Z=function(...we){window[O].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Z=window[W]),window[W]=function hu(E,b,A,O){function Z(){return(Z=(0,k.Z)(function*(we,Le,Ze){try{"event"===we?yield uo(E,b,A,Le,Ze):"config"===we?yield Nh(E,b,A,O,Le,Ze):"consent"===we?E("consent","update",Ze):E("set",Le)}catch(at){bn.error(at)}})).apply(this,arguments)}return function W(we,Le,Ze){return Z.apply(this,arguments)}}(Z,E,b,A),{gtagCore:Z,wrappedGtag:window[W]}}(Ur,hs,ho,fo,"gtag");js=Z,po=we,la=!0}return Ur[O]=function co(E,b,A,O,W,Z,we){return lo.apply(this,arguments)}(E,hs,ho,b,po,fo,A),new _u(E)}function gm(){return Rh.apply(this,arguments)}function Rh(){return(Rh=(0,k.Z)(function*(){if((0,ie.ru)()||!(0,ie.zI)()||!(0,ie.hl)())return!1;try{return yield(0,ie.eu)()}catch{return!1}})).apply(this,arguments)}const zc="@firebase/analytics";!function yr(){(0,ae._registerComponent)(new de.wA(oo,(b,{options:A})=>fm(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),A),"PUBLIC")),(0,ae._registerComponent)(new de.wA("analytics-internal",function E(b){try{const A=b.getProvider(oo).getImmediate();return{logEvent:(O,W,Z)=>function jr(E,b,A,O){E=(0,ie.m9)(E),function dd(E,b,A,O,W){return cs.apply(this,arguments)}(js,Ur[E.app.options.appId],b,A,O).catch(W=>bn.error(W))}(A,O,W,Z)}}catch(A){throw er.create("interop-component-reg-failed",{reason:A})}},"PRIVATE")),(0,ae.registerVersion)(zc,"0.8.3"),(0,ae.registerVersion)(zc,"0.8.3","esm2017")}();var dr=L(4408),mo=L(7565);const da=new class fs extends mo.v{}(class qn extends dr.o{constructor(b,A){super(b,A),this.scheduler=b,this.work=A}schedule(b,A=0){return A>0?super.schedule(b,A):(this.delay=A,this.state=b,this.scheduler.flush(this),this)}execute(b,A){return A>0||this.closed?super.execute(b,A):this._execute(b,A)}requestAsyncId(b,A,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(b,A,O):(b.flush(this),0)}});var ha=L(4986),ei=L(576),gs=L(4482),hr=L(5403),$r=L(4671),$s=L(9468),fd=L(5363);const Wc=new I.GfV("7.4.1"),yo="__angularfire_symbol__analyticsIsSupportedValue",pd="__angularfire_symbol__analyticsIsSupported",pa="__angularfire_symbol__remoteConfigIsSupportedValue",ge="__angularfire_symbol__remoteConfigIsSupported",gi="__angularfire_symbol__messagingIsSupportedValue",_o="__angularfire_symbol__messagingIsSupported";function nt(E,b,A){if(b){if(1===b.length)return b[0];const Z=b.filter(we=>we.app===A);if(1===Z.length)return Z[0]}return A.container.getProvider(E).getImmediate({optional:!0})}globalThis[pd]||(globalThis[pd]=gm().then(E=>globalThis[yo]=E).catch(()=>globalThis[yo]=!1)),globalThis[_o]||(globalThis[_o]=rd().then(E=>globalThis[gi]=E).catch(()=>globalThis[gi]=!1)),globalThis[ge]||(globalThis[ge]=za().then(E=>globalThis[pa]=E).catch(()=>globalThis[pa]=!1));const vo=(E,b)=>{const A=b?[b]:(0,X.C6)(),O=[];return A.forEach(W=>{W.container.getProvider(E).instances.forEach(we=>{O.includes(we)||O.push(we)})}),O};function pt(){}class Hs{constructor(b,A=da){this.zone=b,this.delegate=A}now(){return this.delegate.now()}schedule(b,A,O){const W=this.zone;return this.delegate.schedule(function(we){W.runGuarded(()=>{b.apply(this,[we])})},A,O)}}class Io{constructor(b){this.zone=b,this.task=null}call(b,A){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",pt,{},pt,pt)),A.pipe(function fa(E,b,A){const O=(0,ei.m)(E)||b||A?{next:E,error:b,complete:A}:E;return O?(0,gs.e)((W,Z)=>{var we;null===(we=O.subscribe)||void 0===we||we.call(O);let Le=!0;W.subscribe((0,hr.x)(Z,Ze=>{var at;null===(at=O.next)||void 0===at||at.call(O,Ze),Z.next(Ze)},()=>{var Ze;Le=!1,null===(Ze=O.complete)||void 0===Ze||Ze.call(O),Z.complete()},Ze=>{var at;Le=!1,null===(at=O.error)||void 0===at||at.call(O,Ze),Z.error(Ze)},()=>{var Ze,at;Le&&(null===(Ze=O.unsubscribe)||void 0===Ze||Ze.call(O)),null===(at=O.finalize)||void 0===at||at.call(O)}))}):$r.y}({next:O,complete:O,error:O})).subscribe(b).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let wo=(()=>{class E{constructor(A){this.ngZone=A,this.outsideAngular=A.runOutsideAngular(()=>new Hs(Zone.current)),this.insideAngular=A.run(()=>new Hs(Zone.current,ha.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(A){return new(A||E)(I.LFG(I.R0b))},E.\u0275prov=I.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function Hr(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Bn(E){return Hr(),function Eo(E){return function(A){return(A=A.lift(new Io(E.ngZone))).pipe((0,$s.R)(E.outsideAngular),(0,fd.Q)(E.insideAngular))}}(Hr())(E)}},2090:(dt,Se,L)=>{L.d(Se,{$s:()=>et,BH:()=>Ot,G6:()=>Ie,L:()=>le,LL:()=>Ht,Pz:()=>zt,Sg:()=>Ye,UG:()=>Ae,US:()=>de,ZB:()=>U,ZR:()=>un,aH:()=>lt,b$:()=>pe,eu:()=>Ve,hl:()=>Ue,jU:()=>We,m9:()=>At,ne:()=>Pn,pd:()=>vi,r3:()=>li,ru:()=>fe,tV:()=>ve,uI:()=>xe,vZ:()=>Je,w1:()=>Qe,xO:()=>$n,xb:()=>Zr,z$:()=>ze,zI:()=>V,zd:()=>Yr});const ae=function(B){const F=[];let z=0;for(let _e=0;_e<B.length;_e++){let K=B.charCodeAt(_e);K<128?F[z++]=K:K<2048?(F[z++]=K>>6|192,F[z++]=63&K|128):55296==(64512&K)&&_e+1<B.length&&56320==(64512&B.charCodeAt(_e+1))?(K=65536+((1023&K)<<10)+(1023&B.charCodeAt(++_e)),F[z++]=K>>18|240,F[z++]=K>>12&63|128,F[z++]=K>>6&63|128,F[z++]=63&K|128):(F[z++]=K>>12|224,F[z++]=K>>6&63|128,F[z++]=63&K|128)}return F},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(B,F){if(!Array.isArray(B))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=F?this.byteToCharMapWebSafe_:this.byteToCharMap_,_e=[];for(let K=0;K<B.length;K+=3){const $e=B[K],ct=K+1<B.length,qt=ct?B[K+1]:0,rn=K+2<B.length,jt=rn?B[K+2]:0;let Rt=(15&qt)<<2|jt>>6,Jn=63&jt;rn||(Jn=64,ct||(Rt=64)),_e.push(z[$e>>2],z[(3&$e)<<4|qt>>4],z[Rt],z[Jn])}return _e.join("")},encodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?btoa(B):this.encodeByteArray(ae(B),F)},decodeString(B,F){return this.HAS_NATIVE_SUPPORT&&!F?atob(B):function(B){const F=[];let z=0,_e=0;for(;z<B.length;){const K=B[z++];if(K<128)F[_e++]=String.fromCharCode(K);else if(K>191&&K<224){const $e=B[z++];F[_e++]=String.fromCharCode((31&K)<<6|63&$e)}else if(K>239&&K<365){const rn=((7&K)<<18|(63&B[z++])<<12|(63&B[z++])<<6|63&B[z++])-65536;F[_e++]=String.fromCharCode(55296+(rn>>10)),F[_e++]=String.fromCharCode(56320+(1023&rn))}else{const $e=B[z++],ct=B[z++];F[_e++]=String.fromCharCode((15&K)<<12|(63&$e)<<6|63&ct)}}return F.join("")}(this.decodeStringToByteArray(B,F))},decodeStringToByteArray(B,F){this.init_();const z=F?this.charToByteMapWebSafe_:this.charToByteMap_,_e=[];for(let K=0;K<B.length;){const $e=z[B.charAt(K++)],qt=K<B.length?z[B.charAt(K)]:0;++K;const jt=K<B.length?z[B.charAt(K)]:64;++K;const je=K<B.length?z[B.charAt(K)]:64;if(++K,null==$e||null==qt||null==jt||null==je)throw Error();_e.push($e<<2|qt>>4),64!==jt&&(_e.push(qt<<4&240|jt>>2),64!==je&&_e.push(jt<<6&192|je))}return _e},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let B=0;B<this.ENCODED_VALS.length;B++)this.byteToCharMap_[B]=this.ENCODED_VALS.charAt(B),this.charToByteMap_[this.byteToCharMap_[B]]=B,this.byteToCharMapWebSafe_[B]=this.ENCODED_VALS_WEBSAFE.charAt(B),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[B]]=B,B>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(B)]=B,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(B)]=B)}}},le=function(B){return function(B){const F=ae(B);return de.encodeByteArray(F,!0)}(B).replace(/\./g,"")},ve=function(B){try{return de.decodeString(B,!0)}catch(F){console.error("base64Decode failed: ",F)}return null};function U(B,F){if(!(F instanceof Object))return F;switch(F.constructor){case Date:return new Date(F.getTime());case Object:void 0===B&&(B={});break;case Array:B=[];break;default:return F}for(const z in F)!F.hasOwnProperty(z)||!Y(z)||(B[z]=U(B[z],F[z]));return B}function Y(B){return"__proto__"!==B}function ze(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function xe(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ze())}function Ae(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function We(){return"object"==typeof self&&self.self===self}function fe(){const B="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof B&&void 0!==B.id}function pe(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const B=ze();return B.indexOf("MSIE ")>=0||B.indexOf("Trident/")>=0}function Ie(){return!Ae()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ue(){return"object"==typeof indexedDB}function Ve(){return new Promise((B,F)=>{try{let z=!0;const _e="validate-browser-context-for-indexeddb-analytics-module",K=self.indexedDB.open(_e);K.onsuccess=()=>{K.result.close(),z||self.indexedDB.deleteDatabase(_e),B(!0)},K.onupgradeneeded=()=>{z=!1},K.onerror=()=>{var $e;F((null===($e=K.error)||void 0===$e?void 0:$e.message)||"")}}catch(z){F(z)}})}function V(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}const ee=()=>{try{return function ce(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const B=process.env.__FIREBASE_DEFAULTS__;return B?JSON.parse(B):void 0})()||(()=>{if(typeof document>"u")return;let B;try{B=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const F=B&&ve(B[1]);return F&&JSON.parse(F)})()}catch(B){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${B}`)}},lt=()=>{var B;return null===(B=ee())||void 0===B?void 0:B.config},zt=B=>{var F;return null===(F=ee())||void 0===F?void 0:F[`_${B}`]};class Ot{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((F,z)=>{this.resolve=F,this.reject=z})}wrapCallback(F){return(z,_e)=>{z?this.reject(z):this.resolve(_e),"function"==typeof F&&(this.promise.catch(()=>{}),1===F.length?F(z):F(z,_e))}}}function Ye(B,F){if(B.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const _e=F||"demo-project",K=B.iat||0,$e=B.sub||B.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ct=Object.assign({iss:`https://securetoken.google.com/${_e}`,aud:_e,iat:K,exp:K+3600,auth_time:K,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},B);return[le(JSON.stringify({alg:"none",type:"JWT"})),le(JSON.stringify(ct)),""].join(".")}class un extends Error{constructor(F,z,_e){super(z),this.code=F,this.customData=_e,this.name="FirebaseError",Object.setPrototypeOf(this,un.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ht.prototype.create)}}class Ht{constructor(F,z,_e){this.service=F,this.serviceName=z,this.errors=_e}create(F,...z){const _e=z[0]||{},K=`${this.service}/${F}`,$e=this.errors[F],ct=$e?function Wt(B,F){return B.replace(wr,(z,_e)=>{const K=F[_e];return null!=K?String(K):`<${_e}?>`})}($e,_e):"Error";return new un(K,`${this.serviceName}: ${ct} (${K}).`,_e)}}const wr=/\{\$([^}]+)}/g;function li(B,F){return Object.prototype.hasOwnProperty.call(B,F)}function Zr(B){for(const F in B)if(Object.prototype.hasOwnProperty.call(B,F))return!1;return!0}function Je(B,F){if(B===F)return!0;const z=Object.keys(B),_e=Object.keys(F);for(const K of z){if(!_e.includes(K))return!1;const $e=B[K],ct=F[K];if(gr($e)&&gr(ct)){if(!Je($e,ct))return!1}else if($e!==ct)return!1}for(const K of _e)if(!z.includes(K))return!1;return!0}function gr(B){return null!==B&&"object"==typeof B}function $n(B){const F=[];for(const[z,_e]of Object.entries(B))Array.isArray(_e)?_e.forEach(K=>{F.push(encodeURIComponent(z)+"="+encodeURIComponent(K))}):F.push(encodeURIComponent(z)+"="+encodeURIComponent(_e));return F.length?"&"+F.join("&"):""}function Yr(B){const F={};return B.replace(/^\?/,"").split("&").forEach(_e=>{if(_e){const[K,$e]=_e.split("=");F[decodeURIComponent(K)]=decodeURIComponent($e)}}),F}function vi(B){const F=B.indexOf("?");if(!F)return"";const z=B.indexOf("#",F);return B.substring(F,z>0?z:void 0)}function Pn(B,F){const z=new sn(B,F);return z.subscribe.bind(z)}class sn{constructor(F,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{F(this)}).catch(_e=>{this.error(_e)})}next(F){this.forEachObserver(z=>{z.next(F)})}error(F){this.forEachObserver(z=>{z.error(F)}),this.close(F)}complete(){this.forEachObserver(F=>{F.complete()}),this.close()}subscribe(F,z,_e){let K;if(void 0===F&&void 0===z&&void 0===_e)throw new Error("Missing Observer.");K=function ut(B,F){if("object"!=typeof B||null===B)return!1;for(const z of F)if(z in B&&"function"==typeof B[z])return!0;return!1}(F,["next","error","complete"])?F:{next:F,error:z,complete:_e},void 0===K.next&&(K.next=Xt),void 0===K.error&&(K.error=Xt),void 0===K.complete&&(K.complete=Xt);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?K.error(this.finalError):K.complete()}catch{}}),this.observers.push(K),$e}unsubscribeOne(F){void 0===this.observers||void 0===this.observers[F]||(delete this.observers[F],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(F){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,F)}sendOne(F,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[F])try{z(this.observers[F])}catch(_e){typeof console<"u"&&console.error&&console.error(_e)}})}close(F){this.finalized||(this.finalized=!0,void 0!==F&&(this.finalError=F),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Xt(){}function et(B,F=1e3,z=2){const _e=F*Math.pow(z,B),K=Math.round(.5*_e*(Math.random()-.5)*2);return Math.min(144e5,_e+K)}function At(B){return B&&B._delegate?B._delegate:B}},1258:(dt,Se,L)=>{var I=L(4650);let X=null;function k(){return X}const he=new I.OlP("DocumentToken");let tn=(()=>{class n{constructor(t,i,a,c){this._iterableDiffers=t,this._keyValueDiffers=i,this._ngEl=a,this._renderer=c,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&((0,I.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachChangedItem(i=>this._toggleClass(i.key,i.currentValue)),t.forEachRemovedItem(i=>{i.previousValue&&this._toggleClass(i.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(i=>{if("string"!=typeof i.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,I.AaK)(i.item)}`);this._toggleClass(i.item,!0)}),t.forEachRemovedItem(i=>this._toggleClass(i.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!0)):Object.keys(t).forEach(i=>this._toggleClass(i,!!t[i])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(i=>this._toggleClass(i,!1)):Object.keys(t).forEach(i=>this._toggleClass(i,!1)))}_toggleClass(t,i){(t=t.trim())&&t.split(/\s+/g).forEach(a=>{i?this._renderer.addClass(this._ngEl.nativeElement,a):this._renderer.removeClass(this._ngEl.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.ZZ4),I.Y36(I.aQg),I.Y36(I.SBq),I.Y36(I.Qsj))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),n})();class Go{constructor(e,t,i,a){this.$implicit=e,this.ngForOf=t,this.index=i,this.count=a}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let xs=(()=>{class n{constructor(t,i,a){this._viewContainer=t,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const i=this._viewContainer;t.forEachOperation((a,c,p)=>{if(null==a.previousIndex)i.createEmbeddedView(this._template,new Go(a.item,this._ngForOf,-1,-1),null===p?void 0:p);else if(null==p)i.remove(null===c?void 0:c);else if(null!==c){const y=i.get(c);i.move(y,p),rs(y,a)}});for(let a=0,c=i.length;a<c;a++){const y=i.get(a).context;y.index=a,y.count=c,y.ngForOf=this._ngForOf}t.forEachIdentityChange(a=>{rs(i.get(a.currentIndex),a)})}static ngTemplateContextGuard(t,i){return!0}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(I.s_b),I.Y36(I.Rgc),I.Y36(I.ZZ4))},n.\u0275dir=I.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function rs(n,e){n.context.$implicit=e.item}let qo=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({}),n})();function lr(n){return"server"===n}class ks extends class nd extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ie(n){X||(X=n)}(new ks)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ou(){return Ps=Ps||document.querySelector("base"),Ps?Ps.getAttribute("href"):null}();return null==t?null:function Br(n){Wn=Wn||document.createElement("a"),Wn.setAttribute("href",n);const e=Wn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ps=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ha(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const i=t.indexOf("="),[a,c]=-1==i?[t,""]:[t.slice(0,i),t.slice(i+1)];if(a.trim()===e)return decodeURIComponent(c)}return null}(document.cookie,e)}}let Wn,Ps=null;const ln=new I.OlP("TRANSITION_ID"),Vc=[{provide:I.ip1,useFactory:function rd(n,e,t){return()=>{t.get(I.CZH).donePromise.then(()=>{const i=k(),a=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let c=0;c<a.length;c++)i.remove(a[c])})}},deps:[ln,he,I.zs3],multi:!0}];let Bc=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const au=new I.OlP("EventManagerPlugins");let id=(()=>{class n{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(a=>a.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,a){return this._findPluginFor(i).addEventListener(t,i,a)}addGlobalEventListener(t,i,a){return this._findPluginFor(i).addGlobalEventListener(t,i,a)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const a=this._plugins;for(let c=0;c<a.length;c++){const p=a[c];if(p.supports(t))return this._eventNameToPlugin.set(t,p),p}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(au),I.LFG(I.R0b))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class uu{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const a=k().getGlobalEventTarget(this._doc,e);if(!a)throw new Error(`Unsupported event target ${a} for event ${t}`);return this.addEventListener(a,t,i)}}let Os=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(a=>{this._stylesSet.has(a)||(this._stylesSet.add(a),i.add(a))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})(),so=(()=>{class n extends Os{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,a){t.forEach(c=>{const p=this._doc.createElement("style");p.textContent=c,a.push(i.appendChild(p))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(sd),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,a)=>{this._addStylesToHost(t,a,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(sd))}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();function sd(n){k().remove(n)}const oo={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},od=/%COMP%/g;function du(n,e,t){for(let i=0;i<e.length;i++){let a=e[i];Array.isArray(a)?du(n,a,t):(a=a.replace(od,n),t.push(a))}return t}function ad(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ao=(()=>{class n{constructor(t,i,a){this.eventManager=t,this.sharedStylesHost=i,this.appId=a,this.rendererByCompId=new Map,this.defaultRenderer=new uo(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case I.ifc.Emulated:{let a=this.rendererByCompId.get(i.id);return a||(a=new ud(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,a)),a.applyToHost(t),a}case 1:case I.ifc.ShadowDom:return new cd(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const a=du(i.id,i.styles,[]);this.sharedStylesHost.addStyles(a),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(id),I.LFG(so),I.LFG(I.AFp))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();class uo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(oo[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ta(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(ta(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,a){if(a){t=a+":"+t;const c=oo[a];c?e.setAttributeNS(c,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const a=oo[i];a?e.removeAttributeNS(a,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,a){a&(I.JOm.DashCase|I.JOm.Important)?e.style.setProperty(t,i,a&I.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&I.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ad(i)):this.eventManager.addEventListener(e,t,ad(i))}}function ta(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class ud extends uo{constructor(e,t,i,a){super(e),this.component=i;const c=du(a+"-"+i.id,i.styles,[]);t.addStyles(c),this.contentAttr=function bn(n){return"_ngcontent-%COMP%".replace(od,n)}(a+"-"+i.id),this.hostAttr=function lu(n){return"_nghost-%COMP%".replace(od,n)}(a+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class cd extends uo{constructor(e,t,i,a){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const c=du(a.id,a.styles,[]);for(let p=0;p<c.length;p++){const y=document.createElement("style");y.textContent=c[p],this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let er=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,a){return t.addEventListener(i,a,!1),()=>this.removeEventListener(t,i,a)}removeEventListener(t,i,a){return t.removeEventListener(i,a)}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const na=["alt","control","meta","shift"],ra={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},bi={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let ia=(()=>{class n extends uu{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,i,a){const c=n.parseEventName(i),p=n.eventCallback(c.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,c.domEventName,p))}static parseEventName(t){const i=t.toLowerCase().split("."),a=i.shift();if(0===i.length||"keydown"!==a&&"keyup"!==a)return null;const c=n._normalizeKey(i.pop());let p="",y=i.indexOf("code");if(y>-1&&(i.splice(y,1),p="code."),na.forEach(T=>{const M=i.indexOf(T);M>-1&&(i.splice(M,1),p+=T+".")}),p+=c,0!=i.length||0===c.length)return null;const D={};return D.domEventName=a,D.fullKey=p,D}static matchEventFullKeyCode(t,i){let a=ra[t.key]||t.key,c="";return i.indexOf("code.")>-1&&(a=t.code,c="code."),!(null==a||!a)&&(a=a.toLowerCase()," "===a?a="space":"."===a&&(a="dot"),na.forEach(p=>{p!==a&&(0,bi[p])(t)&&(c+=p+".")}),c+=a,c===i)}static eventCallback(t,i,a){return c=>{n.matchEventFullKeyCode(c,t)&&a.runGuarded(()=>i(c))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(he))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac}),n})();const gu=(0,I.eFA)(I._c5,"browser",[{provide:I.Lbi,useValue:"browser"},{provide:I.g9A,useValue:function fu(){ks.makeCurrent()},multi:!0},{provide:he,useFactory:function oa(){return(0,I.RDi)(document),document},deps:[]}]),us=new I.OlP(""),dd=[{provide:I.rWj,useClass:class Mh{addToWindow(e){I.dqk.getAngularTestability=(i,a=!0)=>{const c=e.findTestabilityInTree(i,a);if(null==c)throw new Error("Could not find testability for element.");return c},I.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),I.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),I.dqk.frameworkStabilizers||(I.dqk.frameworkStabilizers=[]),I.dqk.frameworkStabilizers.push(i=>{const a=I.dqk.getAllAngularTestabilities();let c=a.length,p=!1;const y=function(D){p=p||D,c--,0==c&&i(p)};a.forEach(function(D){D.whenStable(y)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:I.lri,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]},{provide:I.dDg,useClass:I.dDg,deps:[I.R0b,I.eoX,I.rWj]}],cs=[{provide:I.zSh,useValue:"root"},{provide:I.qLn,useFactory:function Vs(){return new I.qLn},deps:[]},{provide:au,useClass:er,multi:!0,deps:[he,I.R0b,I.Lbi]},{provide:au,useClass:ia,multi:!0,deps:[he]},{provide:ao,useClass:ao,deps:[id,so,I.AFp]},{provide:I.FYo,useExisting:ao},{provide:Os,useExisting:so},{provide:so,useClass:so,deps:[he]},{provide:id,useClass:id,deps:[au,I.R0b]},{provide:class ro{},useClass:Bc,deps:[]},[]];let jc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:I.AFp,useValue:t.appId},{provide:ln,useExisting:I.AFp},Vc]}}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(us,12))},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[...cs,...dd],imports:[qo,I.hGG]}),n})();typeof window<"u"&&window;var jr=L(2011),go=L(4986),zc=L(8306),pi=L(8996),yr=L(7669);function dr(...n){const e=(0,yr.yG)(n);return(0,pi.D)(n,e)}var qn=L(2680),mo=L(6131);function da(...n){return function fs(){return(0,mo.J)(1)}()((0,pi.D)(n,(0,yr.yG)(n)))}var ps=L(4482);function ha(...n){const e=(0,yr.yG)(n);return(0,ps.e)((t,i)=>{(e?da(n,t,e):da(n,t)).subscribe(i)})}var ei=L(5403);function gs(){return(0,ps.e)((n,e)=>{let t,i=!1;n.subscribe((0,ei.x)(e,a=>{const c=t;t=a,i&&e.next([c,a]),i=!0}))})}var hr=L(4004);function $r(n,e,t,i,a){return(c,p)=>{let y=t,D=e,T=0;c.subscribe((0,ei.x)(p,M=>{const P=T++;D=y?n(D,M,P):(y=!0,M),i&&p.next(D)},a&&(()=>{y&&p.next(D),p.complete()})))}}function fa(n,e){return(0,ps.e)($r(n,e,arguments.length>=2,!0))}var $s=L(4671);function Wc(n,e){return n===e}function yo(n,e){return(0,ps.e)((t,i)=>{let a=0;t.subscribe((0,ei.x)(i,c=>n.call(e,c,a++)&&i.next(c)))})}L(9545);var nt,pa=L(3942),ge=L(5861),gi=L(9681),_o=L(4859),Cr=L(1877),Vt=L(2090),_m=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr={},vo=vo||{},pt=_m||self;function Hs(){}function Io(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function wo(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Fi="closure_uid_"+(1e9*Math.random()>>>0),ms=0;function Vn(n,e,t){return n.call.apply(n.bind,arguments)}function kh(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,i),n.apply(e,a)}}return function(){return n.apply(e,arguments)}}function Bn(n,e,t){return(Bn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Vn:kh).apply(null,arguments)}function Eo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Tn(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,a,c){for(var p=Array(arguments.length-2),y=2;y<arguments.length;y++)p[y-2]=arguments[y];return e.prototype[a].apply(i,p)}}function Vi(){this.s=this.s,this.o=this.o}var b={};Vi.prototype.s=!1,Vi.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function Hr(n){return Object.prototype.hasOwnProperty.call(n,Fi)&&n[Fi]||(n[Fi]=++ms)}(this);delete b[n]}},Vi.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const A=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function O(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function W(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Io(i)){const a=n.length||0,c=i.length||0;n.length=a+c;for(let p=0;p<c;p++)n[a+p]=i[p]}else n.push(i)}}function Z(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Z.prototype.h=function(){this.defaultPrevented=!0};var we=function(){if(!pt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{pt.addEventListener("test",Hs,e),pt.removeEventListener("test",Hs,e)}catch{}return n}();function Le(n){return/^[\s\xa0]*$/.test(n)}var Ze=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function at(n,e){return n<e?-1:n>e?1:0}function Tt(){var n=pt.navigator;return n&&(n=n.userAgent)?n:""}function rt(n){return-1!=Tt().indexOf(n)}function Un(n){return Un[" "](n),n}Un[" "]=Hs;var Ui,n,Bi=rt("Opera"),ti=rt("Trident")||rt("MSIE"),Do=rt("Edge"),Iu=Do||ti,wu=rt("Gecko")&&!(-1!=Tt().toLowerCase().indexOf("webkit")&&!rt("Edge"))&&!(rt("Trident")||rt("MSIE"))&&!rt("Edge"),bo=-1!=Tt().toLowerCase().indexOf("webkit")&&!rt("Edge");function ys(){var n=pt.document;return n?n.documentMode:void 0}e:{var ga="",Eu=(n=Tt(),wu?/rv:([^\);]+)(\)|;)/.exec(n):Do?/Edge\/([\d\.]+)/.exec(n):ti?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):bo?/WebKit\/(\S+)/.exec(n):Bi?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Eu&&(ga=Eu?Eu[1]:""),ti){var ma=ys();if(null!=ma&&ma>parseFloat(ga)){Ui=String(ma);break e}}Ui=ga}var vm={};var yv=pt.document&&ti&&(ys()||parseInt(Ui,10))||void 0;function ya(n,e){if(Z.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(wu){e:{try{Un(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Im[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ya.X.h.call(this)}}Tn(ya,Z);var Im={2:"touch",3:"pen",4:"mouse"};ya.prototype.h=function(){ya.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Du="closure_listenable_"+(1e6*Math.random()|0),bu=0;function Oh(n,e,t,i,a){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=a,this.key=++bu,this.ba=this.ea=!1}function Gs(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Lh(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function hp(n){const e={};for(const t in n)e[t]=n[t];return e}const wm="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Tu(n,e){let t,i;for(let a=1;a<arguments.length;a++){for(t in i=arguments[a],i)n[t]=i[t];for(let c=0;c<wm.length;c++)t=wm[c],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Cu(n){this.src=n,this.g={},this.h=0}function gd(n,e){var t=e.type;if(t in n.g){var c,i=n.g[t],a=A(i,e);(c=0<=a)&&Array.prototype.splice.call(i,a,1),c&&(Gs(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function md(n,e,t,i){for(var a=0;a<n.length;++a){var c=n[a];if(!c.ba&&c.listener==e&&c.capture==!!t&&c.ha==i)return a}return-1}Cu.prototype.add=function(n,e,t,i,a){var c=n.toString();(n=this.g[c])||(n=this.g[c]=[],this.h++);var p=md(n,e,i,a);return-1<p?(e=n[p],t||(e.ea=!1)):((e=new Oh(e,this.src,c,!!i,a)).ea=t,n.push(e)),e};var yd="closure_lm_"+(1e6*Math.random()|0),Su={};function fp(n,e,t,i,a){if(i&&i.once)return Fh(n,e,t,i,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)fp(n,e[c],t,i,a);return null}return t=yp(t),n&&n[Du]?n.N(e,t,wo(i)?!!i.capture:!!i,a):_d(n,e,t,!1,i,a)}function _d(n,e,t,i,a,c){if(!e)throw Error("Invalid event type");var p=wo(a)?!!a.capture:!!a,y=Vh(n);if(y||(n[yd]=y=new Cu(n)),(t=y.add(e,t,i,p,c)).proxy)return t;if(i=function Em(){const e=gp;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)we||(a=p),void 0===a&&(a=!1),n.addEventListener(e.toString(),i,a);else if(n.attachEvent)n.attachEvent(Au(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function Fh(n,e,t,i,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Fh(n,e[c],t,i,a);return null}return t=yp(t),n&&n[Du]?n.O(e,t,wo(i)?!!i.capture:!!i,a):_d(n,e,t,!0,i,a)}function pp(n,e,t,i,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)pp(n,e[c],t,i,a);else i=wo(i)?!!i.capture:!!i,t=yp(t),n&&n[Du]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=md(c=n.g[e],t,i,a))&&(Gs(c[t]),Array.prototype.splice.call(c,t,1),0==c.length&&(delete n.g[e],n.h--))):n&&(n=Vh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=md(e,t,i,a)),(t=-1<n?e[n]:null)&&Ti(t))}function Ti(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Du])gd(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(Au(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Vh(e))?(gd(t,n),0==t.h&&(t.src=null,e[yd]=null)):Gs(n)}}}function Au(n){return n in Su?Su[n]:Su[n]="on"+n}function gp(n,e){if(n.ba)n=!0;else{e=new ya(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&Ti(n),n=t.call(i,e)}return n}function Vh(n){return(n=n[yd])instanceof Cu?n:null}var mp="__closure_events_fn_"+(1e9*Math.random()>>>0);function yp(n){return"function"==typeof n?n:(n[mp]||(n[mp]=function(e){return n.handleEvent(e)}),n[mp])}function _r(){Vi.call(this),this.i=new Cu(this),this.P=this,this.I=null}function Sr(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Z(e,n);else if(e instanceof Z)e.target=e.target||n;else{var a=e;Tu(e=new Z(i,n),a)}if(a=!0,t)for(var c=t.length-1;0<=c;c--){var p=e.g=t[c];a=qc(p,i,!0,e)&&a}if(a=qc(p=e.g=n,i,!0,e)&&a,a=qc(p,i,!1,e)&&a,t)for(c=0;c<t.length;c++)a=qc(p=e.g=t[c],i,!1,e)&&a}function qc(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var p=e[c];if(p&&!p.ba&&p.capture==t){var y=p.listener,D=p.ha||p.src;p.ea&&gd(n.i,p),a=!1!==y.call(D,i)&&a}}return a&&!i.defaultPrevented}Tn(_r,Vi),_r.prototype[Du]=!0,_r.prototype.removeEventListener=function(n,e,t,i){pp(this,n,e,t,i)},_r.prototype.M=function(){if(_r.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)Gs(t[i]);delete n.g[e],n.h--}}this.I=null},_r.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},_r.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var vd=pt.JSON.stringify;function Dm(){var n=bm;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Id,To=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Bh,n=>n.reset());class Bh{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function zs(n){pt.setTimeout(()=>{throw n},0)}function Co(n,e){Id||function wd(){var n=pt.Promise.resolve(void 0);Id=function(){n.then(_p)}}(),Ed||(Id(),Ed=!0),bm.add(n,e)}var Ed=!1,bm=new class _v{constructor(){this.h=this.g=null}add(e,t){const i=To.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function _p(){for(var n;n=Dm();){try{n.h.call(n.g)}catch(t){zs(t)}var e=To;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ed=!1}function Uh(n,e){_r.call(this),this.h=n||1,this.g=e||pt,this.j=Bn(this.lb,this),this.l=Date.now()}function Kc(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function _a(n,e,t){if("function"==typeof n)t&&(n=Bn(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Bn(n.handleEvent,n)}return 2147483647<Number(e)?-1:pt.setTimeout(n,e||0)}function Tm(n){n.g=_a(()=>{n.g=null,n.i&&(n.i=!1,Tm(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Tn(Uh,_r),(nt=Uh.prototype).ca=!1,nt.R=null,nt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Sr(this,"tick"),this.ca&&(Kc(this),this.start()))}},nt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},nt.M=function(){Uh.X.M.call(this),Kc(this),delete this.g};class vv extends Vi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tm(this)}M(){super.M(),this.g&&(pt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xu(n){Vi.call(this),this.h=n,this.g={}}Tn(xu,Vi);var vp=[];function Ip(n,e,t,i){Array.isArray(t)||(t&&(vp[0]=t.toString()),t=vp);for(var a=0;a<t.length;a++){var c=fp(e,t[a],i||n.handleEvent,!1,n.h||n);if(!c)break;n.g[c.key]=c}}function jh(n){Lh(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ti(e)},n),n.g={}}function Mu(){this.g=!0}function So(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Cm(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var a=i[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if("noop"!=c&&"stop"!=c&&"close"!=c)for(var p=1;p<a.length;p++)a[p]=""}}}return vd(t)}catch{return e}}(n,t)+(i?" "+i:"")})}xu.prototype.M=function(){xu.X.M.call(this),jh(this)},xu.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Mu.prototype.Aa=function(){this.g=!1},Mu.prototype.info=function(){};var dn={},Yc=null;function bd(){return Yc=Yc||new _r}function $h(n){Z.call(this,dn.Pa,n)}function Nu(n){const e=bd();Sr(e,new $h(e,n))}function Hh(n,e){Z.call(this,dn.STAT_EVENT,n),this.stat=e}function Gr(n){const e=bd();Sr(e,new Hh(e,n))}function Ep(n,e){Z.call(this,dn.Qa,n),this.size=e}function Qc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return pt.setTimeout(function(){n()},e)}dn.Pa="serverreachability",Tn($h,Z),dn.STAT_EVENT="statevent",Tn(Hh,Z),dn.Qa="timingevent",Tn(Ep,Z);var Td={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Jc={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Dp(){}function Gh(){}Dp.prototype.h=null;var Ad,Ru={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Cd(){Z.call(this,"d")}function Sd(){Z.call(this,"c")}function Ia(){}function Ao(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new xu(this),this.O=Iv,this.T=new Uh(n=Iu?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Xc}function Xc(){this.i=null,this.g="",this.h=!1}Tn(Cd,Z),Tn(Sd,Z),Tn(Ia,Dp),Ia.prototype.g=function(){return new XMLHttpRequest},Ia.prototype.i=function(){return{}},Ad=new Ia;var Iv=45e3,el={},ku={};function Ar(n,e,t){n.K=1,n.v=Pu(ji(e)),n.s=t,n.P=!0,wa(n,null)}function wa(n,e){n.F=Date.now(),_s(n),n.A=ji(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),G(t.i,"t",i),n.C=0,t=n.l.H,n.h=new Xc,n.g=kv(n.l,t?e:null,!n.s),0<n.N&&(n.L=new vv(Bn(n.La,n,n.g),n.N)),Ip(n.S,n.g,"readystatechange",n.ib),e=n.H?hp(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Nu(1),function wp(n,e,t,i,a,c){n.info(function(){if(n.g)if(c)for(var p="",y=c.split("&"),D=0;D<y.length;D++){var T=y[D].split("=");if(1<T.length){var M=T[0];T=T[1];var P=M.split("_");p=2<=P.length&&"type"==P[1]?p+(M+"=")+T+"&":p+(M+"=redacted&")}}else p=null;else p=c;return"XMLHTTP REQ ("+i+") [attempt "+a+"]: "+e+"\n"+t+"\n"+p})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Ws(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function bp(n,e,t){let a,i=!0;for(;!n.I&&n.C<t.length;){if(a=tl(n,t),a==ku){4==e&&(n.o=4,Gr(14),i=!1),So(n.j,n.m,null,"[Incomplete Response]");break}if(a==el){n.o=4,Gr(15),So(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}So(n.j,n.m,a,null),nl(n,a)}Ws(n)&&a!=ku&&a!=el&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Gr(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Rp(e),e.K=!0,Gr(11))):(So(n.j,n.m,t,"[Invalid Chunked Response]"),nr(n),xo(n))}function tl(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?ku:(t=Number(e.substring(t,i)),isNaN(t)?el:(i+=1)+t>e.length?ku:(e=e.substr(i,t),n.C=i+t,e))}function _s(n){n.V=Date.now()+n.O,Tp(n,n.O)}function Tp(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Qc(Bn(n.gb,n),e)}function Ea(n){n.B&&(pt.clearTimeout(n.B),n.B=null)}function xo(n){0==n.l.G||n.I||Mv(n.l,n)}function nr(n){Ea(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Kc(n.T),jh(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function nl(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||il(t.h,n)))if(!n.J&&il(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var a=i;if(0==a[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Yh(t),xr(t)}Lm(t),Gr(18)}}else t.Ba=a[1],0<t.Ba-t.T&&37500>a[2]&&t.L&&0==t.A&&!t.v&&(t.v=Qc(Bn(t.cb,t),6e3));if(1>=ni(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else ol(t,11)}else if((n.J||t.g==n)&&Yh(t),!Le(e))for(a=t.Fa.g.parse(e),e=0;e<a.length;e++){let T=a[e];if(t.T=T[0],T=T[1],2==t.G)if("c"==T[0]){t.I=T[1],t.ka=T[2];const M=T[3];null!=M&&(t.ma=M,t.j.info("VER="+t.ma));const P=T[4];null!=P&&(t.Ca=P,t.j.info("SVER="+t.Ca));const q=T[5];null!=q&&"number"==typeof q&&0<q&&(t.J=i=1.5*q,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const te=n.g;if(te){const ue=te.g?te.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ue){var c=i.h;c.g||-1==ue.indexOf("spdy")&&-1==ue.indexOf("quic")&&-1==ue.indexOf("h2")||(c.j=c.l,c.g=new Set,c.h&&(Wh(c,c.h),c.h=null))}if(i.D){const Fe=te.g?te.g.getResponseHeader("X-HTTP-Session-Id"):null;Fe&&(i.za=Fe,fn(i.F,i.D,Fe))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var p=n;if((i=t).sa=Rv(i,i.H?i.ka:null,i.V),p.J){Ou(i.h,p);var y=p,D=i.J;D&&y.setTimeout(D),y.B&&(Ea(y),_s(y)),i.g=p}else Av(i);0<t.i.length&&Zh(t)}else"stop"!=T[0]&&"close"!=T[0]||ol(t,7);else 3==t.G&&("stop"==T[0]||"close"==T[0]?"stop"==T[0]?ol(t,7):km(t):"noop"!=T[0]&&t.l&&t.l.wa(T),t.A=0)}Nu(4)}catch{}}function Cp(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Io(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function Sm(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Io(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function zh(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Io(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),a=i.length,c=0;c<a;c++)e.call(void 0,i[c],t&&t[c],n)}(nt=Ao.prototype).setTimeout=function(n){this.O=n},nt.ib=function(n){n=n.target;const e=this.L;e&&3==Ks(n)?e.l():this.La(n)},nt.La=function(n){try{if(n==this.g)e:{const M=Ks(this.g);var e=this.g.Ea();const P=this.g.aa();if(!(3>M)&&(3!=M||Iu||this.g&&(this.h.h||this.g.fa()||Tv(this.g)))){this.I||4!=M||7==e||Nu(8==e||0>=P?3:2),Ea(this);var t=this.g.aa();this.Y=t;t:if(Ws(this)){var i=Tv(this.g);n="";var a=i.length,c=4==Ks(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){nr(this),xo(this);var p="";break t}this.h.i=new pt.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:c&&e==a-1});i.splice(0,a),this.h.g+=n,this.C=0,p=this.h.g}else p=this.g.fa();if(this.i=200==t,function Dd(n,e,t,i,a,c,p){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+a+"]: "+e+"\n"+t+"\n"+c+" "+p})}(this.j,this.u,this.A,this.m,this.U,M,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var y,D=this.g;if((y=D.g?D.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Le(y)){var T=y;break t}}T=null}if(!(t=T)){this.i=!1,this.o=3,Gr(12),nr(this),xo(this);break e}So(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,nl(this,t)}this.P?(bp(this,M,p),Iu&&this.i&&3==M&&(Ip(this.S,this.T,"tick",this.hb),this.T.start())):(So(this.j,this.m,p,null),nl(this,p)),4==M&&nr(this),this.i&&!this.I&&(4==M?Mv(this.l,this):(this.i=!1,_s(this)))}else 400==t&&0<p.indexOf("Unknown SID")?(this.o=3,Gr(12)):(this.o=0,Gr(13)),nr(this),xo(this)}}}catch{}},nt.hb=function(){if(this.g){var n=Ks(this.g),e=this.g.fa();this.C<e.length&&(Ea(this),bp(this,n,e),this.i&&4!=n&&_s(this))}},nt.cancel=function(){this.I=!0,nr(this)},nt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function Zc(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Nu(3),Gr(17)),nr(this),this.o=2,xo(this)):Tp(this,this.V-n)};var xd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qs(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof qs){this.h=void 0!==e?e:n.h,Md(this,n.j),this.s=n.s,this.g=n.g,Ci(this,n.m),this.l=n.l,e=n.i;var t=new f;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Mo(this,t),this.o=n.o}else n&&(t=String(n).match(xd))?(this.h=!!e,Md(this,t[1]||"",!0),this.s=rl(t[2]||""),this.g=rl(t[3]||"",!0),Ci(this,t[4]),this.l=rl(t[5]||"",!0),Mo(this,t[6]||"",!0),this.o=rl(t[7]||"")):(this.h=!!e,this.i=new f(null,this.h))}function ji(n){return new qs(n)}function Md(n,e,t){n.j=t?rl(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Ci(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Mo(n,e,t){e instanceof f?(n.i=e,function Pe(n,e){e&&!n.j&&(_(n),n.i=null,n.g.forEach(function(t,i){var a=i.toLowerCase();i!=a&&(S(this,i),G(this,a,t))},n)),n.j=e}(n.i,n.h)):(t||(e=No(e,g)),n.i=new f(e,n.h))}function fn(n,e,t){n.i.set(e,t)}function Pu(n){return fn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function rl(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function No(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,wv),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function wv(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}qs.prototype.toString=function(){var n=[],e=this.j;e&&n.push(No(e,Sp,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(No(e,Sp,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(No(t,"/"==t.charAt(0)?Am:Nd,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",No(t,d)),n.join("")};var Sp=/[#\/\?@]/g,Nd=/[#\?:]/g,Am=/[#\?]/g,g=/[#\?@]/g,d=/#/g;function f(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function _(n){n.g||(n.g=new Map,n.h=0,n.i&&function rr(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),a=null;if(0<=i){var c=n[t].substring(0,i);a=n[t].substring(i+1)}else c=n[t];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function S(n,e){_(n),e=se(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function N(n,e){return _(n),e=se(n,e),n.g.has(e)}function G(n,e,t){S(n,e),0<t.length&&(n.i=null,n.g.set(se(n,e),O(t)),n.h+=t.length)}function se(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gt(n){this.l=n||ft,n=pt.PerformanceNavigationTiming?0<(n=pt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(pt.g&&pt.g.Ga&&pt.g.Ga()&&pt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(nt=f.prototype).add=function(n,e){_(this),this.i=null,n=se(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},nt.forEach=function(n,e){_(this),this.g.forEach(function(t,i){t.forEach(function(a){n.call(e,a,i,this)},this)},this)},nt.oa=function(){_(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const a=n[i];for(let c=0;c<a.length;c++)t.push(e[i])}return t},nt.W=function(n){_(this);let e=[];if("string"==typeof n)N(this,n)&&(e=e.concat(this.g.get(se(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},nt.set=function(n,e){return _(this),this.i=null,N(this,n=se(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},nt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},nt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const c=encodeURIComponent(String(i)),p=this.W(i);for(i=0;i<p.length;i++){var a=c;""!==p[i]&&(a+="="+encodeURIComponent(String(p[i]))),n.push(a)}}return this.i=n.join("&")};var ft=10;function Zn(n){return!!n.h||!!n.g&&n.g.size>=n.j}function ni(n){return n.h?1:n.g?n.g.size:0}function il(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Wh(n,e){n.g?n.g.add(e):n.h=e}function Ou(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ap(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return O(n.i)}function qh(){}function xp(){this.g=new qh}function xm(n,e,t){const i=t||"";try{Cp(n,function(a,c){let p=a;wo(a)&&(p=vd(a)),e.push(i+c+"="+encodeURIComponent(p))})}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}function Lu(n,e,t,i,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(i)}catch{}}function Da(n){this.l=n.ac||null,this.j=n.jb||!1}function Fu(n,e){_r.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Vu,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gt.prototype.cancel=function(){if(this.i=Ap(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},qh.prototype.stringify=function(n){return pt.JSON.stringify(n,void 0)},qh.prototype.parse=function(n){return pt.JSON.parse(n,void 0)},Tn(Da,Dp),Da.prototype.g=function(){return new Fu(this.l,this.j)},Da.prototype.i=function(n){return function(){return n}}({}),Tn(Fu,_r);var Vu=0;function Kh(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Rd(n){n.readyState=4,n.l=null,n.j=null,n.A=null,sl(n)}function sl(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(nt=Fu.prototype).open=function(n,e){if(this.readyState!=Vu)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,sl(this)},nt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||pt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},nt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rd(this)),this.readyState=Vu},nt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,sl(this)),this.g&&(this.readyState=3,sl(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof pt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Kh(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},nt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Rd(this):sl(this),3==this.readyState&&Kh(this)}},nt.Va=function(n){this.g&&(this.response=this.responseText=n,Rd(this))},nt.Ua=function(n){this.g&&(this.response=n,Rd(this))},nt.ga=function(){this.g&&Rd(this)},nt.setRequestHeader=function(n,e){this.v.append(n,e)},nt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},nt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Fu.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var jw=pt.JSON.parse;function Mn(n){_r.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kd,this.K=this.L=!1}Tn(Mn,_r);var kd="",$w=/^https?$/i,Hw=["POST","PUT"];function Nm(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,Ev(n),Mp(n)}function Ev(n){n.D||(n.D=!0,Sr(n,"complete"),Sr(n,"error"))}function Dv(n){if(n.h&&typeof vo<"u"&&(!n.C[1]||4!=Ks(n)||2!=n.aa()))if(n.v&&4==Ks(n))_a(n.Ha,0,n);else if(Sr(n,"readystatechange"),4==Ks(n)){n.h=!1;try{const y=n.aa();e:switch(y){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===y){var a=String(n.H).match(xd)[1]||null;if(!a&&pt.self&&pt.self.location){var c=pt.self.location.protocol;a=c.substr(0,c.length-1)}i=!$w.test(a?a.toLowerCase():"")}t=i}if(t)Sr(n,"complete"),Sr(n,"success");else{n.m=6;try{var p=2<Ks(n)?n.g.statusText:""}catch{p=""}n.j=p+" ["+n.aa()+"]",Ev(n)}}finally{Mp(n)}}}function Mp(n,e){if(n.g){bv(n);const t=n.g,i=n.C[0]?Hs:null;n.g=null,n.C=null,e||Sr(n,"ready");try{t.onreadystatechange=i}catch{}}}function bv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(pt.clearTimeout(n.A),n.A=null)}function Ks(n){return n.g?n.g.readyState:0}function Tv(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case kd:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function Cv(n){let e="";return Lh(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function Rm(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=Cv(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):fn(n,e,t))}function Pd(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Sv(n){this.Ca=0,this.i=[],this.j=new Mu,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Pd("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Pd("baseRetryDelayMs",5e3,n),this.bb=Pd("retryDelaySeedMs",1e4,n),this.$a=Pd("forwardChannelMaxRetries",2,n),this.ta=Pd("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new gt(n&&n.concurrentRequestLimit),this.Fa=new xp,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function km(n){if(Np(n),3==n.G){var e=n.U++,t=ji(n.F);fn(t,"SID",n.I),fn(t,"RID",e),fn(t,"TYPE","terminate"),ba(n,t),(e=new Ao(n,n.j,e,void 0)).K=2,e.v=Pu(ji(t)),t=!1,pt.navigator&&pt.navigator.sendBeacon&&(t=pt.navigator.sendBeacon(e.v.toString(),"")),!t&&pt.Image&&((new Image).src=e.v,t=!0),t||(e.g=kv(e.l,null),e.g.da(e.v)),e.F=Date.now(),_s(e)}Nv(n)}function xr(n){n.g&&(Rp(n),n.g.cancel(),n.g=null)}function Np(n){xr(n),n.u&&(pt.clearTimeout(n.u),n.u=null),Yh(n),n.h.cancel(),n.m&&("number"==typeof n.m&&pt.clearTimeout(n.m),n.m=null)}function Zh(n){Zn(n.h)||n.m||(n.m=!0,Co(n.Ja,n),n.C=0)}function zr(n,e){var t;t=e?e.m:n.U++;const i=ji(n.F);fn(i,"SID",n.I),fn(i,"RID",t),fn(i,"AID",n.T),ba(n,i),n.o&&n.s&&Rm(i,n.o,n.s),t=new Ao(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=Om(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),Wh(n.h,t),Ar(t,i,e)}function ba(n,e){n.ia&&Lh(n.ia,function(t,i){fn(e,i,t)}),n.l&&Cp({},function(t,i){fn(e,i,t)})}function Om(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Bn(n.l.Ra,n.l,n):null;e:{var a=n.i;let c=-1;for(;;){const p=["count="+t];-1==c?0<t?(c=a[0].h,p.push("ofs="+c)):c=0:p.push("ofs="+c);let y=!0;for(let D=0;D<t;D++){let T=a[D].h;const M=a[D].g;if(T-=c,0>T)c=Math.max(0,a[D].h-100),y=!1;else try{xm(M,p,"req"+T+"_")}catch{i&&i(M)}}if(y){i=p.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function Av(n){n.g||n.u||(n.Z=1,Co(n.Ia,n),n.A=0)}function Lm(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Qc(Bn(n.Ia,n),Fm(n,n.A)),n.A++,0))}function Rp(n){null!=n.B&&(pt.clearTimeout(n.B),n.B=null)}function xv(n){n.g=new Ao(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=ji(n.sa);fn(e,"RID","rpc"),fn(e,"SID",n.I),fn(e,"CI",n.L?"0":"1"),fn(e,"AID",n.T),fn(e,"TYPE","xmlhttp"),ba(n,e),n.o&&n.s&&Rm(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=Pu(ji(e)),t.s=null,t.P=!0,wa(t,n)}function Yh(n){null!=n.v&&(pt.clearTimeout(n.v),n.v=null)}function Mv(n,e){var t=null;if(n.g==e){Yh(n),Rp(n),n.g=null;var i=2}else{if(!il(n.h,e))return;t=e.D,Ou(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var a=n.C;Sr(i=bd(),new Ep(i,t,e,a)),Zh(n)}else Av(n);else if(3==(a=e.o)||0==a&&0<n.pa||!(1==i&&function Pm(n,e){return!(ni(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Qc(Bn(n.Ja,n,e),Fm(n,n.C)),n.C++,0)))}(n,e)||2==i&&Lm(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),a){case 1:ol(n,5);break;case 4:ol(n,10);break;case 3:ol(n,6);break;default:ol(n,2)}}function Fm(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function ol(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Bn(n.kb,n);t||(t=new qs("//www.google.com/images/cleardot.gif"),pt.location&&"http"==pt.location.protocol||Md(t,"https"),Pu(t)),function Mm(n,e){const t=new Mu;if(pt.Image){const i=new Image;i.onload=Eo(Lu,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Eo(Lu,t,i,"TestLoadImage: error",!1,e),i.onabort=Eo(Lu,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Eo(Lu,t,i,"TestLoadImage: timeout",!1,e),pt.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Gr(2);n.G=0,n.l&&n.l.va(e),Nv(n),Np(n)}function Nv(n){if(n.G=0,n.la=[],n.l){const e=Ap(n.h);(0!=e.length||0!=n.i.length)&&(W(n.la,e),W(n.la,n.i),n.h.i.length=0,O(n.i),n.i.length=0),n.l.ua()}}function Rv(n,e,t){var i=t instanceof qs?ji(t):new qs(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),Ci(i,i.m);else{var a=pt.location;i=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new qs(null,void 0);i&&Md(c,i),e&&(c.g=e),a&&Ci(c,a),t&&(c.l=t),i=c}return e=n.za,(t=n.D)&&e&&fn(i,t,e),fn(i,"VER",n.ma),ba(n,i),i}function kv(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Mn(t&&n.Da&&!n.ra?new Da({jb:!0}):n.ra)).Ka(n.H),e}function Pv(){}function Ta(){if(ti&&!(10<=Number(yv)))throw Error("Environmental error: no available transport.")}function ir(n,e){_r.call(this),this.g=new Sv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!Le(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Le(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Qh(this)}function Ov(n){Cd.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Lv(){Sd.call(this),this.status=1}function Qh(n){this.g=n}(nt=Mn.prototype).Ka=function(n){this.L=n},nt.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ad.g(),this.C=function va(n){return n.h||(n.h=n.i())}(this.u?this.u:Ad),this.g.onreadystatechange=Bn(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(c){return void Nm(this,c)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)t.set(a,i[a]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const c of i.keys())t.set(c,i.get(c))}i=Array.from(t.keys()).find(c=>"content-type"==c.toLowerCase()),a=pt.FormData&&n instanceof pt.FormData,!(0<=A(Hw,e))||i||a||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,p]of t)this.g.setRequestHeader(c,p);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{bv(this),0<this.B&&((this.K=function Gw(n){return ti&&function lp(){return function Kn(n){var e=vm;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Ze(String(Ui)).split("."),t=Ze("9").split("."),i=Math.max(e.length,t.length);for(let p=0;0==n&&p<i;p++){var a=e[p]||"",c=t[p]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],c=/(\d*)(\D*)(.*)/.exec(c)||["","","",""],0==a[0].length&&0==c[0].length)break;n=at(0==a[1].length?0:parseInt(a[1],10),0==c[1].length?0:parseInt(c[1],10))||at(0==a[2].length,0==c[2].length)||at(a[2],c[2]),a=a[3],c=c[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Bn(this.qa,this)):this.A=_a(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(c){Nm(this,c)}},nt.qa=function(){typeof vo<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Sr(this,"timeout"),this.abort(8))},nt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Sr(this,"complete"),Sr(this,"abort"),Mp(this))},nt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Mp(this,!0)),Mn.X.M.call(this)},nt.Ha=function(){this.s||(this.F||this.v||this.l?Dv(this):this.fb())},nt.fb=function(){Dv(this)},nt.aa=function(){try{return 2<Ks(this)?this.g.status:-1}catch{return-1}},nt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},nt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),jw(e)}},nt.Ea=function(){return this.m},nt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(nt=Sv.prototype).ma=8,nt.G=1,nt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const a=new Ao(this,this.j,n,void 0);let c=this.s;if(this.S&&(c?(c=hp(c),Tu(c,this.S)):c=this.S),null!==this.o||this.N||(a.H=c,c=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Om(this,a,e),fn(t=ji(this.F),"RID",n),fn(t,"CVER",22),this.D&&fn(t,"X-HTTP-Session-Id",this.D),ba(this,t),c&&(this.N?e="headers="+encodeURIComponent(String(Cv(c)))+"&"+e:this.o&&Rm(t,this.o,c)),Wh(this.h,a),this.Ya&&fn(t,"TYPE","init"),this.O?(fn(t,"$req",e),fn(t,"SID","null"),a.Z=!0,Ar(a,t,null)):Ar(a,t,e),this.G=2}}else 3==this.G&&(n?zr(this,n):0==this.i.length||Zn(this.h)||zr(this))},nt.Ia=function(){if(this.u=null,xv(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Qc(Bn(this.eb,this),n)}},nt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Gr(10),xr(this),xv(this))},nt.cb=function(){null!=this.v&&(this.v=null,xr(this),Lm(this),Gr(19))},nt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Gr(2)):(this.j.info("Failed to ping google.com"),Gr(1))},(nt=Pv.prototype).xa=function(){},nt.wa=function(){},nt.va=function(){},nt.ua=function(){},nt.Ra=function(){},Ta.prototype.g=function(n,e){return new ir(n,e)},Tn(ir,_r),ir.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Gr(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=Rv(n,null,n.V),Zh(n)},ir.prototype.close=function(){km(this.g)},ir.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=vd(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Zh(e)},ir.prototype.M=function(){this.g.l=null,delete this.j,km(this.g),delete this.g,ir.X.M.call(this)},Tn(Ov,Cd),Tn(Lv,Sd),Tn(Qh,Pv),Qh.prototype.xa=function(){Sr(this.g,"a")},Qh.prototype.wa=function(n){Sr(this.g,new Ov(n))},Qh.prototype.va=function(n){Sr(this.g,new Lv(n))},Qh.prototype.ua=function(){Sr(this.g,"b")},Ta.prototype.createWebChannel=Ta.prototype.g,ir.prototype.send=ir.prototype.u,ir.prototype.open=ir.prototype.m,ir.prototype.close=ir.prototype.close,Td.NO_ERROR=0,Td.TIMEOUT=8,Td.HTTP_ERROR=6,Jc.COMPLETE="complete",Gh.EventType=Ru,Ru.OPEN="a",Ru.CLOSE="b",Ru.ERROR="c",Ru.MESSAGE="d",_r.prototype.listen=_r.prototype.N,Mn.prototype.listenOnce=Mn.prototype.O,Mn.prototype.getLastError=Mn.prototype.Oa,Mn.prototype.getLastErrorCode=Mn.prototype.Ea,Mn.prototype.getStatus=Mn.prototype.aa,Mn.prototype.getResponseJson=Mn.prototype.Sa,Mn.prototype.getResponseText=Mn.prototype.fa,Mn.prototype.send=Mn.prototype.da,Mn.prototype.setWithCredentials=Mn.prototype.Ka;var vb=fr.createWebChannelTransport=function(){return new Ta},Fv=fr.getStatEventTarget=function(){return bd()},Vv=fr.ErrorCode=Td,Ro=fr.EventType=Jc,Vm=fr.Event=dn,kp=fr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},zw=fr.FetchXmlHttpFactory=Da,Jh=fr.WebChannel=Gh,Ww=fr.XhrIo=Mn;const Od="@firebase/firestore";class Mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mr.UNAUTHENTICATED=new Mr(null),Mr.GOOGLE_CREDENTIALS=new Mr("google-credentials-uid"),Mr.FIRST_PARTY=new Mr("first-party-uid"),Mr.MOCK_USER=new Mr("mock-user");let Ld="9.12.1";const ko=new Cr.Yd("@firebase/firestore");function Xh(){return ko.logLevel}function Ne(n,...e){if(ko.logLevel<=Cr.in.DEBUG){const t=e.map(Pp);ko.debug(`Firestore (${Ld}): ${n}`,...t)}}function yn(n,...e){if(ko.logLevel<=Cr.in.ERROR){const t=e.map(Pp);ko.error(`Firestore (${Ld}): ${n}`,...t)}}function Ca(n,...e){if(ko.logLevel<=Cr.in.WARN){const t=e.map(Pp);ko.warn(`Firestore (${Ld}): ${n}`,...t)}}function Pp(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function it(n="Unexpected state"){const e=`FIRESTORE (${Ld}) INTERNAL ASSERTION FAILED: `+n;throw yn(e),new Error(e)}function It(n,e){n||it()}function Ke(n,e){return n}const oe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ce extends Vt.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Uv{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class jv{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Mr.UNAUTHENTICATED))}shutdown(){}}class Bm{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class $v{constructor(e){this.t=e,this.currentUser=Mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let a=this.i;const c=T=>this.i!==a?(a=this.i,t(T)):Promise.resolve();let p=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),p.resolve(),p=new vr,e.enqueueRetryable(()=>c(this.currentUser))};const y=()=>{const T=p;e.enqueueRetryable((0,ge.Z)(function*(){yield T.promise,yield c(i.currentUser)}))},D=T=>{Ne("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=T,this.auth.addAuthTokenListener(this.o),y()};this.t.onInit(T=>D(T)),setTimeout(()=>{if(!this.auth){const T=this.t.getImmediate({optional:!0});T?D(T):(Ne("FirebaseAuthCredentialsProvider","Auth not yet detected"),p.resolve(),p=new vr)}},0),y()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(Ne("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(It("string"==typeof i.accessToken),new Uv(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return It(null===e||"string"==typeof e),new Mr(e)}}class Um{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a,this.type="FirstParty",this.user=Mr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(It(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class Kw{constructor(e,t,i,a){this.h=e,this.l=t,this.m=i,this.g=a}getToken(){return Promise.resolve(new Um(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(Mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Hv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gv{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=c=>{null!=c.error&&Ne("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const p=c.token!==this.A;return this.A=c.token,Ne("FirebaseAppCheckTokenProvider",`Received ${p?"new":"existing"} token.`),p?t(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>i(c))};const a=c=>{Ne("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.T.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.T.getImmediate({optional:!0});c?a(c):Ne("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(It("string"==typeof t.token),this.A=t.token,new Hv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function al(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class jm{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const a=al(40);for(let c=0;c<a.length;++c)i.length<20&&a[c]<t&&(i+=e.charAt(a[c]%e.length))}return i}}function Ct(n,e){return n<e?-1:n>e?1:0}function Fd(n,e,t){return n.length===e.length&&n.every((i,a)=>t(i,e[a]))}function Yw(n){return n+"\0"}class pn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ce(oe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return pn.fromMillis(Date.now())}static fromDate(e){return pn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new pn(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ct(this.nanoseconds,e.nanoseconds):Ct(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Et{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Et(e)}static min(){return new Et(new pn(0,0))}static max(){return new Et(new pn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Vd{constructor(e,t,i){void 0===t?t=0:t>e.length&&it(),void 0===i?i=e.length-t:i>e.length-t&&it(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Vd.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Vd?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let a=0;a<i;a++){const c=e.get(a),p=t.get(a);if(c<p)return-1;if(c>p)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Kt extends Vd{construct(e,t,i){return new Kt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(a=>a.length>0))}return new Kt(t)}static emptyPath(){return new Kt([])}}const zv=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Nn extends Vd{construct(e,t,i){return new Nn(e,t,i)}static isValidIdentifier(e){return zv.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Nn(["__name__"])}static fromServerFormat(e){const t=[];let i="",a=0;const c=()=>{if(0===i.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let p=!1;for(;a<e.length;){const y=e[a];if("\\"===y){if(a+1===e.length)throw new Ce(oe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const D=e[a+1];if("\\"!==D&&"."!==D&&"`"!==D)throw new Ce(oe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=D,a+=2}else"`"===y?(p=!p,a++):"."!==y||p?(i+=y,a++):(c(),a++)}if(c(),p)throw new Ce(oe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Nn(t)}static emptyPath(){return new Nn([])}}class He{constructor(e){this.path=e}static fromPath(e){return new He(Kt.fromString(e))}static fromName(e){return new He(Kt.fromString(e).popFirst(5))}static empty(){return new He(Kt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Kt.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Kt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new He(new Kt(e.slice()))}}class ul{constructor(e,t,i,a){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=a}}function Bd(n){return n.fields.find(e=>2===e.kind)}function Bu(n){return n.fields.filter(e=>2!==e.kind)}ul.UNKNOWN_ID=-1;class ef{constructor(e,t){this.fieldPath=e,this.kind=t}}class Sa{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Sa(0,$i.min())}}function Wv(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,a=Et.fromTimestamp(1e9===i?new pn(t+1,0):new pn(t,i));return new $i(a,He.empty(),e)}function Gm(n){return new $i(n.readTime,n.key,-1)}class $i{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new $i(Et.min(),He.empty(),-1)}static max(){return new $i(Et.max(),He.empty(),-1)}}function zm(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=He.comparator(n.documentKey,e.documentKey),0!==t?t:Ct(n.largestBatchId,e.largestBatchId))}const Wm="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Op{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Aa(n){return qv.apply(this,arguments)}function qv(){return qv=(0,ge.Z)(function*(n){if(n.code!==oe.FAILED_PRECONDITION||n.message!==Wm)throw n;Ne("LocalStore","Unexpectedly lost primary lease")}),qv.apply(this,arguments)}class re{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&it(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new re((i,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(i,a)},this.catchCallback=c=>{this.wrapFailure(t,c).next(i,a)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof re?t:re.resolve(t)}catch(t){return re.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):re.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):re.reject(t)}static resolve(e){return new re((t,i)=>{t(e)})}static reject(e){return new re((t,i)=>{i(e)})}static waitFor(e){return new re((t,i)=>{let a=0,c=0,p=!1;e.forEach(y=>{++a,y.next(()=>{++c,p&&c===a&&t()},D=>i(D))}),p=!0,c===a&&t()})}static or(e){let t=re.resolve(!1);for(const i of e)t=t.next(a=>a?re.resolve(a):i());return t}static forEach(e,t){const i=[];return e.forEach((a,c)=>{i.push(t.call(this,a,c))}),this.waitFor(i)}static mapArray(e,t){return new re((i,a)=>{const c=e.length,p=new Array(c);let y=0;for(let D=0;D<c;D++){const T=D;t(e[T]).next(M=>{p[T]=M,++y,y===c&&i(p)},M=>a(M))}})}static doWhile(e,t){return new re((i,a)=>{const c=()=>{!0===e()?t().next(()=>{c()},a):i()};c()})}}class Lp{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new vr,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new tf(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const a=qm(i.target.error);this.P.reject(new tf(e,a))}}static open(e,t,i,a){try{return new Lp(t,e.transaction(a,i))}catch(c){throw new tf(t,c)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ne("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Jw(t)}}class vs{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===vs.D((0,Vt.z$)())&&yn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ne("SimpleDb","Removing database:",e),Uu(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Vt.hl)())return!1;if(vs.N())return!0;const e=(0,Vt.z$)(),t=vs.D(e),i=0<t&&t<10,a=vs.k(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||c)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,ge.Z)(function*(){return t.db||(Ne("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,a)=>{const c=indexedDB.open(t.name,t.version);c.onsuccess=p=>{i(p.target.result)},c.onblocked=()=>{a(new tf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},c.onerror=p=>{const y=p.target.error;a("VersionError"===y.name?new Ce(oe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===y.name?new Ce(oe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+y):new tf(e,y))},c.onupgradeneeded=p=>{Ne("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',p.oldVersion),t.S.$(p.target.result,c.transaction,p.oldVersion,t.version).next(()=>{Ne("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,a){var c=this;return(0,ge.Z)(function*(){const p="readonly"===t;let y=0;for(;;){++y;try{c.db=yield c.F(e);const D=Lp.open(c.db,e,p?"readonly":"readwrite",i),T=a(D).next(M=>(D.V(),M)).catch(M=>(D.abort(M),re.reject(M))).toPromise();return T.catch(()=>{}),yield D.v,T}catch(D){const T=D,M="FirebaseError"!==T.name&&y<3;if(Ne("SimpleDb","Transaction failed with error:",T.message,"Retrying:",M),c.close(),!M)return Promise.reject(T)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Qw{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return Uu(this.U.delete())}}class tf extends Ce{constructor(e,t){super(oe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Nr(n){return"IndexedDbTransactionError"===n.name}class Jw{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(Ne("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(Ne("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),Uu(i)}add(e){return Ne("SimpleDb","ADD",this.store.name,e,e),Uu(this.store.add(e))}get(e){return Uu(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ne("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ne("SimpleDb","DELETE",this.store.name,e),Uu(this.store.delete(e))}count(){return Ne("SimpleDb","COUNT",this.store.name),Uu(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const a=this.cursor(i),c=[];return this.H(a,(p,y)=>{c.push(y)}).next(()=>c)}{const a=this.store.getAll(i.range);return new re((c,p)=>{a.onerror=y=>{p(y.target.error)},a.onsuccess=y=>{c(y.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new re((a,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{a(p.target.result)}})}Y(e,t){Ne("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const a=this.cursor(i);return this.H(a,(c,p,y)=>y.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const a=this.cursor(i);return this.H(a,t)}tt(e){const t=this.cursor({});return new re((i,a)=>{t.onerror=c=>{const p=qm(c.target.error);a(p)},t.onsuccess=c=>{const p=c.target.result;p?e(p.primaryKey,p.value).next(y=>{y?p.continue():i()}):i()}})}H(e,t){const i=[];return new re((a,c)=>{e.onerror=p=>{c(p.target.error)},e.onsuccess=p=>{const y=p.target.result;if(!y)return void a();const D=new Qw(y),T=t(y.primaryKey,y.value,D);if(T instanceof re){const M=T.catch(P=>(D.done(),re.reject(P)));i.push(M)}D.isDone?a():null===D.G?y.continue():y.continue(D.G)}}).next(()=>re.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Uu(n){return new re((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const a=qm(i.target.error);t(a)}})}let Kv=!1;function qm(n){const e=vs.D((0,Vt.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new Ce("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Kv||(Kv=!0,setTimeout(()=>{throw i},0)),i}}return n}class Xw{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ne("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,ge.Z)(function*(){t.task=null;try{Ne("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){Nr(i)?Ne("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield Aa(i)}yield t.nt(6e4)}))}}class eE{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,ge.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let a=t,c=!0;return re.doWhile(()=>!0===c&&a>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(p=>{if(null!==p&&!i.has(p))return Ne("IndexBackiller",`Processing collection: ${p}`),this.rt(e,p,a).next(y=>{a-=y,i.add(p)});c=!1})).next(()=>t-a)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(a=>this.localStore.localDocuments.getNextDocuments(e,t,a,i).next(c=>{const p=c.changes;return this.localStore.indexManager.updateIndexEntries(e,p).next(()=>this.ot(a,c)).next(y=>(Ne("IndexBackiller",`Updating offset: ${y}`),this.localStore.indexManager.updateCollectionGroup(e,t,y))).next(()=>p.size)}))}ot(e,t){let i=e;return t.changes.forEach((a,c)=>{const p=Gm(c);zm(p,i)>0&&(i=p)}),new $i(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class mi{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Zv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function cl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Yv(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}mi.at=-1;class st{constructor(e,t){this.comparator=e,this.root=t||Rr.EMPTY}insert(e,t){return new st(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Rr.BLACK,null,null))}remove(e){return new st(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Rr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const a=this.comparator(e,i.key);if(0===a)return t+i.left.size;a<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nf(this.root,e,this.comparator,!1)}getReverseIterator(){return new nf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nf(this.root,e,this.comparator,!0)}}class nf{constructor(e,t,i,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=t?i(e.key,t):1,t&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(0===c){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Rr{constructor(e,t,i,a,c){this.key=e,this.value=t,this.color=i??Rr.RED,this.left=a??Rr.EMPTY,this.right=c??Rr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,a,c){return new Rr(e??this.key,t??this.value,i??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let a=this;const c=i(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,t,i),null):0===c?a.copy(null,t,null,null,null):a.copy(null,null,null,null,a.right.insert(e,t,i)),a.fixUp()}removeMin(){if(this.left.isEmpty())return Rr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,a=this;if(t(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,t),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),0===t(e,a.key)){if(a.right.isEmpty())return Rr.EMPTY;i=a.right.min(),a=a.copy(i.key,i.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,t))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Rr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Rr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw it();const e=this.left.check();if(e!==this.right.check())throw it();return e+(this.isRed()?0:1)}}Rr.EMPTY=null,Rr.RED=!0,Rr.BLACK=!1,Rr.EMPTY=new class{constructor(){this.size=0}get key(){throw it()}get value(){throw it()}get color(){throw it()}get left(){throw it()}get right(){throw it()}copy(n,e,t,i,a){return this}insert(n,e,t){return new Rr(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class an{constructor(e){this.comparator=e,this.data=new st(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const a=i.getNext();if(this.comparator(a.key,e[1])>=0)return;t(a.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Qv(this.data.getIterator())}getIteratorFrom(e){return new Qv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof an)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(0!==this.comparator(a,c))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new an(this.comparator);return t.data=e,t}}class Qv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Ud(n){return n.hasNext()?n.getNext():void 0}class Si{constructor(e){this.fields=e,e.sort(Nn.comparator)}static empty(){return new Si([])}unionWith(e){let t=new an(Nn.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Si(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class pr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new pr(t)}static fromUint8Array(e){const t=function(i){let a="";for(let c=0;c<i.length;++c)a+=String.fromCharCode(i[c]);return a}(e);return new pr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ct(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pr.EMPTY_BYTE_STRING=new pr("");const nE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ju(n){if(It(!!n),"string"==typeof n){let e=0;const t=nE.exec(n);if(It(!!t),t[1]){let a=t[1];a=(a+"000000000").substr(0,9),e=Number(a)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:sr(n.seconds),nanos:sr(n.nanos)}}function sr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function $u(n){return"string"==typeof n?pr.fromBase64String(n):pr.fromUint8Array(n)}function Fp(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Hu(n){const e=n.mapValue.fields.__previous_value__;return Fp(e)?Hu(e):e}function rf(n){const e=ju(n.mapValue.fields.__local_write_time__.timestampValue);return new pn(e.seconds,e.nanos)}class Km{constructor(e,t,i,a,c,p,y,D){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=a,this.ssl=c,this.forceLongPolling=p,this.autoDetectLongPolling=y,this.useFetchStreams=D}}class Po{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Po("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Po&&e.projectId===this.projectId&&e.database===this.database}}function sf(n){return null==n}function Vp(n){return 0===n&&1/n==-1/0}function rE(n){return"number"==typeof n&&Number.isInteger(n)&&!Vp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const ll={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Bp={nullValue:"NULL_VALUE"};function Gu(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fp(n)?4:Zm(n)?9007199254740991:10:it()}function xa(n,e){if(n===e)return!0;const t=Gu(n);if(t!==Gu(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return rf(n).isEqual(rf(e));case 3:return function(i,a){if("string"==typeof i.timestampValue&&"string"==typeof a.timestampValue&&i.timestampValue.length===a.timestampValue.length)return i.timestampValue===a.timestampValue;const c=ju(i.timestampValue),p=ju(a.timestampValue);return c.seconds===p.seconds&&c.nanos===p.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return a=e,$u(n.bytesValue).isEqual($u(a.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,a){return sr(i.geoPointValue.latitude)===sr(a.geoPointValue.latitude)&&sr(i.geoPointValue.longitude)===sr(a.geoPointValue.longitude)}(n,e);case 2:return function(i,a){if("integerValue"in i&&"integerValue"in a)return sr(i.integerValue)===sr(a.integerValue);if("doubleValue"in i&&"doubleValue"in a){const c=sr(i.doubleValue),p=sr(a.doubleValue);return c===p?Vp(c)===Vp(p):isNaN(c)&&isNaN(p)}return!1}(n,e);case 9:return Fd(n.arrayValue.values||[],e.arrayValue.values||[],xa);case 10:return function(i,a){const c=i.mapValue.fields||{},p=a.mapValue.fields||{};if(Zv(c)!==Zv(p))return!1;for(const y in c)if(c.hasOwnProperty(y)&&(void 0===p[y]||!xa(c[y],p[y])))return!1;return!0}(n,e);default:return it()}var a}function of(n,e){return void 0!==(n.values||[]).find(t=>xa(t,e))}function Hi(n,e){if(n===e)return 0;const t=Gu(n),i=Gu(e);if(t!==i)return Ct(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ct(n.booleanValue,e.booleanValue);case 2:return function(a,c){const p=sr(a.integerValue||a.doubleValue),y=sr(c.integerValue||c.doubleValue);return p<y?-1:p>y?1:p===y?0:isNaN(p)?isNaN(y)?0:-1:1}(n,e);case 3:return Jv(n.timestampValue,e.timestampValue);case 4:return Jv(rf(n),rf(e));case 5:return Ct(n.stringValue,e.stringValue);case 6:return function(a,c){const p=$u(a),y=$u(c);return p.compareTo(y)}(n.bytesValue,e.bytesValue);case 7:return function(a,c){const p=a.split("/"),y=c.split("/");for(let D=0;D<p.length&&D<y.length;D++){const T=Ct(p[D],y[D]);if(0!==T)return T}return Ct(p.length,y.length)}(n.referenceValue,e.referenceValue);case 8:return function(a,c){const p=Ct(sr(a.latitude),sr(c.latitude));return 0!==p?p:Ct(sr(a.longitude),sr(c.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(a,c){const p=a.values||[],y=c.values||[];for(let D=0;D<p.length&&D<y.length;++D){const T=Hi(p[D],y[D]);if(T)return T}return Ct(p.length,y.length)}(n.arrayValue,e.arrayValue);case 10:return function(a,c){if(a===ll.mapValue&&c===ll.mapValue)return 0;if(a===ll.mapValue)return 1;if(c===ll.mapValue)return-1;const p=a.fields||{},y=Object.keys(p),D=c.fields||{},T=Object.keys(D);y.sort(),T.sort();for(let M=0;M<y.length&&M<T.length;++M){const P=Ct(y[M],T[M]);if(0!==P)return P;const q=Hi(p[y[M]],D[T[M]]);if(0!==q)return q}return Ct(y.length,T.length)}(n.mapValue,e.mapValue);default:throw it()}}function Jv(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ct(n,e);const t=ju(n),i=ju(e),a=Ct(t.seconds,i.seconds);return 0!==a?a:Ct(t.nanos,i.nanos)}function dl(n){return jd(n)}function jd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const a=ju(i);return`time(${a.seconds},${a.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?$u(n.bytesValue).toBase64():"referenceValue"in n?He.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let a="[",c=!0;for(const p of i.values||[])c?c=!1:a+=",",a+=jd(p);return a+"]"}(n.arrayValue):"mapValue"in n?function(i){const a=Object.keys(i.fields||{}).sort();let c="{",p=!0;for(const y of a)p?p=!1:c+=",",c+=`${y}:${jd(i.fields[y])}`;return c+"}"}(n.mapValue):it();var e}function hl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Up(n){return!!n&&"integerValue"in n}function af(n){return!!n&&"arrayValue"in n}function Xv(n){return!!n&&"nullValue"in n}function eI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jp(n){return!!n&&"mapValue"in n}function uf(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return cl(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=uf(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=uf(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Zm(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function iE(n){return"nullValue"in n?Bp:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?hl(Po.empty(),He.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:it()}function tI(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?hl(Po.empty(),He.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?ll:it()}function Ym(n,e){const t=Hi(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function $p(n,e){const t=Hi(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class ri{constructor(e){this.value=e}static empty(){return new ri({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jp(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=uf(t)}setAll(e){let t=Nn.emptyPath(),i={},a=[];e.forEach((p,y)=>{if(!t.isImmediateParentOf(y)){const D=this.getFieldsMap(t);this.applyChanges(D,i,a),i={},a=[],t=y.popLast()}p?i[y.lastSegment()]=uf(p):a.push(y.lastSegment())});const c=this.getFieldsMap(t);this.applyChanges(c,i,a)}delete(e){const t=this.field(e.popLast());jp(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return xa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let a=t.mapValue.fields[e.get(i)];jp(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=a),t=a}return t.mapValue.fields}applyChanges(e,t,i){cl(t,(a,c)=>e[a]=c);for(const a of i)delete e[a]}clone(){return new ri(uf(this.value))}}function Hp(n){const e=[];return cl(n.fields,(t,i)=>{const a=new Nn([t]);if(jp(i)){const c=Hp(i.mapValue).fields;if(0===c.length)e.push(a);else for(const p of c)e.push(a.child(p))}else e.push(a)}),new Si(e)}class _n{constructor(e,t,i,a,c,p){this.key=e,this.documentType=t,this.version=i,this.readTime=a,this.data=c,this.documentState=p}static newInvalidDocument(e){return new _n(e,0,Et.min(),Et.min(),ri.empty(),0)}static newFoundDocument(e,t,i){return new _n(e,1,t,Et.min(),i,0)}static newNoDocument(e,t){return new _n(e,2,t,Et.min(),ri.empty(),0)}static newUnknownDocument(e,t){return new _n(e,3,t,Et.min(),ri.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ri.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ri.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Et.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof _n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _n(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ib{constructor(e,t=null,i=[],a=[],c=null,p=null,y=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=a,this.limit=c,this.startAt=p,this.endAt=y,this.ht=null}}function fl(n,e=null,t=[],i=[],a=null,c=null,p=null){return new Ib(n,e,t,i,a,c,p)}function pl(n){const e=Ke(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(a=i).field.canonicalString()+a.op.toString()+dl(a.value);var a}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(a=i).field.canonicalString()+a.dir;var a}).join(","),sf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>dl(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>dl(i)).join(",")),e.ht=t}return e.ht}function zu(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let a=0;a<n.orderBy.length;a++)if(!Xm(n.orderBy[a],e.orderBy[a]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let a=0;a<n.filters.length;a++)if((t=n.filters[a]).op!==(i=e.filters[a]).op||!t.field.isEqual(i.field)||!xa(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!oI(n.startAt,e.startAt)&&oI(n.endAt,e.endAt)}function Ai(n){return He.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function cf(n,e){return n.filters.filter(t=>t instanceof Cn&&t.field.isEqual(e))}function rI(n,e,t){let i=Bp,a=!0;for(const c of cf(n,e)){let p=Bp,y=!0;switch(c.op){case"<":case"<=":p=iE(c.value);break;case"==":case"in":case">=":p=c.value;break;case">":p=c.value,y=!1;break;case"!=":case"not-in":p=Bp}Ym({value:i,inclusive:a},{value:p,inclusive:y})<0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];Ym({value:i,inclusive:a},{value:p,inclusive:t.inclusive})<0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}function Gp(n,e,t){let i=ll,a=!0;for(const c of cf(n,e)){let p=ll,y=!0;switch(c.op){case">=":case">":p=tI(c.value),y=!1;break;case"==":case"in":case"<=":p=c.value;break;case"<":p=c.value,y=!1;break;case"!=":case"not-in":p=ll}$p({value:i,inclusive:a},{value:p,inclusive:y})>0&&(i=p,a=y)}if(null!==t)for(let c=0;c<n.orderBy.length;++c)if(n.orderBy[c].field.isEqual(e)){const p=t.position[c];$p({value:i,inclusive:a},{value:p,inclusive:t.inclusive})>0&&(i=p,a=t.inclusive);break}return{value:i,inclusive:a}}class Cn extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new Qm(e,t,i):"array-contains"===t?new sI(e,i):"in"===t?new wb(e,i):"not-in"===t?new zp(e,i):"array-contains-any"===t?new Wp(e,i):new Cn(e,t,i)}static lt(e,t,i){return"in"===t?new iI(e,i):new Jm(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Hi(t,this.value)):null!==t&&Gu(this.value)===Gu(t)&&this.ft(Hi(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return it()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Qm extends Cn{constructor(e,t,i){super(e,t,i),this.key=He.fromName(i.referenceValue)}matches(e){const t=He.comparator(e.key,this.key);return this.ft(t)}}class iI extends Cn{constructor(e,t){super(e,"in",t),this.keys=sE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jm extends Cn{constructor(e,t){super(e,"not-in",t),this.keys=sE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function sE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>He.fromName(i.referenceValue))}class sI extends Cn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return af(t)&&of(t.arrayValue,this.value)}}class wb extends Cn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&of(this.value.arrayValue,t)}}class zp extends Cn{constructor(e,t){super(e,"not-in",t)}matches(e){if(of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!of(this.value.arrayValue,t)}}class Wp extends Cn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!af(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>of(this.value.arrayValue,i))}}class Oo{constructor(e,t){this.position=e,this.inclusive=t}}class Wu{constructor(e,t="asc"){this.field=e,this.dir=t}}function Xm(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function oE(n,e,t){let i=0;for(let a=0;a<n.position.length;a++){const c=e[a],p=n.position[a];if(i=c.field.isKeyField()?He.comparator(He.fromName(p.referenceValue),t.key):Hi(p,t.data.field(c.field)),"desc"===c.dir&&(i*=-1),0!==i)break}return i}function oI(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!xa(n.position[t],e.position[t]))return!1;return!0}class Ma{constructor(e,t=null,i=[],a=[],c=null,p="F",y=null,D=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=a,this.limit=c,this.limitType=p,this.startAt=y,this.endAt=D,this._t=null,this.wt=null}}function aI(n,e,t,i,a,c,p,y){return new Ma(n,e,t,i,a,c,p,y)}function $d(n){return new Ma(n)}function ey(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function uI(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function ty(n){for(const e of n.filters)if(e.dt())return e.field;return null}function cI(n){return null!==n.collectionGroup}function gl(n){const e=Ke(n);if(null===e._t){e._t=[];const t=ty(e),i=uI(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new Wu(t)),e._t.push(new Wu(Nn.keyField(),"asc"));else{let a=!1;for(const c of e.explicitOrderBy)e._t.push(c),c.field.isKeyField()&&(a=!0);if(!a){const c=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Wu(Nn.keyField(),c))}}}return e._t}function ii(n){const e=Ke(n);if(!e.wt)if("F"===e.limitType)e.wt=fl(e.path,e.collectionGroup,gl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const c of gl(e))t.push(new Wu(c.field,"desc"===c.dir?"asc":"desc"));const i=e.endAt?new Oo(e.endAt.position,e.endAt.inclusive):null,a=e.startAt?new Oo(e.startAt.position,e.startAt.inclusive):null;e.wt=fl(e.path,e.collectionGroup,t,e.filters,e.limit,i,a)}return e.wt}function qp(n,e,t){return new Ma(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ml(n,e){return zu(ii(n),ii(e))&&n.limitType===e.limitType}function aE(n){return`${pl(ii(n))}|lt:${n.limitType}`}function lI(n){return`Query(target=${function nI(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${dl(i.value)}`;var i}).join(", ")}]`),sf(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>dl(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>dl(t)).join(",")),`Target(${e})`}(ii(n))}; limitType=${n.limitType})`}function dI(n,e){return e.isFoundDocument()&&function(t,i){const a=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(a):He.isDocumentKey(t.path)?t.path.isEqual(a):t.path.isImmediateParentOf(a)}(n,e)&&function(t,i){for(const a of t.explicitOrderBy)if(!a.field.isKeyField()&&null===i.data.field(a.field))return!1;return!0}(n,e)&&function(t,i){for(const a of t.filters)if(!a.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(a,c,p){const y=oE(a,c,p);return a.inclusive?y<=0:y<0}(t.startAt,gl(t),i)||t.endAt&&!function(a,c,p){const y=oE(a,c,p);return a.inclusive?y>=0:y>0}(t.endAt,gl(t),i)));var t,i}function uE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function cE(n){return(e,t)=>{let i=!1;for(const a of gl(n)){const c=Eb(a,e,t);if(0!==c)return c;i=i||a.field.isKeyField()}return 0}}function Eb(n,e,t){const i=n.field.isKeyField()?He.comparator(e.key,t.key):function(a,c,p){const y=c.data.field(a),D=p.data.field(a);return null!==y&&null!==D?Hi(y,D):it()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return it()}}function lE(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vp(e)?"-0":e}}function dE(n){return{integerValue:""+n}}function hE(n,e){return rE(e)?dE(e):lE(n,e)}class ny{constructor(){this._=void 0}}function qu(n,e,t){return n instanceof yl?function(i,a){const c={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return a&&(c.fields.__previous_value__=a),{mapValue:c}}(t,e):n instanceof Na?iy(n,e):n instanceof Ra?fI(n,e):function(i,a){const c=hI(i,a),p=sy(c)+sy(i.yt);return Up(c)&&Up(i.yt)?dE(p):lE(i.It,p)}(n,e)}function ry(n,e,t){return n instanceof Na?iy(n,e):n instanceof Ra?fI(n,e):t}function hI(n,e){return n instanceof Gi?Up(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class yl extends ny{}class Na extends ny{constructor(e){super(),this.elements=e}}function iy(n,e){const t=pI(e);for(const i of n.elements)t.some(a=>xa(a,i))||t.push(i);return{arrayValue:{values:t}}}class Ra extends ny{constructor(e){super(),this.elements=e}}function fI(n,e){let t=pI(e);for(const i of n.elements)t=t.filter(a=>!xa(a,i));return{arrayValue:{values:t}}}class Gi extends ny{constructor(e,t){super(),this.It=e,this.yt=t}}function sy(n){return sr(n.integerValue||n.doubleValue)}function pI(n){return af(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class lf{constructor(e,t){this.field=e,this.transform=t}}class fE{constructor(e,t){this.version=e,this.transformResults=t}}class Rn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Rn}static exists(e){return new Rn(void 0,e)}static updateTime(e){return new Rn(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _l(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class ka{}function Kp(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Gd(n.key,Rn.none()):new Il(n.key,n.data,Rn.none());{const t=n.data,i=ri.empty();let a=new an(Nn.comparator);for(let c of e.fields)if(!a.has(c)){let p=t.field(c);null===p&&c.length>1&&(c=c.popLast(),p=t.field(c)),null===p?i.delete(c):i.set(c,p),a=a.add(c)}return new Zs(n.key,i,new Si(a.toArray()),Rn.none())}}function Hd(n,e,t){n instanceof Il?function(i,a,c){const p=i.value.clone(),y=ay(i.fieldTransforms,a,c.transformResults);p.setAll(y),a.convertToFoundDocument(c.version,p).setHasCommittedMutations()}(n,e,t):n instanceof Zs?function(i,a,c){if(!_l(i.precondition,a))return void a.convertToUnknownDocument(c.version);const p=ay(i.fieldTransforms,a,c.transformResults),y=a.data;y.setAll(Yp(i)),y.setAll(p),a.convertToFoundDocument(c.version,y).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function vl(n,e,t,i){return n instanceof Il?function(a,c,p,y){if(!_l(a.precondition,c))return p;const D=a.value.clone(),T=Qp(a.fieldTransforms,y,c);return D.setAll(T),c.convertToFoundDocument(c.version,D).setHasLocalMutations(),null}(n,e,t,i):n instanceof Zs?function(a,c,p,y){if(!_l(a.precondition,c))return p;const D=Qp(a.fieldTransforms,y,c),T=c.data;return T.setAll(Yp(a)),T.setAll(D),c.convertToFoundDocument(c.version,T).setHasLocalMutations(),null===p?null:p.unionWith(a.fieldMask.fields).unionWith(a.fieldTransforms.map(M=>M.field))}(n,e,t,i):(p=t,_l(n.precondition,c=e)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):p);var c,p}function Zp(n,e){let t=null;for(const i of n.fieldTransforms){const a=e.data.field(i.field),c=hI(i.transform,a||null);null!=c&&(null===t&&(t=ri.empty()),t.set(i.field,c))}return t||null}function oy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Fd(t,i,(a,c)=>function gI(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof Na&&i instanceof Na||t instanceof Ra&&i instanceof Ra?Fd(t.elements,i.elements,xa):t instanceof Gi&&i instanceof Gi?xa(t.yt,i.yt):t instanceof yl&&i instanceof yl);var t,i}(a,c))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Il extends ka{constructor(e,t,i,a=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class Zs extends ka{constructor(e,t,i,a,c=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function Yp(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ay(n,e,t){const i=new Map;It(n.length===t.length);for(let a=0;a<t.length;a++){const c=n[a],p=c.transform,y=e.data.field(c.field);i.set(c.field,ry(p,y,t[a]))}return i}function Qp(n,e,t){const i=new Map;for(const a of n){const c=a.transform,p=t.data.field(a.field);i.set(a.field,qu(c,p,e))}return i}class Gd extends ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mI extends ka{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pE{constructor(e){this.count=e}}var or,Qt;function uy(n){switch(n){default:return it();case oe.CANCELLED:case oe.UNKNOWN:case oe.DEADLINE_EXCEEDED:case oe.RESOURCE_EXHAUSTED:case oe.INTERNAL:case oe.UNAVAILABLE:case oe.UNAUTHENTICATED:return!1;case oe.INVALID_ARGUMENT:case oe.NOT_FOUND:case oe.ALREADY_EXISTS:case oe.PERMISSION_DENIED:case oe.FAILED_PRECONDITION:case oe.ABORTED:case oe.OUT_OF_RANGE:case oe.UNIMPLEMENTED:case oe.DATA_LOSS:return!0}}function cy(n){if(void 0===n)return yn("GRPC error has no .code"),oe.UNKNOWN;switch(n){case or.OK:return oe.OK;case or.CANCELLED:return oe.CANCELLED;case or.UNKNOWN:return oe.UNKNOWN;case or.DEADLINE_EXCEEDED:return oe.DEADLINE_EXCEEDED;case or.RESOURCE_EXHAUSTED:return oe.RESOURCE_EXHAUSTED;case or.INTERNAL:return oe.INTERNAL;case or.UNAVAILABLE:return oe.UNAVAILABLE;case or.UNAUTHENTICATED:return oe.UNAUTHENTICATED;case or.INVALID_ARGUMENT:return oe.INVALID_ARGUMENT;case or.NOT_FOUND:return oe.NOT_FOUND;case or.ALREADY_EXISTS:return oe.ALREADY_EXISTS;case or.PERMISSION_DENIED:return oe.PERMISSION_DENIED;case or.FAILED_PRECONDITION:return oe.FAILED_PRECONDITION;case or.ABORTED:return oe.ABORTED;case or.OUT_OF_RANGE:return oe.OUT_OF_RANGE;case or.UNIMPLEMENTED:return oe.UNIMPLEMENTED;case or.DATA_LOSS:return oe.DATA_LOSS;default:return it()}}(Qt=or||(or={}))[Qt.OK=0]="OK",Qt[Qt.CANCELLED=1]="CANCELLED",Qt[Qt.UNKNOWN=2]="UNKNOWN",Qt[Qt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qt[Qt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qt[Qt.NOT_FOUND=5]="NOT_FOUND",Qt[Qt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qt[Qt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qt[Qt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qt[Qt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qt[Qt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qt[Qt.ABORTED=10]="ABORTED",Qt[Qt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qt[Qt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qt[Qt.INTERNAL=13]="INTERNAL",Qt[Qt.UNAVAILABLE=14]="UNAVAILABLE",Qt[Qt.DATA_LOSS=15]="DATA_LOSS";class Ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[a,c]of i)if(this.equalsFn(a,e))return c}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),a=this.inner[i];if(void 0===a)return this.inner[i]=[[e,t]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,t]);a.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return 1===i.length?delete this.inner[t]:i.splice(a,1),this.innerSize--,!0;return!1}forEach(e){cl(this.inner,(t,i)=>{for(const[a,c]of i)e(a,c)})}isEmpty(){return Yv(this.inner)}size(){return this.innerSize}}const zi=new st(He.comparator);function yi(){return zi}const yI=new st(He.comparator);function Jp(...n){let e=yI;for(const t of n)e=e.insert(t.key,t);return e}function _I(n){let e=yI;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Is(){return df()}function ly(){return df()}function df(){return new Ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const gE=new st(He.comparator),mE=new an(He.comparator);function kt(...n){let e=mE;for(const t of n)e=e.add(t);return e}const yE=new an(Ct);function hf(){return yE}class ff{constructor(e,t,i,a,c){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const a=new Map;return a.set(e,pf.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ff(Et.min(),a,hf(),yi(),kt())}}class pf{constructor(e,t,i,a,c){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new pf(i,t,kt(),kt(),kt())}}class gf{constructor(e,t,i,a){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=a}}class dy{constructor(e,t){this.targetId=e,this.At=t}}class vI{constructor(e,t,i=pr.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=a}}class Ys{constructor(){this.Rt=0,this.bt=wI(),this.Pt=pr.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=kt(),t=kt(),i=kt();return this.bt.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:t=t.add(a);break;case 1:i=i.add(a);break;default:it()}}),new pf(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=wI()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class hy{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=yi(),this.qt=II(),this.Kt=new an(Ct)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:it()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,a)=>{this.Ht(a)&&t(a)})}Yt(e){const t=e.targetId,i=e.At.count,a=this.Xt(t);if(a){const c=a.target;if(Ai(c))if(0===i){const p=new He(c.path);this.jt(t,p,_n.newNoDocument(p,Et.min()))}else It(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((c,p)=>{const y=this.Xt(p);if(y){if(c.current&&Ai(y.target)){const D=new He(y.target.path);null!==this.Ut.get(D)||this.ee(p,D)||this.jt(p,D,_n.newNoDocument(D,e))}c.Dt&&(t.set(p,c.xt()),c.Nt())}});let i=kt();this.qt.forEach((c,p)=>{let y=!0;p.forEachWhile(D=>{const T=this.Xt(D);return!T||2===T.purpose||(y=!1,!1)}),y&&(i=i.add(c))}),this.Ut.forEach((c,p)=>p.setReadTime(e));const a=new ff(e,t,this.Kt,this.Ut,i);return this.Ut=yi(),this.qt=II(),this.Kt=new an(Ct),a}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const a=this.zt(e);this.ee(e,t)?a.kt(t,1):a.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Ys,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new an(Ct),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||Ne("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Ys),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function II(){return new st(He.comparator)}function wI(){return new st(He.comparator)}const Db={asc:"ASCENDING",desc:"DESCENDING"},EI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class _E{constructor(e,t){this.databaseId=e,this.gt=t}}function mf(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DI(n,e){return n.gt?e.toBase64():e.toUint8Array()}function fy(n,e){return mf(n,e.toTimestamp())}function kr(n){return It(!!n),Et.fromTimestamp(function(e){const t=ju(e);return new pn(t.seconds,t.nanos)}(n))}function py(n,e){return(t=n,new Kt(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function yf(n){const e=Kt.fromString(n);return It(AI(e)),e}function wl(n,e){return py(n.databaseId,e.path)}function Wi(n,e){const t=yf(e);if(t.get(1)!==n.databaseId.projectId)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Ce(oe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new He(gy(t))}function bI(n,e){return py(n.databaseId,e)}function Xp(n){const e=yf(n);return 4===e.length?Kt.emptyPath():gy(e)}function eg(n){return new Kt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gy(n){return It(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function my(n,e,t){return{name:wl(n,e),fields:t.value.mapValue.fields}}function yy(n,e,t){const i=Wi(n,e.name),a=kr(e.updateTime),c=new ri({mapValue:{fields:e.fields}}),p=_n.newFoundDocument(i,a,c);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function qi(n,e){let t;if(e instanceof Il)t={update:my(n,e.key,e.value)};else if(e instanceof Gd)t={delete:wl(n,e.key)};else if(e instanceof Zs)t={update:my(n,e.key,e.data),updateMask:wE(e.fieldMask)};else{if(!(e instanceof mI))return it();t={verify:wl(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(a,c){const p=c.transform;if(p instanceof yl)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof Na)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof Ra)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof Gi)return{fieldPath:c.field.canonicalString(),increment:p.yt};throw it()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(a=e.precondition).updateTime?{updateTime:fy(n,a.updateTime)}:void 0!==a.exists?{exists:a.exists}:it()),t;var a}function zd(n,e){const t=e.currentDocument?void 0!==(a=e.currentDocument).updateTime?Rn.updateTime(kr(a.updateTime)):void 0!==a.exists?Rn.exists(a.exists):Rn.none():Rn.none(),i=e.updateTransforms?e.updateTransforms.map(a=>function(c,p){let y=null;"setToServerValue"in p?(It("REQUEST_TIME"===p.setToServerValue),y=new yl):"appendMissingElements"in p?y=new Na(p.appendMissingElements.values||[]):"removeAllFromArray"in p?y=new Ra(p.removeAllFromArray.values||[]):"increment"in p?y=new Gi(c,p.increment):it();const D=Nn.fromServerFormat(p.fieldPath);return new lf(D,y)}(n,a)):[];var a;if(e.update){const a=Wi(n,e.update.name),c=new ri({mapValue:{fields:e.update.fields}});if(e.updateMask){const p=new Si((e.updateMask.fieldPaths||[]).map(T=>Nn.fromServerFormat(T)));return new Zs(a,c,p,t,i)}return new Il(a,c,t,i)}if(e.delete){const a=Wi(n,e.delete);return new Gd(a,t)}if(e.verify){const a=Wi(n,e.verify);return new mI(a,t)}return it()}function Wd(n,e){return{documents:[bI(n,e.path)]}}function vy(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=bI(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=bI(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const a=function(D){if(0===D.length)return;const T=D.map(M=>function(P){if("=="===P.op){if(eI(P.value))return{unaryFilter:{field:qd(P.field),op:"IS_NAN"}};if(Xv(P.value))return{unaryFilter:{field:qd(P.field),op:"IS_NULL"}}}else if("!="===P.op){if(eI(P.value))return{unaryFilter:{field:qd(P.field),op:"IS_NOT_NAN"}};if(Xv(P.value))return{unaryFilter:{field:qd(P.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qd(P.field),op:_f(P.op),value:P.value}}}(M));return 1===T.length?T[0]:{compositeFilter:{op:"AND",filters:T}}}(e.filters);a&&(t.structuredQuery.where=a);const c=function(D){if(0!==D.length)return D.map(T=>{return{field:qd((M=T).field),direction:vE(M.dir)};var M})}(e.orderBy);c&&(t.structuredQuery.orderBy=c);const p=(T=e.limit,n.gt||sf(T)?T:{value:T});var T,y,D;return null!==p&&(t.structuredQuery.limit=p),e.startAt&&(t.structuredQuery.startAt={before:(y=e.startAt).inclusive,values:y.position}),e.endAt&&(t.structuredQuery.endAt={before:!(D=e.endAt).inclusive,values:D.position}),t}function ng(n){let e=Xp(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let a=null;if(i>0){It(1===i);const M=t.from[0];M.allDescendants?a=M.collectionId:e=e.child(M.collectionId)}let c=[];t.where&&(c=SI(t.where));let p=[];t.orderBy&&(p=t.orderBy.map(M=>{return new Wu(vf((P=M).field),function(q){switch(q){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(P.direction));var P}));let y=null;t.limit&&(y=function(M){let P;return P="object"==typeof M?M.value:M,sf(P)?null:P}(t.limit));let D=null;var M;t.startAt&&(D=new Oo((M=t.startAt).values||[],!!M.before));let T=null;return t.endAt&&(T=function(M){return new Oo(M.values||[],!M.before)}(t.endAt)),aI(e,a,p,c,y,"F",D,T)}function SI(n){return n?void 0!==n.unaryFilter?[bb(n)]:void 0!==n.fieldFilter?[IE(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>SI(e)).reduce((e,t)=>e.concat(t)):it():[]}function vE(n){return Db[n]}function _f(n){return EI[n]}function qd(n){return{fieldPath:n.canonicalString()}}function vf(n){return Nn.fromServerFormat(n.fieldPath)}function IE(n){return Cn.create(vf(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return it()}}(n.fieldFilter.op),n.fieldFilter.value)}function bb(n){switch(n.unaryFilter.op){case"IS_NAN":const e=vf(n.unaryFilter.field);return Cn.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=vf(n.unaryFilter.field);return Cn.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=vf(n.unaryFilter.field);return Cn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=vf(n.unaryFilter.field);return Cn.create(a,"!=",{nullValue:"NULL_VALUE"});default:return it()}}function wE(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function AI(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Iy(e)),e=xI(n.get(t),e);return Iy(e)}function xI(n,e){let t=e;const i=n.length;for(let a=0;a<i;a++){const c=n.charAt(a);switch(c){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=c}}return t}function Iy(n){return n+"\x01\x01"}function Lo(n){const e=n.length;if(It(e>=2),2===e)return It("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),Kt.emptyPath();const t=e-2,i=[];let a="";for(let c=0;c<e;){const p=n.indexOf("\x01",c);switch((p<0||p>t)&&it(),n.charAt(p+1)){case"\x01":const y=n.substring(c,p);let D;0===a.length?D=y:(a+=y,D=a,a=""),i.push(D);break;case"\x10":a+=n.substring(c,p),a+="\0";break;case"\x11":a+=n.substring(c,p+1);break;default:it()}c=p+2}return new Kt(i)}const rg=["userId","batchId"];function ig(n,e){return[n,_i(e)]}function MI(n,e,t){return[n,_i(e),t]}const EE={},DE=["prefixPath","collectionGroup","readTime","documentId"],bE=["prefixPath","collectionGroup","documentId"],TE=["collectionGroup","readTime","prefixPath","documentId"],sg=["canonicalId","targetId"],El=["targetId","path"],Tb=["path","targetId"],If=["collectionId","parent"],CE=["indexId","uid"],SE=["uid","sequenceNumber"],wy=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],AE=["indexId","uid","orderedDocumentKey"],Fo=["userId","collectionPath","documentId"],wf=["userId","collectionPath","largestBatchId"],si=["userId","collectionGroup","largestBatchId"],Zu=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],og=[...Zu,"documentOverlays"],Ki=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Ey=Ki,Kd=[...Ey,"indexConfiguration","indexState","indexEntries"];class Yu extends Op{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function jn(n,e){const t=Ke(n);return vs.M(t.ie,e)}class Qu{constructor(e,t,i,a){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=a}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&Hd(c,e,i[a])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=vl(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=vl(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=ly();return this.mutations.forEach(a=>{const c=e.get(a.key),p=c.overlayedDocument;let y=this.applyToLocalView(p,c.mutatedFields);y=t.has(a.key)?null:y;const D=Kp(p,y);null!==D&&i.set(a.key,D),p.isValidDocument()||p.convertToNoDocument(Et.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kt())}isEqual(e){return this.batchId===e.batchId&&Fd(this.mutations,e.mutations,(t,i)=>oy(t,i))&&Fd(this.baseMutations,e.baseMutations,(t,i)=>oy(t,i))}}class Ju{constructor(e,t,i,a){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=a}static from(e,t,i){It(e.mutations.length===i.length);let a=gE;const c=e.mutations;for(let p=0;p<c.length;p++)a=a.insert(c[p].key,i[p].version);return new Ju(e,t,i,a)}}class Xu{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Zi{constructor(e,t,i,a,c=Et.min(),p=Et.min(),y=pr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=p,this.resumeToken=y}withSequenceNumber(e){return new Zi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Zi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Dl{constructor(e){this.re=e}}function Dy(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Ef(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:wl(a=n.re,(c=e).key),fields:c.data.value.mapValue.fields,updateTime:mf(a,c.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:ec(e.version)};else{if(!e.isUnknownDocument())return it();i.unknownDocument={path:t.path.toArray(),version:ec(e.version)}}var a,c;return i}function Ef(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function ec(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tc(n){const e=new pn(n.seconds,n.nanoseconds);return Et.fromTimestamp(e)}function nc(n,e){const t=(e.baseMutations||[]).map(c=>zd(n.re,c));for(let c=0;c<e.mutations.length-1;++c){const p=e.mutations[c];c+1<e.mutations.length&&void 0!==e.mutations[c+1].transform&&(p.updateTransforms=e.mutations[c+1].transform.fieldTransforms,e.mutations.splice(c+1,1),++c)}const i=e.mutations.map(c=>zd(n.re,c)),a=pn.fromMillis(e.localWriteTimeMs);return new Qu(e.batchId,a,t,i)}function Yd(n){const e=tc(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tc(n.lastLimboFreeSnapshotVersion):Et.min();let i;var a;return void 0!==n.query.documents?(It(1===(a=n.query).documents.length),i=ii($d(Xp(a.documents[0])))):i=ii(ng(n.query)),new Zi(i,n.targetId,0,n.lastListenSequenceNumber,e,t,pr.fromBase64String(n.resumeToken))}function by(n,e){const t=ec(e.snapshotVersion),i=ec(e.lastLimboFreeSnapshotVersion);let a;a=Ai(e.target)?Wd(n.re,e.target):vy(n.re,e.target);const c=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:pl(e.target),readTime:t,resumeToken:c,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:a}}function ag(n){const e=ng({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?qp(e,e.limit,"L"):e}function ug(n,e){return new Xu(e.largestBatchId,zd(n.re,e.overlayMutation))}function NI(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}function RI(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:ec(i.readTime),documentKey:_i(i.documentKey.path),largestBatchId:i.largestBatchId}}class kI{getBundleMetadata(e,t){return PI(e).get(t).next(i=>{if(i)return{id:(a=i).bundleId,createTime:tc(a.createTime),version:a.version};var a})}saveBundleMetadata(e,t){return PI(e).put({bundleId:(i=t).id,createTime:ec(kr(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return Ty(e).get(t).next(i=>{if(i)return{name:(a=i).name,query:ag(a.bundledQuery),readTime:tc(a.readTime)};var a})}saveNamedQuery(e,t){return Ty(e).put({name:(i=t).name,readTime:ec(kr(i.readTime)),bundledQuery:i.bundledQuery});var i}}function PI(n){return jn(n,"bundles")}function Ty(n){return jn(n,"namedQueries")}class Qd{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Qd(e,t.uid||"")}getOverlay(e,t){return bl(e).get(NI(this.userId,t)).next(i=>i?ug(this.It,i):null)}getOverlays(e,t){const i=Is();return re.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){const a=[];return i.forEach((c,p)=>{const y=new Xu(t,p);a.push(this.ue(e,y))}),re.waitFor(a)}removeOverlaysForBatchId(e,t,i){const a=new Set;t.forEach(p=>a.add(_i(p.getCollectionPath())));const c=[];return a.forEach(p=>{const y=IDBKeyRange.bound([this.userId,p,i],[this.userId,p,i+1],!1,!0);c.push(bl(e).Y("collectionPathOverlayIndex",y))}),re.waitFor(c)}getOverlaysForCollection(e,t,i){const a=Is(),c=_i(t),p=IDBKeyRange.bound([this.userId,c,i],[this.userId,c,Number.POSITIVE_INFINITY],!0);return bl(e).W("collectionPathOverlayIndex",p).next(y=>{for(const D of y){const T=ug(this.It,D);a.set(T.getKey(),T)}return a})}getOverlaysForCollectionGroup(e,t,i,a){const c=Is();let p;const y=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return bl(e).Z({index:"collectionGroupOverlayIndex",range:y},(D,T,M)=>{const P=ug(this.It,T);c.size()<a||P.largestBatchId===p?(c.set(P.getKey(),P),p=P.largestBatchId):M.done()}).next(()=>c)}ue(e,t){return bl(e).put(function(i,a,c){const[p,y,D]=NI(a,c.mutation.key);return{userId:a,collectionPath:y,documentId:D,collectionGroup:c.mutation.key.getCollectionGroup(),largestBatchId:c.largestBatchId,overlayMutation:qi(i.re,c.mutation)}}(this.It,this.userId,t))}}function bl(n){return jn(n,"documentOverlays")}class Tl{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(sr(e.integerValue));else if("doubleValue"in e){const i=sr(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),Vp(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me($u(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Zm(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):it()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const a of Object.keys(i))this._e(a,t),this.ae(i[a],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const a of i)this.ae(a,t)}ge(e,t){this.le(t,37),He.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function cg(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Df(n){const e=64-function(t){let i=0;for(let a=0;a<8;++a){const c=cg(255&t[a]);if(i+=c,8!==c)break}return i}(n);return Math.ceil(e/8)}Tl.Te=new Tl;class Cy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const a=t.codePointAt(0);this.Ae(240|a>>>18),this.Ae(128|63&a>>>12),this.Ae(128|63&a>>>6),this.Ae(128|63&a)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const a=t.codePointAt(0);this.Pe(240|a>>>18),this.Pe(128|63&a>>>12),this.Pe(128|63&a>>>6),this.Pe(128|63&a)}}this.ve()}De(e){const t=this.Ce(e),i=Df(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=255&t[a]}Ne(e){const t=this.Ce(e),i=Df(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let a=t.length-i;a<t.length;++a)this.buffer[this.position++]=~(255&t[a])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(a){const c=new DataView(new ArrayBuffer(8));return c.setFloat64(0,a,!1),new Uint8Array(c.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let a=1;a<t.length;++a)t[a]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const a=new Uint8Array(i);a.set(this.buffer),this.buffer=a}}class xE{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Sy{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Cl{constructor(){this.Be=new Cy,this.Le=new xE(this.Be),this.Ue=new Sy(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class rc{constructor(e,t,i,a){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=a}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new rc(this.indexId,this.documentKey,this.arrayValue,i)}}function ic(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=lg(n.arrayValue,e.arrayValue),0!==t?t:(t=lg(n.directionalValue,e.directionalValue),0!==t?t:He.comparator(n.documentKey,e.documentKey)))}function lg(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class OI{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=Bd(e);if(void 0!==t&&!this.ze(t))return!1;const i=Bu(e);let a=0,c=0;for(;a<i.length&&this.ze(i[a]);++a);if(a===i.length)return!0;if(void 0!==this.je){const p=i[a];if(!this.He(this.je,p)||!this.Je(this.Ge[c++],p))return!1;++a}for(;a<i.length;++a){const p=i[a];if(c>=this.Ge.length||!this.Je(this.Ge[c++],p))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class ME{constructor(){this.Ye=new bf}addToCollectionParentIndex(e,t){return this.Ye.add(t),re.resolve()}getCollectionParents(e,t){return re.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return re.resolve()}deleteFieldIndex(e,t){return re.resolve()}getDocumentsMatchingTarget(e,t){return re.resolve(null)}getIndexType(e,t){return re.resolve(0)}getFieldIndexes(e,t){return re.resolve([])}getNextCollectionGroupToUpdate(e){return re.resolve(null)}getMinOffset(e,t){return re.resolve($i.min())}getMinOffsetFromCollectionGroup(e,t){return re.resolve($i.min())}updateCollectionGroup(e,t,i){return re.resolve()}updateIndexEntries(e,t){return re.resolve()}}class bf{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t]||new an(Kt.comparator),c=!a.has(i);return this.index[t]=a.add(i),c}has(e){const t=e.lastSegment(),i=e.popLast(),a=this.index[t];return a&&a.has(i)}getEntries(e){return(this.index[e]||new an(Kt.comparator)).toArray()}}const Tf=new Uint8Array(0);class NE{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new bf,this.Ze=new Ku(i=>pl(i),(i,a)=>zu(i,a)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),a=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const c={collectionId:i,parent:_i(a)};return Ay(e).put(c)}return re.resolve()}getCollectionParents(e,t){const i=[],a=IDBKeyRange.bound([t,""],[Yw(t),""],!1,!0);return Ay(e).W(a).next(c=>{for(const p of c){if(p.collectionId!==t)break;i.push(Lo(p.parent))}return i})}addFieldIndex(e,t){const i=Cf(e),a={indexId:(p=t).indexId,collectionGroup:p.collectionGroup,fields:p.fields.map(y=>[y.fieldPath.canonicalString(),y.kind])};var p;delete a.indexId;const c=i.add(a);if(t.indexState){const p=Xd(e);return c.next(y=>{p.put(RI(y,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return c.next()}deleteFieldIndex(e,t){const i=Cf(e),a=Xd(e),c=Jd(e);return i.delete(t.indexId).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=Jd(e);let a=!0;const c=new Map;return re.forEach(this.tn(t),p=>this.en(e,p).next(y=>{a&&(a=!!y),c.set(p,y)})).next(()=>{if(a){let p=kt();const y=[];return re.forEach(c,(D,T)=>{var M;Ne("IndexedDbIndexManager",`Using index ${M=D,`id=${M.indexId}|cg=${M.collectionGroup}|f=${M.fields.map(Lt=>`${Lt.fieldPath}:${Lt.kind}`).join(",")}`} to execute ${pl(t)}`);const P=function(Lt,Pt){const Nt=Bd(Pt);if(void 0===Nt)return null;for(const Ut of cf(Lt,Nt.fieldPath))switch(Ut.op){case"array-contains-any":return Ut.value.arrayValue.values||[];case"array-contains":return[Ut.value]}return null}(T,D),q=function(Lt,Pt){const Nt=new Map;for(const Ut of Bu(Pt))for(const qr of cf(Lt,Ut.fieldPath))switch(qr.op){case"==":case"in":Nt.set(Ut.fieldPath.canonicalString(),qr.value);break;case"not-in":case"!=":return Nt.set(Ut.fieldPath.canonicalString(),qr.value),Array.from(Nt.values())}return null}(T,D),te=function(Lt,Pt){const Nt=[];let Ut=!0;for(const qr of Bu(Pt)){const gv=0===qr.kind?rI(Lt,qr.fieldPath,Lt.startAt):Gp(Lt,qr.fieldPath,Lt.startAt);Nt.push(gv.value),Ut&&(Ut=gv.inclusive)}return new Oo(Nt,Ut)}(T,D),ue=function(Lt,Pt){const Nt=[];let Ut=!0;for(const qr of Bu(Pt)){const gv=0===qr.kind?Gp(Lt,qr.fieldPath,Lt.endAt):rI(Lt,qr.fieldPath,Lt.endAt);Nt.push(gv.value),Ut&&(Ut=gv.inclusive)}return new Oo(Nt,Ut)}(T,D),Fe=this.nn(D,T,te),Be=this.nn(D,T,ue),Mt=this.sn(D,T,q),Bt=this.rn(D.indexId,P,Fe,te.inclusive,Be,ue.inclusive,Mt);return re.forEach(Bt,Lt=>i.J(Lt,t.limit).next(Pt=>{Pt.forEach(Nt=>{const Ut=He.fromSegments(Nt.documentKey);p.has(Ut)||(p=p.add(Ut),y.push(Ut))})}))}).next(()=>y)}return re.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,a,c,p,y){const D=(null!=t?t.length:1)*Math.max(i.length,c.length),T=D/(null!=t?t.length:1),M=[];for(let P=0;P<D;++P){const q=t?this.on(t[P/T]):Tf,te=this.un(e,q,i[P%T],a),ue=this.cn(e,q,c[P%T],p),Fe=y.map(Be=>this.un(e,q,Be,!0));M.push(...this.createRange(te,ue,Fe))}return M}un(e,t,i,a){const c=new rc(e,He.empty(),t,i);return a?c:c.Ke()}cn(e,t,i,a){const c=new rc(e,He.empty(),t,i);return a?c.Ke():c}en(e,t){const i=new OI(t),a=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,a).next(c=>{let p=null;for(const y of c)i.We(y)&&(!p||y.fields.length>p.fields.length)&&(p=y);return p})}getIndexType(e,t){let i=2;return re.forEach(this.tn(t),a=>this.en(e,a).next(c=>{c?0!==i&&c.fields.length<function(p){let y=new an(Nn.comparator),D=!1;for(const T of p.filters){const M=T;M.field.isKeyField()||("array-contains"===M.op||"array-contains-any"===M.op?D=!0:y=y.add(M.field))}for(const T of p.orderBy)T.field.isKeyField()||(y=y.add(T.field));return y.size+(D?1:0)}(a)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new Cl;for(const a of Bu(e)){const c=t.data.field(a.fieldPath);if(null==c)return null;const p=i.qe(a.kind);Tl.Te.ce(c,p)}return i.$e()}on(e){const t=new Cl;return Tl.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new Cl;return Tl.Te.ce(hl(this.databaseId,t),i.qe(function(a){const c=Bu(a);return 0===c.length?0:c[c.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let a=[];a.push(new Cl);let c=0;for(const p of Bu(e)){const y=i[c++];for(const D of a)if(this.ln(t,p.fieldPath)&&af(y))a=this.fn(a,p,y);else{const T=D.qe(p.kind);Tl.Te.ce(y,T)}}return this.dn(a)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const a=[...e],c=[];for(const p of i.arrayValue.values||[])for(const y of a){const D=new Cl;D.seed(y.$e()),Tl.Te.ce(p,D.qe(t.kind)),c.push(D)}return c}ln(e,t){return!!e.filters.find(i=>i instanceof Cn&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Cf(e),a=Xd(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(c=>{const p=[];return re.forEach(c,y=>a.get([y.indexId,this.uid]).next(D=>{p.push(function(T,M){const P=M?new Sa(M.sequenceNumber,new $i(tc(M.readTime),new He(Lo(M.documentKey)),M.largestBatchId)):Sa.empty(),q=T.fields.map(([te,ue])=>new ef(Nn.fromServerFormat(te),ue));return new ul(T.indexId,T.collectionGroup,q,P)}(y,D))})).next(()=>p)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,a)=>{const c=i.indexState.sequenceNumber-a.indexState.sequenceNumber;return 0!==c?c:Ct(i.collectionGroup,a.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const a=Cf(e),c=Xd(e);return this._n(e).next(p=>a.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(y=>re.forEach(y,D=>c.put(RI(D.indexId,this.user,p,i)))))}updateIndexEntries(e,t){const i=new Map;return re.forEach(t,(a,c)=>{const p=i.get(a.collectionGroup);return(p?re.resolve(p):this.getFieldIndexes(e,a.collectionGroup)).next(y=>(i.set(a.collectionGroup,y),re.forEach(y,D=>this.wn(e,a,D).next(T=>{const M=this.mn(c,D);return T.isEqual(M)?re.resolve():this.gn(e,c,D,T,M)}))))})}yn(e,t,i,a){return Jd(e).put({indexId:a.indexId,uid:this.uid,arrayValue:a.arrayValue,directionalValue:a.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,a){return Jd(e).delete([a.indexId,this.uid,a.arrayValue,a.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const a=Jd(e);let c=new an(ic);return a.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(p,y)=>{c=c.add(new rc(i.indexId,t,y.arrayValue,y.directionalValue))}).next(()=>c)}mn(e,t){let i=new an(ic);const a=this.an(t,e);if(null==a)return i;const c=Bd(t);if(null!=c){const p=e.data.field(c.fieldPath);if(af(p))for(const y of p.arrayValue.values||[])i=i.add(new rc(t.indexId,e.key,this.on(y),a))}else i=i.add(new rc(t.indexId,e.key,Tf,a));return i}gn(e,t,i,a,c){Ne("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const p=[];return function(y,D,T,M,P){const q=y.getIterator(),te=D.getIterator();let ue=Ud(q),Fe=Ud(te);for(;ue||Fe;){let Be=!1,Mt=!1;if(ue&&Fe){const Bt=T(ue,Fe);Bt<0?Mt=!0:Bt>0&&(Be=!0)}else null!=ue?Mt=!0:Be=!0;Be?(M(Fe),Fe=Ud(te)):Mt?(P(ue),ue=Ud(q)):(ue=Ud(q),Fe=Ud(te))}}(a,c,ic,y=>{p.push(this.yn(e,t,i,y))},y=>{p.push(this.pn(e,t,i,y))}),re.waitFor(p)}_n(e){let t=1;return Xd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,a,c)=>{c.done(),t=a.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((p,y)=>ic(p,y)).filter((p,y,D)=>!y||0!==ic(p,D[y-1]));const a=[];a.push(e);for(const p of i){const y=ic(p,e),D=ic(p,t);if(0===y)a[0]=e.Ke();else if(y>0&&D<0)a.push(p),a.push(p.Ke());else if(D>0)break}a.push(t);const c=[];for(let p=0;p<a.length;p+=2)c.push(IDBKeyRange.bound([a[p].indexId,this.uid,a[p].arrayValue,a[p].directionalValue,Tf,[]],[a[p+1].indexId,this.uid,a[p+1].arrayValue,a[p+1].directionalValue,Tf,[]]));return c}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(LI)}getMinOffset(e,t){return re.mapArray(this.tn(t),i=>this.en(e,i).next(a=>a||it())).next(LI)}}function Ay(n){return jn(n,"collectionParents")}function Jd(n){return jn(n,"indexEntries")}function Cf(n){return jn(n,"indexConfiguration")}function Xd(n){return jn(n,"indexState")}function LI(n){It(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const a=n[i].indexState.offset;zm(a,e)<0&&(e=a),t<a.largestBatchId&&(t=a.largestBatchId)}return new $i(e.readTime,e.documentKey,t)}const FI={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xi{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new xi(e,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function xy(n,e,t){const i=n.store("mutations"),a=n.store("documentMutations"),c=[],p=IDBKeyRange.only(t.batchId);let y=0;const D=i.Z({range:p},(M,P,q)=>(y++,q.delete()));c.push(D.next(()=>{It(1===y)}));const T=[];for(const M of t.mutations){const P=MI(e,M.key.path,t.batchId);c.push(a.delete(P)),T.push(M.key)}return re.waitFor(c).next(()=>T)}function eh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw it();e=n.noDocument}return JSON.stringify(e).length}xi.DEFAULT_COLLECTION_PERCENTILE=10,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xi.DEFAULT=new xi(41943040,xi.DEFAULT_COLLECTION_PERCENTILE,xi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xi.DISABLED=new xi(-1,0,0);class Sf{constructor(e,t,i,a){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=a,this.In={}}static oe(e,t,i,a){It(""!==e.uid);const c=e.isAuthenticated()?e.uid:"";return new Sf(c,t,i,a)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).Z({index:"userMutationsIndex",range:i},(a,c,p)=>{t=!1,p.done()}).next(()=>t)}addMutationBatch(e,t,i,a){const c=Sl(e),p=Pa(e);return p.add({}).next(y=>{It("number"==typeof y);const D=new Qu(y,t,i,a),T=function(q,te,ue){const Fe=ue.baseMutations.map(Mt=>qi(q.re,Mt)),Be=ue.mutations.map(Mt=>qi(q.re,Mt));return{userId:te,batchId:ue.batchId,localWriteTimeMs:ue.localWriteTime.toMillis(),baseMutations:Fe,mutations:Be}}(this.It,this.userId,D),M=[];let P=new an((q,te)=>Ct(q.canonicalString(),te.canonicalString()));for(const q of a){const te=MI(this.userId,q.key.path,y);P=P.add(q.key.path.popLast()),M.push(p.put(T)),M.push(c.put(te,EE))}return P.forEach(q=>{M.push(this.indexManager.addToCollectionParentIndex(e,q))}),e.addOnCommittedListener(()=>{this.In[y]=D.keys()}),re.waitFor(M).next(()=>D)})}lookupMutationBatch(e,t){return Pa(e).get(t).next(i=>i?(It(i.userId===this.userId),nc(this.It,i)):null)}Tn(e,t){return this.In[t]?re.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const a=i.keys();return this.In[t]=a,a}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,a=IDBKeyRange.lowerBound([this.userId,i]);let c=null;return Pa(e).Z({index:"userMutationsIndex",range:a},(p,y,D)=>{y.userId===this.userId&&(It(y.batchId>=i),c=nc(this.It,y)),D.done()}).next(()=>c)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Pa(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(a,c,p)=>{i=c.batchId,p.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Pa(e).W("userMutationsIndex",t).next(i=>i.map(a=>nc(this.It,a)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=ig(this.userId,t.path),a=IDBKeyRange.lowerBound(i),c=[];return Sl(e).Z({range:a},(p,y,D)=>{const[T,M,P]=p,q=Lo(M);if(T===this.userId&&t.path.isEqual(q))return Pa(e).get(P).next(te=>{if(!te)throw it();It(te.userId===this.userId),c.push(nc(this.It,te))});D.done()}).next(()=>c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new an(Ct);const a=[];return t.forEach(c=>{const p=ig(this.userId,c.path),y=IDBKeyRange.lowerBound(p),D=Sl(e).Z({range:y},(T,M,P)=>{const[q,te,ue]=T,Fe=Lo(te);q===this.userId&&c.path.isEqual(Fe)?i=i.add(ue):P.done()});a.push(D)}),re.waitFor(a).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1,c=ig(this.userId,i),p=IDBKeyRange.lowerBound(c);let y=new an(Ct);return Sl(e).Z({range:p},(D,T,M)=>{const[P,q,te]=D,ue=Lo(q);P===this.userId&&i.isPrefixOf(ue)?ue.length===a&&(y=y.add(te)):M.done()}).next(()=>this.En(e,y))}En(e,t){const i=[],a=[];return t.forEach(c=>{a.push(Pa(e).get(c).next(p=>{if(null===p)throw it();It(p.userId===this.userId),i.push(nc(this.It,p))}))}),re.waitFor(a).next(()=>i)}removeMutationBatch(e,t){return xy(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),re.forEach(i,a=>this.referenceDelegate.markPotentiallyOrphaned(e,a))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return re.resolve();const i=IDBKeyRange.lowerBound([this.userId]),a=[];return Sl(e).Z({range:i},(c,p,y)=>{if(c[0]===this.userId){const D=Lo(c[1]);a.push(D)}else y.done()}).next(()=>{It(0===a.length)})})}containsKey(e,t){return My(e,this.userId,t)}Rn(e){return Ny(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function My(n,e,t){const i=ig(e,t.path),a=i[1],c=IDBKeyRange.lowerBound(i);let p=!1;return Sl(n).Z({range:c,X:!0},(y,D,T)=>{const[M,P,q]=y;M===e&&P===a&&(p=!0),T.done()}).next(()=>p)}function Pa(n){return jn(n,"mutations")}function Sl(n){return jn(n,"documentMutations")}function Ny(n){return jn(n,"mutationQueues")}class sc{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new sc(0)}static vn(){return new sc(-1)}}class VI{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new sc(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Et.fromTimestamp(new pn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(a=>(a.highestListenSequenceNumber=t,i&&(a.lastRemoteSnapshotVersion=i.toTimestamp()),t>a.highestListenSequenceNumber&&(a.highestListenSequenceNumber=t),this.Sn(e,a)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Al(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(It(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let a=0;const c=[];return Al(e).Z((p,y)=>{const D=Yd(y);D.sequenceNumber<=t&&null===i.get(D.targetId)&&(a++,c.push(this.removeTargetData(e,D)))}).next(()=>re.waitFor(c)).next(()=>a)}forEachTarget(e,t){return Al(e).Z((i,a)=>{const c=Yd(a);t(c)})}Vn(e){return RE(e).get("targetGlobalKey").next(t=>(It(null!==t),t))}Sn(e,t){return RE(e).put("targetGlobalKey",t)}Dn(e,t){return Al(e).put(by(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=pl(t),a=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let c=null;return Al(e).Z({range:a,index:"queryTargetsIndex"},(p,y,D)=>{const T=Yd(y);zu(t,T.target)&&(c=T,D.done())}).next(()=>c)}addMatchingKeys(e,t,i){const a=[],c=oc(e);return t.forEach(p=>{const y=_i(p.path);a.push(c.put({targetId:i,path:y})),a.push(this.referenceDelegate.addReference(e,i,p))}),re.waitFor(a)}removeMatchingKeys(e,t,i){const a=oc(e);return re.forEach(t,c=>{const p=_i(c.path);return re.waitFor([a.delete([i,p]),this.referenceDelegate.removeReference(e,i,c)])})}removeMatchingKeysForTargetId(e,t){const i=oc(e),a=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(a)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),a=oc(e);let c=kt();return a.Z({range:i,X:!0},(p,y,D)=>{const T=Lo(p[1]),M=new He(T);c=c.add(M)}).next(()=>c)}containsKey(e,t){const i=_i(t.path),a=IDBKeyRange.bound([i],[Yw(i)],!1,!0);let c=0;return oc(e).Z({index:"documentTargetsIndex",X:!0,range:a},([p,y],D,T)=>{0!==p&&(c++,T.done())}).next(()=>c>0)}se(e,t){return Al(e).get(t).next(i=>i?Yd(i):null)}}function Al(n){return jn(n,"targets")}function RE(n){return jn(n,"targetGlobal")}function oc(n){return jn(n,"targetDocuments")}function BI([n,e],[t,i]){const a=Ct(n,t);return 0===a?Ct(e,i):a}class UI{constructor(e){this.xn=e,this.buffer=new an(BI),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();BI(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kE{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ne("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,ge.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){Nr(i)?Ne("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Aa(i)}yield t.Fn(3e5)}))}}class Ir{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return re.resolve(mi.at);const i=new UI(t);return this.$n.forEachTarget(e,a=>i.On(a.sequenceNumber)).next(()=>this.$n.Ln(e,a=>i.On(a))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector","Garbage collection skipped; disabled"),re.resolve(FI)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(Ne("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),FI):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,a,c,p,y,D,T;const M=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(P=>(P>this.params.maximumSequenceNumbersToCollect?(Ne("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${P}`),a=this.params.maximumSequenceNumbersToCollect):a=P,p=Date.now(),this.nthSequenceNumber(e,a))).next(P=>(i=P,y=Date.now(),this.removeTargets(e,i,t))).next(P=>(c=P,D=Date.now(),this.removeOrphanedDocuments(e,i))).next(P=>(T=Date.now(),Xh()<=Cr.in.DEBUG&&Ne("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${p-M}ms\n\tDetermined least recently used ${a} in `+(y-p)+`ms\n\tRemoved ${c} targets in `+(D-y)+`ms\n\tRemoved ${P} documents in `+(T-D)+`ms\nTotal Duration: ${T-M}ms`),re.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:P})))}}class jI{constructor(e,t){this.db=e,this.garbageCollector=new Ir(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(a=>i+a))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,a)=>t(a))}addReference(e,t,i){return dg(e,i)}removeReference(e,t,i){return dg(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return dg(e,t)}Gn(e,t){return function(i,a){let c=!1;return Ny(i).tt(p=>My(i,p,a).next(y=>(y&&(c=!0),re.resolve(!y)))).next(()=>c)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),a=[];let c=0;return this.Kn(e,(p,y)=>{if(y<=t){const D=this.Gn(e,p).next(T=>{if(!T)return c++,i.getEntry(e,p).next(()=>(i.removeEntry(p,Et.min()),oc(e).delete([0,_i(p.path)])))});a.push(D)}}).next(()=>re.waitFor(a)).next(()=>i.apply(e)).next(()=>c)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return dg(e,t)}Kn(e,t){const i=oc(e);let a,c=mi.at;return i.Z({index:"documentTargetsIndex"},([p,y],{path:D,sequenceNumber:T})=>{0===p?(c!==mi.at&&t(new He(Lo(a)),c),c=T,a=D):c=mi.at}).next(()=>{c!==mi.at&&t(new He(Lo(a)),c)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function dg(n,e){return oc(n).put((i=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:i}));var i}class $I{constructor(){this.changes=new Ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?re.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class HI{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return ws(e).put(i)}removeEntry(e,t,i){return ws(e).delete(function(a,c){const p=a.path.toArray();return[p.slice(0,p.length-2),p[p.length-2],Ef(c),p[p.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=_n.newInvalidDocument(t);return ws(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},(a,c)=>{i=this.jn(t,c)}).next(()=>i)}Wn(e,t){let i={size:0,document:_n.newInvalidDocument(t)};return ws(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Af(t))},(a,c)=>{i={document:this.jn(t,c),size:eh(c)}}).next(()=>i)}getEntries(e,t){let i=yi();return this.zn(e,t,(a,c)=>{const p=this.jn(a,c);i=i.insert(a,p)}).next(()=>i)}Hn(e,t){let i=yi(),a=new st(He.comparator);return this.zn(e,t,(c,p)=>{const y=this.jn(c,p);i=i.insert(c,y),a=a.insert(c,eh(p))}).next(()=>({documents:i,Jn:a}))}zn(e,t,i){if(t.isEmpty())return re.resolve();let a=new an(ky);t.forEach(D=>a=a.add(D));const c=IDBKeyRange.bound(Af(a.first()),Af(a.last())),p=a.getIterator();let y=p.getNext();return ws(e).Z({index:"documentKeyIndex",range:c},(D,T,M)=>{const P=He.fromSegments([...T.prefixPath,T.collectionGroup,T.documentId]);for(;y&&ky(y,P)<0;)i(y,null),y=p.getNext();y&&y.isEqual(P)&&(i(y,T),y=p.hasNext()?p.getNext():null),y?M.j(Af(y)):M.done()}).next(()=>{for(;y;)i(y,null),y=p.hasNext()?p.getNext():null})}getAllFromCollection(e,t,i){const a=[t.popLast().toArray(),t.lastSegment(),Ef(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],c=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ws(e).W(IDBKeyRange.bound(a,c,!0)).next(p=>{let y=yi();for(const D of p){const T=this.jn(He.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);y=y.insert(T.key,T)}return y})}getAllFromCollectionGroup(e,t,i,a){let c=yi();const p=WI(t,i),y=WI(t,$i.max());return ws(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(p,y,!0)},(D,T,M)=>{const P=this.jn(He.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);c=c.insert(P.key,P),c.size===a&&M.done()}).next(()=>c)}newChangeBuffer(e){return new zI(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ry(e).get("remoteDocumentGlobalKey").next(t=>(It(!!t),t))}Qn(e,t){return Ry(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function Zd(n,e){let t;if(e.document)t=yy(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=He.fromSegments(e.noDocument.path),a=tc(e.noDocument.readTime);t=_n.newNoDocument(i,a),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return it();{const i=He.fromSegments(e.unknownDocument.path),a=tc(e.unknownDocument.version);t=_n.newUnknownDocument(i,a)}}return e.readTime&&t.setReadTime(function(i){const a=new pn(i[0],i[1]);return Et.fromTimestamp(a)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(Et.min()))return i}return _n.newInvalidDocument(e)}}function GI(n){return new HI(n)}class zI extends $I{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Ku(i=>i.toString(),(i,a)=>i.isEqual(a))}applyChanges(e){const t=[];let i=0,a=new an((c,p)=>Ct(c.canonicalString(),p.canonicalString()));return this.changes.forEach((c,p)=>{const y=this.Xn.get(c);if(t.push(this.Yn.removeEntry(e,c,y.readTime)),p.isValidDocument()){const D=Dy(this.Yn.It,p);a=a.add(c.path.popLast()),i+=eh(D)-y.size,t.push(this.Yn.addEntry(e,c,D))}else if(i-=y.size,this.trackRemovals){const D=Dy(this.Yn.It,p.convertToNoDocument(Et.min()));t.push(this.Yn.addEntry(e,c,D))}}),a.forEach(c=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,c))}),t.push(this.Yn.updateMetadata(e,i)),re.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:a})=>(a.forEach((c,p)=>{this.Xn.set(c,{size:p,readTime:i.get(c).readTime})}),i))}}function Ry(n){return jn(n,"remoteDocumentGlobal")}function ws(n){return jn(n,"remoteDocumentsV14")}function Af(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function WI(n,e){const t=e.documentKey.path.toArray();return[n,Ef(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ky(n,e){const t=n.path.toArray(),i=e.path.toArray();let a=0;for(let c=0;c<t.length-2&&c<i.length-2;++c)if(a=Ct(t[c],i[c]),a)return a;return a=Ct(t.length,i.length),a||(a=Ct(t[t.length-2],i[i.length-2]),a||Ct(t[t.length-1],i[i.length-1]))}class PE{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Py{constructor(e,t,i,a){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=a}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(a=>(i=a,this.getBaseDocument(e,t,i))).next(a=>(null!==i&&vl(i.mutation,a,Si.empty(),pn.now()),a))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,kt()).next(()=>i))}getLocalViewOfDocuments(e,t,i=kt()){const a=Is();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,i).next(c=>{let p=Jp();return c.forEach((y,D)=>{p=p.insert(y,D.overlayedDocument)}),p}))}getOverlayedDocuments(e,t){const i=Is();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,kt()))}populateOverlays(e,t,i){const a=[];return i.forEach(c=>{t.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((p,y)=>{t.set(p,y)})})}computeViews(e,t,i,a){let c=yi();const p=df(),y=df();return t.forEach((D,T)=>{const M=i.get(T.key);a.has(T.key)&&(void 0===M||M.mutation instanceof Zs)?c=c.insert(T.key,T):void 0!==M&&(p.set(T.key,M.mutation.getFieldMask()),vl(M.mutation,T,M.mutation.getFieldMask(),pn.now()))}),this.recalculateAndSaveOverlays(e,c).next(D=>(D.forEach((T,M)=>p.set(T,M)),t.forEach((T,M)=>{var P;return y.set(T,new PE(M,null!==(P=p.get(T))&&void 0!==P?P:null))}),y))}recalculateAndSaveOverlays(e,t){const i=df();let a=new st((p,y)=>p-y),c=kt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(p=>{for(const y of p)y.keys().forEach(D=>{const T=t.get(D);if(null===T)return;let M=i.get(D)||Si.empty();M=y.applyToLocalView(T,M),i.set(D,M);const P=(a.get(y.batchId)||kt()).add(D);a=a.insert(y.batchId,P)})}).next(()=>{const p=[],y=a.getReverseIterator();for(;y.hasNext();){const D=y.getNext(),T=D.key,M=D.value,P=ly();M.forEach(q=>{if(!c.has(q)){const te=Kp(t.get(q),i.get(q));null!==te&&P.set(q,te),c=c.add(q)}}),p.push(this.documentOverlayCache.saveOverlays(e,T,P))}return re.waitFor(p)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return He.isDocumentKey((a=t).path)&&null===a.collectionGroup&&0===a.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):cI(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var a}getNextDocuments(e,t,i,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,a).next(c=>{const p=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,a-c.size):re.resolve(Is());let y=-1,D=c;return p.next(T=>re.forEach(T,(M,P)=>(y<P.largestBatchId&&(y=P.largestBatchId),c.get(M)?re.resolve():this.getBaseDocument(e,M,P).next(q=>{D=D.insert(M,q)}))).next(()=>this.populateOverlays(e,T,c)).next(()=>this.computeViews(e,D,T,kt())).next(M=>({batchId:y,changes:_I(M)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new He(t)).next(i=>{let a=Jp();return i.isFoundDocument()&&(a=a.insert(i.key,i)),a})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const a=t.collectionGroup;let c=Jp();return this.indexManager.getCollectionParents(e,a).next(p=>re.forEach(p,y=>{const D=(T=t,M=y.child(a),new Ma(M,null,T.explicitOrderBy.slice(),T.filters.slice(),T.limit,T.limitType,T.startAt,T.endAt));var T,M;return this.getDocumentsMatchingCollectionQuery(e,D,i).next(T=>{T.forEach((M,P)=>{c=c.insert(M,P)})})}).next(()=>c))}getDocumentsMatchingCollectionQuery(e,t,i){let a;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(c=>(a=c,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(c=>{c.forEach((y,D)=>{const T=D.getKey();null===a.get(T)&&(a=a.insert(T,_n.newInvalidDocument(T)))});let p=Jp();return a.forEach((y,D)=>{const T=c.get(y);void 0!==T&&vl(T.mutation,D,Si.empty(),pn.now()),dI(t,D)&&(p=p.insert(y,D))}),p})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):re.resolve(_n.newInvalidDocument(t))}}class Cb{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return re.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:kr(i.createTime)}),re.resolve()}getNamedQuery(e,t){return re.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:ag(i.bundledQuery),readTime:kr(i.readTime)}),re.resolve();var i}}class qI{constructor(){this.overlays=new st(He.comparator),this.es=new Map}getOverlay(e,t){return re.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Is();return re.forEach(t,a=>this.getOverlay(e,a).next(c=>{null!==c&&i.set(a,c)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((a,c)=>{this.ue(e,t,c)}),re.resolve()}removeOverlaysForBatchId(e,t,i){const a=this.es.get(i);return void 0!==a&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.es.delete(i)),re.resolve()}getOverlaysForCollection(e,t,i){const a=Is(),c=t.length+1,p=new He(t.child("")),y=this.overlays.getIteratorFrom(p);for(;y.hasNext();){const D=y.getNext().value,T=D.getKey();if(!t.isPrefixOf(T.path))break;T.path.length===c&&D.largestBatchId>i&&a.set(D.getKey(),D)}return re.resolve(a)}getOverlaysForCollectionGroup(e,t,i,a){let c=new st((T,M)=>T-M);const p=this.overlays.getIterator();for(;p.hasNext();){const T=p.getNext().value;if(T.getKey().getCollectionGroup()===t&&T.largestBatchId>i){let M=c.get(T.largestBatchId);null===M&&(M=Is(),c=c.insert(T.largestBatchId,M)),M.set(T.getKey(),T)}}const y=Is(),D=c.getIterator();for(;D.hasNext()&&(D.getNext().value.forEach((T,M)=>y.set(T,M)),!(y.size()>=a)););return re.resolve(y)}ue(e,t,i){const a=this.overlays.get(i.key);if(null!==a){const p=this.es.get(a.largestBatchId).delete(i.key);this.es.set(a.largestBatchId,p)}this.overlays=this.overlays.insert(i.key,new Xu(t,i));let c=this.es.get(t);void 0===c&&(c=kt(),this.es.set(t,c)),this.es.set(t,c.add(i.key))}}class hg{constructor(){this.ns=new an(gn.ss),this.rs=new an(gn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new gn(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new gn(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new He(new Kt([])),i=new gn(t,e),a=new gn(t,e+1),c=[];return this.rs.forEachInRange([i,a],p=>{this.cs(p),c.push(p.key)}),c}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new He(new Kt([])),i=new gn(t,e),a=new gn(t,e+1);let c=kt();return this.rs.forEachInRange([i,a],p=>{c=c.add(p.key)}),c}containsKey(e){const t=new gn(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class gn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return He.comparator(e.key,t.key)||Ct(e._s,t._s)}static os(e,t){return Ct(e._s,t._s)||He.comparator(e.key,t.key)}}class OE{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new an(gn.ss)}checkEmpty(e){return re.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,a){const c=this.ws;this.ws++;const p=new Qu(c,t,i,a);this.mutationQueue.push(p);for(const y of a)this.gs=this.gs.add(new gn(y.key,c)),this.indexManager.addToCollectionParentIndex(e,y.key.path.popLast());return re.resolve(p)}lookupMutationBatch(e,t){return re.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const a=this.ps(t+1),c=a<0?0:a;return re.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return re.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return re.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new gn(t,0),a=new gn(t,Number.POSITIVE_INFINITY),c=[];return this.gs.forEachInRange([i,a],p=>{const y=this.ys(p._s);c.push(y)}),re.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new an(Ct);return t.forEach(a=>{const c=new gn(a,0),p=new gn(a,Number.POSITIVE_INFINITY);this.gs.forEachInRange([c,p],y=>{i=i.add(y._s)})}),re.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,a=i.length+1;let c=i;He.isDocumentKey(c)||(c=c.child(""));const p=new gn(new He(c),0);let y=new an(Ct);return this.gs.forEachWhile(D=>{const T=D.key.path;return!!i.isPrefixOf(T)&&(T.length===a&&(y=y.add(D._s)),!0)},p),re.resolve(this.Is(y))}Is(e){const t=[];return e.forEach(i=>{const a=this.ys(i);null!==a&&t.push(a)}),t}removeMutationBatch(e,t){It(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return re.forEach(t.mutations,a=>{const c=new gn(a.key,t.batchId);return i=i.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new gn(t,0),a=this.gs.firstAfterOrEqual(i);return re.resolve(t.isEqual(a&&a.key))}performConsistencyCheck(e){return re.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class LE{constructor(e){this.Es=e,this.docs=new st(He.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,a=this.docs.get(i),c=a?a.size:0,p=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:p}),this.size+=p-c,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return re.resolve(i?i.document.mutableCopy():_n.newInvalidDocument(t))}getEntries(e,t){let i=yi();return t.forEach(a=>{const c=this.docs.get(a);i=i.insert(a,c?c.document.mutableCopy():_n.newInvalidDocument(a))}),re.resolve(i)}getAllFromCollection(e,t,i){let a=yi();const c=new He(t.child("")),p=this.docs.getIteratorFrom(c);for(;p.hasNext();){const{key:y,value:{document:D}}=p.getNext();if(!t.isPrefixOf(y.path))break;y.path.length>t.length+1||zm(Gm(D),i)<=0||(a=a.insert(D.key,D.mutableCopy()))}return re.resolve(a)}getAllFromCollectionGroup(e,t,i,a){it()}As(e,t){return re.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Vo(this)}getSize(e){return re.resolve(this.size)}}class Vo extends $I{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,a)=>{a.isValidDocument()?t.push(this.Yn.addEntry(e,a)):this.Yn.removeEntry(i)}),re.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class Qs{constructor(e){this.persistence=e,this.Rs=new Ku(t=>pl(t),zu),this.lastRemoteSnapshotVersion=Et.min(),this.highestTargetId=0,this.bs=0,this.Ps=new hg,this.targetCount=0,this.vs=sc.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,a)=>t(a)),re.resolve()}getLastRemoteSnapshotVersion(e){return re.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return re.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),re.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),re.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new sc(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,re.resolve()}updateTargetData(e,t){return this.Dn(t),re.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,re.resolve()}removeTargets(e,t,i){let a=0;const c=[];return this.Rs.forEach((p,y)=>{y.sequenceNumber<=t&&null===i.get(y.targetId)&&(this.Rs.delete(p),c.push(this.removeMatchingKeysForTargetId(e,y.targetId)),a++)}),re.waitFor(c).next(()=>a)}getTargetCount(e){return re.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return re.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),re.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const a=this.persistence.referenceDelegate,c=[];return a&&t.forEach(p=>{c.push(a.markPotentiallyOrphaned(e,p))}),re.waitFor(c)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),re.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return re.resolve(i)}containsKey(e,t){return re.resolve(this.Ps.containsKey(t))}}class Es{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new mi(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new Qs(this),this.indexManager=new ME,this.remoteDocumentCache=new LE(i=>this.referenceDelegate.xs(i)),this.It=new Dl(t),this.Ns=new Cb(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new qI,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new OE(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ne("MemoryPersistence","Starting transaction:",e);const a=new KI(this.Ss.next());return this.referenceDelegate.ks(),i(a).next(c=>this.referenceDelegate.Os(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Ms(e,t){return re.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class KI extends Op{constructor(e){super(),this.currentSequenceNumber=e}}class xf{constructor(e){this.persistence=e,this.Fs=new hg,this.$s=null}static Bs(e){return new xf(e)}get Ls(){if(this.$s)return this.$s;throw it()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),re.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),re.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),re.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(a=>this.Ls.add(a.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(a=>{a.forEach(c=>this.Ls.add(c.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return re.forEach(this.Ls,i=>{const a=He.fromPath(i);return this.Us(e,a).next(c=>{c||t.removeEntry(a,Et.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return re.or([()=>re.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class FE{constructor(e){this.It=e}$(e,t,i,a){const c=new Lp("createOrUpgrade",t);var y;i<1&&a>=1&&(e.createObjectStore("owner"),(y=e).createObjectStore("mutationQueues",{keyPath:"userId"}),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rg,{unique:!0}),y.createObjectStore("documentMutations"),ZI(e),function(y){y.createObjectStore("remoteDocuments")}(e));let p=re.resolve();return i<3&&a>=3&&(0!==i&&(function(y){y.deleteObjectStore("targetDocuments"),y.deleteObjectStore("targets"),y.deleteObjectStore("targetGlobal")}(e),ZI(e)),p=p.next(()=>function(y){const D=y.store("targetGlobal"),T={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Et.min().toTimestamp(),targetCount:0};return D.put("targetGlobalKey",T)}(c))),i<4&&a>=4&&(0!==i&&(p=p.next(()=>function(y,D){return D.store("mutations").W().next(T=>{y.deleteObjectStore("mutations"),y.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",rg,{unique:!0});const M=D.store("mutations"),P=T.map(q=>M.put(q));return re.waitFor(P)})}(e,c))),p=p.next(()=>{!function(y){y.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&a>=5&&(p=p.next(()=>this.qs(c))),i<6&&a>=6&&(p=p.next(()=>(function(y){y.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(c)))),i<7&&a>=7&&(p=p.next(()=>this.Gs(c))),i<8&&a>=8&&(p=p.next(()=>this.Qs(e,c))),i<9&&a>=9&&(p=p.next(()=>{!function(y){y.objectStoreNames.contains("remoteDocumentChanges")&&y.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&a>=10&&(p=p.next(()=>this.js(c))),i<11&&a>=11&&(p=p.next(()=>{(function(y){y.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(y){y.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&a>=12&&(p=p.next(()=>{!function(y){const D=y.createObjectStore("documentOverlays",{keyPath:Fo});D.createIndex("collectionPathOverlayIndex",wf,{unique:!1}),D.createIndex("collectionGroupOverlayIndex",si,{unique:!1})}(e)})),i<13&&a>=13&&(p=p.next(()=>function(y){const D=y.createObjectStore("remoteDocumentsV14",{keyPath:DE});D.createIndex("documentKeyIndex",bE),D.createIndex("collectionGroupIndex",TE)}(e)).next(()=>this.Ws(e,c)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&a>=14&&(p=p.next(()=>this.zs(e,c))),i<15&&a>=15&&(p=p.next(()=>function(y){y.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),y.createObjectStore("indexState",{keyPath:CE}).createIndex("sequenceNumberIndex",SE,{unique:!1}),y.createObjectStore("indexEntries",{keyPath:wy}).createIndex("documentKeyIndex",AE,{unique:!1})}(e))),p}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,a)=>{t+=eh(a)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(a=>re.forEach(a,c=>{const p=IDBKeyRange.bound([c.userId,-1],[c.userId,c.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",p).next(y=>re.forEach(y,D=>{It(D.userId===c.userId);const T=nc(this.It,D);return xy(e,c.userId,T).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(a=>{const c=[];return i.Z((p,y)=>{const D=new Kt(p),T=[0,_i(D)];c.push(t.get(T).next(M=>M?re.resolve():t.put({targetId:0,path:_i(D),sequenceNumber:a.highestListenSequenceNumber})))}).next(()=>re.waitFor(c))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:If});const i=t.store("collectionParents"),a=new bf,c=p=>{if(a.add(p)){const y=p.lastSegment(),D=p.popLast();return i.put({collectionId:y,parent:_i(D)})}};return t.store("remoteDocuments").Z({X:!0},(p,y)=>{const D=new Kt(p);return c(D.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([p,y,D],T)=>{const M=Lo(y);return c(M.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,a)=>{const c=Yd(a),p=by(this.It,c);return t.put(p)})}Ws(e,t){const i=t.store("remoteDocuments"),a=[];return i.Z((c,p)=>{const y=t.store("remoteDocumentsV14"),D=(T=p,T.document?new He(Kt.fromString(T.document.name).popFirst(5)):T.noDocument?He.fromSegments(T.noDocument.path):T.unknownDocument?He.fromSegments(T.unknownDocument.path):it()).path.toArray();var T;const M={prefixPath:D.slice(0,D.length-2),collectionGroup:D[D.length-2],documentId:D[D.length-1],readTime:p.readTime||[0,0],unknownDocument:p.unknownDocument,noDocument:p.noDocument,document:p.document,hasCommittedMutations:!!p.hasCommittedMutations};a.push(y.put(M))}).next(()=>re.waitFor(a))}zs(e,t){const i=t.store("mutations"),a=GI(this.It),c=new Es(xf.Bs,this.It.re);return i.W().next(p=>{const y=new Map;return p.forEach(D=>{var T;let M=null!==(T=y.get(D.userId))&&void 0!==T?T:kt();nc(this.It,D).keys().forEach(P=>M=M.add(P)),y.set(D.userId,M)}),re.forEach(y,(D,T)=>{const M=new Mr(T),P=Qd.oe(this.It,M),q=c.getIndexManager(M),te=Sf.oe(M,this.It,q,c.referenceDelegate);return new Py(a,te,P,q).recalculateAndSaveOverlaysForDocumentKeys(new Yu(t,mi.at),D).next()})})}}function ZI(n){n.createObjectStore("targetDocuments",{keyPath:El}).createIndex("documentTargetsIndex",Tb,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",sg,{unique:!0}),n.createObjectStore("targetGlobal")}const Oy="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ly{constructor(e,t,i,a,c,p,y,D,T,M,P=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=c,this.window=p,this.document=y,this.Js=T,this.Ys=M,this.Xs=P,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=q=>Promise.resolve(),!Ly.C())throw new Ce(oe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new jI(this,a),this.ii=t+"main",this.It=new Dl(D),this.ri=new vs(this.ii,this.Xs,new FE(this.It)),this.Cs=new VI(this.referenceDelegate,this.It),this.remoteDocumentCache=GI(this.It),this.Ns=new kI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===M&&yn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,Oy);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new mi(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,ge.Z)(function*(a){if(t.started)return e(a)});return function(a){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,ge.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,ge.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ac(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(Nr(e))return Ne("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ne("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return xl(e).get("owner").next(t=>re.resolve(this.mi(t)))}gi(e){return ac(e).delete(this.clientId)}yi(){var e=this;return(0,ge.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const a=jn(i,"clientMetadata");return a.W().next(c=>{const p=e.Ii(c,18e5),y=c.filter(D=>-1===p.indexOf(D));return re.forEach(y,D=>a.delete(D.clientId)).next(()=>y)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?re.resolve(!0):xl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Ce(oe.FAILED_PRECONDITION,Oy);return!1}}return!(!this.networkEnabled||!this.inForeground)||ac(e).W().next(i=>void 0===this.Ii(i,5e3).find(a=>{if(this.clientId!==a.clientId){const p=!this.inForeground&&a.inForeground,y=this.networkEnabled===a.networkEnabled;if(!this.networkEnabled&&a.networkEnabled||p&&y)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ne("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,ge.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Yu(t,mi.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>ac(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return Sf.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new NE(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Qd.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){Ne("IndexedDbPersistence","Starting transaction:",e);const a="readonly"===t?"readonly":"readwrite",c=15===(p=this.Xs)?Kd:14===p?Ey:13===p?Ki:12===p?og:11===p?Zu:void it();var p;let y;return this.ri.runTransaction(e,a,c,D=>(y=new Yu(D,this.Ss?this.Ss.next():mi.at),"readwrite-primary"===t?this.fi(y).next(T=>!!T||this.di(y)).next(T=>{if(!T)throw yn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Ce(oe.FAILED_PRECONDITION,Wm);return i(y)}).next(T=>this.wi(y).next(()=>T)):this.Vi(y).next(()=>i(y)))).then(D=>(y.raiseOnCommittedEvent(),D))}Vi(e){return xl(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Ce(oe.FAILED_PRECONDITION,Oy)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return xl(e).put("owner",t)}static C(){return vs.C()}_i(e){const t=xl(e);return t.get("owner").next(i=>this.mi(i)?(Ne("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):re.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(yn(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Vt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ne("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return yn("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){yn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function xl(n){return jn(n,"owner")}function ac(n){return jn(n,"clientMetadata")}function Fy(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class fg{constructor(e,t,i,a){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=a}static Ci(e,t){let i=kt(),a=kt();for(const c of t.docChanges)switch(c.type){case 0:i=i.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new fg(e,t.fromCache,i,a)}}class YI{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,a){return this.ki(e,t).next(c=>c||this.Oi(e,t,a,i)).next(c=>c||this.Mi(e,t))}ki(e,t){if(ey(t))return re.resolve(null);let i=ii(t);return this.indexManager.getIndexType(e,i).next(a=>0===a?null:(null!==t.limit&&1===a&&(t=qp(t,null,"F"),i=ii(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(c=>{const p=kt(...c);return this.Ni.getDocuments(e,p).next(y=>this.indexManager.getMinOffset(e,i).next(D=>{const T=this.Fi(t,y);return this.$i(t,T,p,D.readTime)?this.ki(e,qp(t,null,"F")):this.Bi(e,T,t,D)}))})))}Oi(e,t,i,a){return ey(t)||a.isEqual(Et.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(c=>{const p=this.Fi(t,c);return this.$i(t,p,i,a)?this.Mi(e,t):(Xh()<=Cr.in.DEBUG&&Ne("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),lI(t)),this.Bi(e,p,t,Wv(a,-1)))})}Fi(e,t){let i=new an(cE(e));return t.forEach((a,c)=>{dI(e,c)&&(i=i.add(c))}),i}$i(e,t,i,a){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const c="F"===e.limitType?t.last():t.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Mi(e,t){return Xh()<=Cr.in.DEBUG&&Ne("QueryEngine","Using full collection scan to execute query:",lI(t)),this.Ni.getDocumentsMatchingQuery(e,t,$i.min())}Bi(e,t,i,a){return this.Ni.getDocumentsMatchingQuery(e,i,a).next(c=>(t.forEach(p=>{c=c.insert(p.key,p)}),c))}}class QI{constructor(e,t,i,a){this.persistence=e,this.Li=t,this.It=a,this.Ui=new st(Ct),this.qi=new Ku(c=>pl(c),zu),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Py(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Vy(n,e,t,i){return new QI(n,e,t,i)}function Mf(n,e){return By.apply(this,arguments)}function By(){return By=(0,ge.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let a;return t.mutationQueue.getAllMutationBatches(i).next(c=>(a=c,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(c=>{const p=[],y=[];let D=kt();for(const T of a){p.push(T.batchId);for(const M of T.mutations)D=D.add(M.key)}for(const T of c){y.push(T.batchId);for(const M of T.mutations)D=D.add(M.key)}return t.localDocuments.getDocuments(i,D).next(T=>({ji:T,removedBatchIds:p,addedBatchIds:y}))})})}),By.apply(this,arguments)}function JI(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const a=e.batch.keys(),c=t.Gi.newChangeBuffer({trackRemovals:!0});return function(p,y,D,T){const M=D.batch,P=M.keys();let q=re.resolve();return P.forEach(te=>{q=q.next(()=>T.getEntry(y,te)).next(ue=>{const Fe=D.docVersions.get(te);It(null!==Fe),ue.version.compareTo(Fe)<0&&(M.applyToRemoteDocument(ue,D),ue.isValidDocument()&&(ue.setReadTime(D.commitVersion),T.addEntry(ue)))})}),q.next(()=>p.mutationQueue.removeMutationBatch(y,M))}(t,i,e,c).next(()=>c.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,a,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(p){let y=kt();for(let D=0;D<p.mutationResults.length;++D)p.mutationResults[D].transformResults.length>0&&(y=y.add(p.batch.mutations[D].key));return y}(e))).next(()=>t.localDocuments.getDocuments(i,a))})}function Uy(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function XI(n,e){const t=Ke(n),i=e.snapshotVersion;let a=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const p=t.Gi.newChangeBuffer({trackRemovals:!0});a=t.Ui;const y=[];e.targetChanges.forEach((M,P)=>{const q=a.get(P);if(!q)return;y.push(t.Cs.removeMatchingKeys(c,M.removedDocuments,P).next(()=>t.Cs.addMatchingKeys(c,M.addedDocuments,P)));let te=q.withSequenceNumber(c.currentSequenceNumber);var ue,Fe,Be;e.targetMismatches.has(P)?te=te.withResumeToken(pr.EMPTY_BYTE_STRING,Et.min()).withLastLimboFreeSnapshotVersion(Et.min()):M.resumeToken.approximateByteSize()>0&&(te=te.withResumeToken(M.resumeToken,i)),a=a.insert(P,te),Fe=te,Be=M,(0===(ue=q).resumeToken.approximateByteSize()||Fe.snapshotVersion.toMicroseconds()-ue.snapshotVersion.toMicroseconds()>=3e8||Be.addedDocuments.size+Be.modifiedDocuments.size+Be.removedDocuments.size>0)&&y.push(t.Cs.updateTargetData(c,te))});let D=yi(),T=kt();if(e.documentUpdates.forEach(M=>{e.resolvedLimboDocuments.has(M)&&y.push(t.persistence.referenceDelegate.updateLimboDocument(c,M))}),y.push(Nf(c,p,e.documentUpdates).next(M=>{D=M.Wi,T=M.zi})),!i.isEqual(Et.min())){const M=t.Cs.getLastRemoteSnapshotVersion(c).next(P=>t.Cs.setTargetsMetadata(c,c.currentSequenceNumber,i));y.push(M)}return re.waitFor(y).next(()=>p.apply(c)).next(()=>t.localDocuments.getLocalViewOfDocuments(c,D,T)).next(()=>D)}).then(c=>(t.Ui=a,c))}function Nf(n,e,t){let i=kt(),a=kt();return t.forEach(c=>i=i.add(c)),e.getEntries(n,i).next(c=>{let p=yi();return t.forEach((y,D)=>{const T=c.get(y);D.isFoundDocument()!==T.isFoundDocument()&&(a=a.add(y)),D.isNoDocument()&&D.version.isEqual(Et.min())?(e.removeEntry(y,D.readTime),p=p.insert(y,D)):!T.isValidDocument()||D.version.compareTo(T.version)>0||0===D.version.compareTo(T.version)&&T.hasPendingWrites?(e.addEntry(D),p=p.insert(y,D)):Ne("LocalStore","Ignoring outdated watch update for ",y,". Current version:",T.version," Watch version:",D.version)}),{Wi:p,zi:a}})}function e0(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Ml(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let a;return t.Cs.getTargetData(i,e).next(c=>c?(a=c,re.resolve(a)):t.Cs.allocateTargetId(i).next(p=>(a=new Zi(e,p,0,i.currentSequenceNumber),t.Cs.addTargetData(i,a).next(()=>a))))}).then(i=>{const a=t.Ui.get(i.targetId);return(null===a||i.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Nl(n,e,t){return pg.apply(this,arguments)}function pg(){return pg=(0,ge.Z)(function*(n,e,t){const i=Ke(n),a=i.Ui.get(e),c=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",c,p=>i.persistence.referenceDelegate.removeTarget(p,a)))}catch(p){if(!Nr(p))throw p;Ne("LocalStore",`Failed to update sequence numbers for target ${e}: ${p}`)}i.Ui=i.Ui.remove(e),i.qi.delete(a.target)}),pg.apply(this,arguments)}function Rf(n,e,t){const i=Ke(n);let a=Et.min(),c=kt();return i.persistence.runTransaction("Execute query","readonly",p=>function(y,D,T){const M=Ke(y),P=M.qi.get(T);return void 0!==P?re.resolve(M.Ui.get(P)):M.Cs.getTargetData(D,T)}(i,p,ii(e)).next(y=>{if(y)return a=y.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(p,y.targetId).next(D=>{c=D})}).next(()=>i.Li.getDocumentsMatchingQuery(p,e,t?a:Et.min(),t?c:kt())).next(y=>(Hy(i,uE(e),y),{documents:y,Hi:c})))}function jy(n,e){const t=Ke(n),i=Ke(t.Cs),a=t.Ui.get(e);return a?Promise.resolve(a.target):t.persistence.runTransaction("Get target data","readonly",c=>i.se(c,e).next(p=>p?p.target:null))}function $y(n,e){const t=Ke(n),i=t.Ki.get(e)||Et.min();return t.persistence.runTransaction("Get new document changes","readonly",a=>t.Gi.getAllFromCollectionGroup(a,e,Wv(i,-1),Number.MAX_SAFE_INTEGER)).then(a=>(Hy(t,e,a),a))}function Hy(n,e,t){let i=n.Ki.get(e)||Et.min();t.forEach((a,c)=>{c.readTime.compareTo(i)>0&&(i=c.readTime)}),n.Ki.set(e,i)}function Gy(){return Gy=(0,ge.Z)(function*(n,e,t,i){const a=Ke(n);let c=kt(),p=yi();for(const T of t){const M=e.Ji(T.metadata.name);T.document&&(c=c.add(M));const P=e.Yi(T);P.setReadTime(e.Xi(T.metadata.readTime)),p=p.insert(M,P)}const y=a.Gi.newChangeBuffer({trackRemovals:!0}),D=yield Ml(a,(T=i,ii($d(Kt.fromString(`__bundle__/docs/${T}`)))));var T;return a.persistence.runTransaction("Apply bundle documents","readwrite",T=>Nf(T,y,p).next(M=>(y.apply(T),M)).next(M=>a.Cs.removeMatchingKeysForTargetId(T,D.targetId).next(()=>a.Cs.addMatchingKeys(T,c,D.targetId)).next(()=>a.localDocuments.getLocalViewOfDocuments(T,M.Wi,M.zi)).next(()=>M.Wi)))}),Gy.apply(this,arguments)}function BE(n,e){return zy.apply(this,arguments)}function zy(){return zy=(0,ge.Z)(function*(n,e,t=kt()){const i=yield Ml(n,ii(ag(e.bundledQuery))),a=Ke(n);return a.persistence.runTransaction("Save named query","readwrite",c=>{const p=kr(e.readTime);if(i.snapshotVersion.compareTo(p)>=0)return a.Ns.saveNamedQuery(c,e);const y=i.withResumeToken(pr.EMPTY_BYTE_STRING,p);return a.Ui=a.Ui.insert(y.targetId,y),a.Cs.updateTargetData(c,y).next(()=>a.Cs.removeMatchingKeysForTargetId(c,i.targetId)).next(()=>a.Cs.addMatchingKeys(c,t,i.targetId)).next(()=>a.Ns.saveNamedQuery(c,e))})}),zy.apply(this,arguments)}function t0(n,e){return`firestore_clients_${n}_${e}`}function n0(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Wy(n,e){return`firestore_targets_${n}_${e}`}class gg{constructor(e,t,i,a){this.user=e,this.batchId=t,this.state=i,this.error=a}static Zi(e,t,i){const a=JSON.parse(i);let c,p="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return p&&a.error&&(p="string"==typeof a.error.message&&"string"==typeof a.error.code,p&&(c=new Ce(a.error.code,a.error.message))),p?new gg(e,t,a.state,c):(yn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class kf{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let a,c="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(a=new Ce(i.error.code,i.error.message))),c?new kf(e,i.state,a):(yn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mg{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let a="object"==typeof i&&i.activeTargetIds instanceof Array,c=hf();for(let p=0;a&&p<i.activeTargetIds.length;++p)a=rE(i.activeTargetIds[p]),c=c.add(i.activeTargetIds[p]);return a?new mg(e,c):(yn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qy{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qy(t.clientId,t.onlineState):(yn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ky{constructor(){this.activeTargetIds=hf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Zy{constructor(e,t,i,a,c){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=a,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new st(Ct),this.started=!1,this.cr=[];const p=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=c,this.ar=t0(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ky),this.lr=new RegExp(`^firestore_clients_${p}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${p}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${p}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(y){return`firestore_bundle_loaded_v2_${y}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ge.Z)(function*(){const t=yield e.syncEngine.vi();for(const a of t){if(a===e.sr)continue;const c=e.getItem(t0(e.persistenceKey,a));if(c){const p=mg.Zi(a,c);p&&(e.ur=e.ur.insert(p.clientId,p))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const a=e.yr(i);a&&e.pr(a)}for(const a of e.cr)e.rr(a);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,a)=>{a.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Wy(this.persistenceKey,e));if(i){const a=kf.Zi(e,i);a&&(t=a.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wy(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(a=>{this.Er(a)}),this.currentUser=e,i.forEach(a=>{this.addPendingMutation(a)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ne("SharedClientState","READ",e,t),t}setItem(e,t){Ne("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ne("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(Ne("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void yn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,ge.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const a=t.vr(i.key);return t.Vr(a,null)}{const a=t.Sr(i.key,i.newValue);if(a)return t.Vr(a.clientId,a)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const a=t.Dr(i.key,i.newValue);if(a)return t.Cr(a)}}else if(t._r.test(i.key)){if(null!==i.newValue){const a=t.Nr(i.key,i.newValue);if(a)return t.kr(a)}}else if(i.key===t.wr){if(null!==i.newValue){const a=t.yr(i.newValue);if(a)return t.pr(a)}}else if(i.key===t.hr){const a=function(c){let p=mi.at;if(null!=c)try{const y=JSON.parse(c);It("number"==typeof y),p=y}catch(y){yn("SharedClientState","Failed to read sequence number from WebStorage",y)}return p}(i.newValue);a!==mi.at&&t.sequenceNumberHandler(a)}else if(i.key===t.mr){const a=t.Or(i.newValue);yield Promise.all(a.map(c=>t.syncEngine.Mr(c)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const a=new gg(this.currentUser,e,t,i),c=n0(this.persistenceKey,this.currentUser,e);this.setItem(c,a.tr())}Er(e){const t=n0(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const a=Wy(this.persistenceKey,e),c=new kf(e,t,i);this.setItem(a,c.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return mg.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),a=Number(i[1]);return gg.Zi(new Mr(void 0!==i[2]?i[2]:null),a,t)}Nr(e,t){const i=this._r.exec(e),a=Number(i[1]);return kf.Zi(a,t)}yr(e){return qy.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,ge.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ne("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),a=this.Ir(this.ur),c=this.Ir(i),p=[],y=[];return c.forEach(D=>{a.has(D)||p.push(D)}),a.forEach(D=>{c.has(D)||y.push(D)}),this.syncEngine.Br(p,y).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=hf();return e.forEach((i,a)=>{t=t.unionWith(a.activeTargetIds)}),t}}class r0{constructor(){this.Lr=new Ky,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ky,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class UE{qr(e){}shutdown(){}}class s0{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ne("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ne("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const jE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class $E{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class o0 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,a,c){const p=this.ho(e,t);Ne("RestConnection","Sending: ",p,i);const y={};return this.lo(y,a,c),this.fo(e,p,y,i).then(D=>(Ne("RestConnection","Received: ",D),D),D=>{throw Ca("RestConnection",`${e} failed with error: `,D,"url: ",p,"request:",i),D})}_o(e,t,i,a,c,p){return this.ao(e,t,i,a,c)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ld,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((a,c)=>e[c]=a),i&&i.headers.forEach((a,c)=>e[c]=a)}ho(e,t){return`${this.oo}/v1/${t}:${jE[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,a){return new Promise((c,p)=>{const y=new Ww;y.setWithCredentials(!0),y.listenOnce(Ro.COMPLETE,()=>{try{switch(y.getLastErrorCode()){case Vv.NO_ERROR:const T=y.getResponseJson();Ne("Connection","XHR received:",JSON.stringify(T)),c(T);break;case Vv.TIMEOUT:Ne("Connection",'RPC "'+e+'" timed out'),p(new Ce(oe.DEADLINE_EXCEEDED,"Request time out"));break;case Vv.HTTP_ERROR:const M=y.getStatus();if(Ne("Connection",'RPC "'+e+'" failed with status:',M,"response text:",y.getResponseText()),M>0){const P=y.getResponseJson().error;if(P&&P.status&&P.message){const q=function(te){const ue=te.toLowerCase().replace(/_/g,"-");return Object.values(oe).indexOf(ue)>=0?ue:oe.UNKNOWN}(P.status);p(new Ce(q,P.message))}else p(new Ce(oe.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new Ce(oe.UNAVAILABLE,"Connection failed."));break;default:it()}}finally{Ne("Connection",'RPC "'+e+'" completed.')}});const D=JSON.stringify(a);y.send(t,"POST",D,i,15)})}wo(e,t,i){const a=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=vb(),p=Fv(),y={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(y.xmlHttpFactory=new zw({})),this.lo(y.initMessageHeaders,t,i),y.encodeInitMessageHeaders=!0;const D=a.join("");Ne("Connection","Creating WebChannel: "+D,y);const T=c.createWebChannel(D,y);let M=!1,P=!1;const q=new $E({Hr:ue=>{P?Ne("Connection","Not sending because WebChannel is closed:",ue):(M||(Ne("Connection","Opening WebChannel transport."),T.open(),M=!0),Ne("Connection","WebChannel sending:",ue),T.send(ue))},Jr:()=>T.close()}),te=(ue,Fe,Be)=>{ue.listen(Fe,Mt=>{try{Be(Mt)}catch(Bt){setTimeout(()=>{throw Bt},0)}})};return te(T,Jh.EventType.OPEN,()=>{P||Ne("Connection","WebChannel transport opened.")}),te(T,Jh.EventType.CLOSE,()=>{P||(P=!0,Ne("Connection","WebChannel transport closed"),q.io())}),te(T,Jh.EventType.ERROR,ue=>{P||(P=!0,Ca("Connection","WebChannel transport errored:",ue),q.io(new Ce(oe.UNAVAILABLE,"The operation could not be completed")))}),te(T,Jh.EventType.MESSAGE,ue=>{var Fe;if(!P){const Be=ue.data[0];It(!!Be);const Mt=Be,Bt=Mt.error||(null===(Fe=Mt[0])||void 0===Fe?void 0:Fe.error);if(Bt){Ne("Connection","WebChannel received error:",Bt);const Lt=Bt.status;let Pt=function(Ut){const qr=or[Ut];if(void 0!==qr)return cy(qr)}(Lt),Nt=Bt.message;void 0===Pt&&(Pt=oe.INTERNAL,Nt="Unknown error status: "+Lt+" with message "+Bt.message),P=!0,q.io(new Ce(Pt,Nt)),T.close()}else Ne("Connection","WebChannel received:",Be),q.ro(Be)}}),te(p,Vm.STAT_EVENT,ue=>{ue.stat===kp.PROXY?Ne("Connection","Detected buffering proxy"):ue.stat===kp.NOPROXY&&Ne("Connection","Detected no buffering proxy")}),setTimeout(()=>{q.so()},0),q}}function Yy(){return typeof window<"u"?window:null}function Pf(){return typeof document<"u"?document:null}function th(n){return new _E(n,!0)}class yg{constructor(e,t,i=1e3,a=1.5,c=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=a,this.po=c,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),a=Math.max(0,t-i);a>0&&Ne("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,a,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class Qy{constructor(e,t,i,a,c,p,y,D){this.Hs=e,this.vo=i,this.Vo=a,this.So=c,this.authCredentialsProvider=p,this.appCheckCredentialsProvider=y,this.listener=D,this.state=0,this.Do=0,this.Co=null,this.xo=null,this.stream=null,this.No=new yg(e,t)}ko(){return 1===this.state||5===this.state||this.Oo()}Oo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Mo()}stop(){var e=this;return(0,ge.Z)(function*(){e.ko()&&(yield e.close(0))})()}Fo(){this.state=0,this.No.reset()}$o(){this.Oo()&&null===this.Co&&(this.Co=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.Bo()))}Lo(e){this.Uo(),this.stream.send(e)}Bo(){var e=this;return(0,ge.Z)(function*(){if(e.Oo())return e.close(0)})()}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}qo(){this.xo&&(this.xo.cancel(),this.xo=null)}close(e,t){var i=this;return(0,ge.Z)(function*(){i.Uo(),i.qo(),i.No.cancel(),i.Do++,4!==e?i.No.reset():t&&t.code===oe.RESOURCE_EXHAUSTED?(yn(t.toString()),yn("Using maximum backoff delay to prevent overloading the backend."),i.No.Ao()):t&&t.code===oe.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.Ko(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}Ko(){}auth(){this.state=1;const e=this.Go(this.Do),t=this.Do;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,a])=>{this.Do===t&&this.Qo(i,a)},i=>{e(()=>{const a=new Ce(oe.UNKNOWN,"Fetching auth token failed: "+i.message);return this.jo(a)})})}Qo(e,t){const i=this.Go(this.Do);this.stream=this.Wo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.xo=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.Oo()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(a=>{i(()=>this.jo(a))}),this.stream.onMessage(a=>{i(()=>this.onMessage(a))})}Mo(){var e=this;this.state=5,this.No.Ro((0,ge.Z)(function*(){e.state=0,e.start()}))}jo(e){return Ne("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Go(e){return t=>{this.Hs.enqueueAndForget(()=>this.Do===e?t():(Ne("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class a0 extends Qy{constructor(e,t,i,a,c,p){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,a,p),this.It=c}Wo(e,t){return this.So.wo("Listen",e,t)}onMessage(e){this.No.reset();const t=function _y(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(D=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===D?1:"REMOVE"===D?2:"CURRENT"===D?3:"RESET"===D?4:it(),a=e.targetChange.targetIds||[],c=function(D,T){return D.gt?(It(void 0===T||"string"==typeof T),pr.fromBase64String(T||"")):(It(void 0===T||T instanceof Uint8Array),pr.fromUint8Array(T||new Uint8Array))}(n,e.targetChange.resumeToken),p=e.targetChange.cause,y=p&&function(D){const T=void 0===D.code?oe.UNKNOWN:cy(D.code);return new Ce(T,D.message||"")}(p);t=new vI(i,a,c,y||null)}else if("documentChange"in e){const i=e.documentChange,a=Wi(n,i.document.name),c=kr(i.document.updateTime),p=new ri({mapValue:{fields:i.document.fields}}),y=_n.newFoundDocument(a,c,p);t=new gf(i.targetIds||[],i.removedTargetIds||[],y.key,y)}else if("documentDelete"in e){const i=e.documentDelete,a=Wi(n,i.document),c=i.readTime?kr(i.readTime):Et.min(),p=_n.newNoDocument(a,c);t=new gf([],i.removedTargetIds||[],p.key,p)}else if("documentRemove"in e){const i=e.documentRemove,a=Wi(n,i.document);t=new gf([],i.removedTargetIds||[],a,null)}else{if(!("filter"in e))return it();{const i=e.filter,c=new pE(i.count||0);t=new dy(i.targetId,c)}}var D;return t}(this.It,e),i=function(a){if(!("targetChange"in a))return Et.min();const c=a.targetChange;return c.targetIds&&c.targetIds.length?Et.min():c.readTime?kr(c.readTime):Et.min()}(e);return this.listener.zo(t,i)}Ho(e){const t={};t.database=eg(this.It),t.addTarget=function(a,c){let p;const y=c.target;return p=Ai(y)?{documents:Wd(a,y)}:{query:vy(a,y)},p.targetId=c.targetId,c.resumeToken.approximateByteSize()>0?p.resumeToken=DI(a,c.resumeToken):c.snapshotVersion.compareTo(Et.min())>0&&(p.readTime=mf(a,c.snapshotVersion.toTimestamp())),p}(this.It,e);const i=function CI(n,e){const t=function(i,a){switch(a){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return it()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Lo(t)}Jo(e){const t={};t.database=eg(this.It),t.removeTarget=e,this.Lo(t)}}class u0 extends Qy{constructor(e,t,i,a,c,p){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,a,p),this.It=c,this.Yo=!1}get Xo(){return this.Yo}start(){this.Yo=!1,this.lastStreamToken=void 0,super.start()}Ko(){this.Yo&&this.Zo([])}Wo(e,t){return this.So.wo("Write",e,t)}onMessage(e){if(It(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Yo){this.No.reset();const t=function tg(n,e){return n&&n.length>0?(It(void 0!==e),n.map(t=>function(i,a){let c=kr(i.updateTime?i.updateTime:a);return c.isEqual(Et.min())&&(c=kr(a)),new fE(c,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=kr(e.commitTime);return this.listener.tu(i,t)}return It(!e.writeResults||0===e.writeResults.length),this.Yo=!0,this.listener.eu()}nu(){const e={};e.database=eg(this.It),this.Lo(e)}Zo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>qi(this.It,i))};this.Lo(t)}}class c0 extends class{}{constructor(e,t,i,a){super(),this.authCredentials=e,this.appCheckCredentials=t,this.So=i,this.It=a,this.su=!1}iu(){if(this.su)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,c])=>this.So.ao(e,t,i,a,c)).catch(a=>{throw"FirebaseError"===a.name?(a.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Ce(oe.UNKNOWN,a.toString())})}_o(e,t,i,a){return this.iu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,p])=>this.So._o(e,t,i,c,p,a)).catch(c=>{throw"FirebaseError"===c.name?(c.code===oe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Ce(oe.UNKNOWN,c.toString())})}terminate(){this.su=!0}}class Rl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.ru=0,this.ou=null,this.uu=!0}cu(){0===this.ru&&(this.au("Unknown"),this.ou=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ou=null,this.hu("Backend didn't respond within 10 seconds."),this.au("Offline"),Promise.resolve())))}lu(e){"Online"===this.state?this.au("Unknown"):(this.ru++,this.ru>=1&&(this.fu(),this.hu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.au("Offline")))}set(e){this.fu(),this.ru=0,"Online"===e&&(this.uu=!1),this.au(e)}au(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}hu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.uu?(yn(t),this.uu=!1):Ne("OnlineStateTracker",t)}fu(){null!==this.ou&&(this.ou.cancel(),this.ou=null)}}class HE{constructor(e,t,i,a,c){var p=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.du=[],this._u=new Map,this.wu=new Set,this.mu=[],this.gu=c,this.gu.qr(y=>{i.enqueueAndForget((0,ge.Z)(function*(){var D;Oa(p)&&(Ne("RemoteStore","Restarting streams for network reachability change."),yield(D=(0,ge.Z)(function*(T){const M=Ke(T);M.wu.add(4),yield Lf(M),M.yu.set("Unknown"),M.wu.delete(4),yield Of(M)}),function(T){return D.apply(this,arguments)})(p))}))}),this.yu=new Rl(i,a)}}function Of(n){return uc.apply(this,arguments)}function uc(){return uc=(0,ge.Z)(function*(n){if(Oa(n))for(const e of n.mu)yield e(!0)}),uc.apply(this,arguments)}function Lf(n){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,ge.Z)(function*(n){for(const e of n.mu)yield e(!1)}),Ff.apply(this,arguments)}function Jy(n,e){const t=Ke(n);t._u.has(e.targetId)||(t._u.set(e.targetId,e),Xy(t)?mt(t):oh(t).Oo()&&vg(t,e))}function nh(n,e){const t=Ke(n),i=oh(t);t._u.delete(e),i.Oo()&&GE(t,e),0===t._u.size&&(i.Oo()?i.$o():Oa(t)&&t.yu.set("Unknown"))}function vg(n,e){n.pu.Mt(e.targetId),oh(n).Ho(e)}function GE(n,e){n.pu.Mt(e),oh(n).Jo(e)}function mt(n){n.pu=new hy({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n._u.get(e)||null}),oh(n).start(),n.yu.cu()}function Xy(n){return Oa(n)&&!oh(n).ko()&&n._u.size>0}function Oa(n){return 0===Ke(n).wu.size}function d0(n){n.pu=void 0}function rh(n){return e_.apply(this,arguments)}function e_(){return e_=(0,ge.Z)(function*(n){n._u.forEach((e,t)=>{vg(n,e)})}),e_.apply(this,arguments)}function Ig(n,e){return ih.apply(this,arguments)}function ih(){return ih=(0,ge.Z)(function*(n,e){d0(n),Xy(n)?(n.yu.lu(e),mt(n)):n.yu.set("Unknown")}),ih.apply(this,arguments)}function Yn(n,e,t){return h0.apply(this,arguments)}function h0(){return h0=(0,ge.Z)(function*(n,e,t){if(n.yu.set("Online"),e instanceof vI&&2===e.state&&e.cause)try{yield(i=(0,ge.Z)(function*(a,c){const p=c.cause;for(const y of c.targetIds)a._u.has(y)&&(yield a.remoteSyncer.rejectListen(y,p),a._u.delete(y),a.pu.removeTarget(y))}),function(a,c){return i.apply(this,arguments)})(n,e)}catch(i){Ne("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Vf(n,i)}else if(e instanceof gf?n.pu.Gt(e):e instanceof dy?n.pu.Yt(e):n.pu.Wt(e),!t.isEqual(Et.min()))try{const i=yield Uy(n.localStore);t.compareTo(i)>=0&&(yield function(a,c){const p=a.pu.te(c);return p.targetChanges.forEach((y,D)=>{if(y.resumeToken.approximateByteSize()>0){const T=a._u.get(D);T&&a._u.set(D,T.withResumeToken(y.resumeToken,c))}}),p.targetMismatches.forEach(y=>{const D=a._u.get(y);if(!D)return;a._u.set(y,D.withResumeToken(pr.EMPTY_BYTE_STRING,D.snapshotVersion)),GE(a,y);const T=new Zi(D.target,y,1,D.sequenceNumber);vg(a,T)}),a.remoteSyncer.applyRemoteEvent(p)}(n,t))}catch(i){Ne("RemoteStore","Failed to raise snapshot:",i),yield Vf(n,i)}var i}),h0.apply(this,arguments)}function Vf(n,e,t){return wg.apply(this,arguments)}function wg(){return wg=(0,ge.Z)(function*(n,e,t){if(!Nr(e))throw e;n.wu.add(1),yield Lf(n),n.yu.set("Offline"),t||(t=()=>Uy(n.localStore)),n.asyncQueue.enqueueRetryable((0,ge.Z)(function*(){Ne("RemoteStore","Retrying IndexedDB access"),yield t(),n.wu.delete(1),yield Of(n)}))}),wg.apply(this,arguments)}function f0(n,e){return e().catch(t=>Vf(n,t,e))}function kl(n){return Eg.apply(this,arguments)}function Eg(){return Eg=(0,ge.Z)(function*(n){const e=Ke(n),t=cc(e);let i=e.du.length>0?e.du[e.du.length-1].batchId:-1;for(;p0(e);)try{const a=yield e0(e.localStore,i);if(null===a){0===e.du.length&&t.$o();break}i=a.batchId,g0(e,a)}catch(a){yield Vf(e,a)}m0(e)&&y0(e)}),Eg.apply(this,arguments)}function p0(n){return Oa(n)&&n.du.length<10}function g0(n,e){n.du.push(e);const t=cc(n);t.Oo()&&t.Xo&&t.Zo(e.mutations)}function m0(n){return Oa(n)&&!cc(n).ko()&&n.du.length>0}function y0(n){cc(n).start()}function zE(n){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,ge.Z)(function*(n){cc(n).nu()}),Pl.apply(this,arguments)}function WE(n){return t_.apply(this,arguments)}function t_(){return t_=(0,ge.Z)(function*(n){const e=cc(n);for(const t of n.du)e.Zo(t.mutations)}),t_.apply(this,arguments)}function qE(n,e,t){return sh.apply(this,arguments)}function sh(){return sh=(0,ge.Z)(function*(n,e,t){const i=n.du.shift(),a=Ju.from(i,e,t);yield f0(n,()=>n.remoteSyncer.applySuccessfulWrite(a)),yield kl(n)}),sh.apply(this,arguments)}function _0(n,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,ge.Z)(function*(n,e){var t;e&&cc(n).Xo&&(yield(t=(0,ge.Z)(function*(i,a){if(uy(c=a.code)&&c!==oe.ABORTED){const p=i.du.shift();cc(i).Fo(),yield f0(i,()=>i.remoteSyncer.rejectFailedWrite(p.batchId,a)),yield kl(i)}var c}),function(i,a){return t.apply(this,arguments)})(n,e)),m0(n)&&y0(n)}),Dg.apply(this,arguments)}function n_(n,e){return r_.apply(this,arguments)}function r_(){return r_=(0,ge.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ne("RemoteStore","RemoteStore received new credentials");const i=Oa(t);t.wu.add(3),yield Lf(t),i&&t.yu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.wu.delete(3),yield Of(t)}),r_.apply(this,arguments)}function Ol(n,e){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,ge.Z)(function*(n,e){const t=Ke(n);e?(t.wu.delete(2),yield Of(t)):e||(t.wu.add(2),yield Lf(t),t.yu.set("Unknown"))}),Ll.apply(this,arguments)}function oh(n){return n.Iu||(n.Iu=function(e,t,i){const a=Ke(e);return a.iu(),new a0(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:rh.bind(null,n),Zr:Ig.bind(null,n),zo:Yn.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Iu.Fo(),Xy(n)?mt(n):n.yu.set("Unknown")):(yield n.Iu.stop(),d0(n))});return function(t){return e.apply(this,arguments)}}())),n.Iu}function cc(n){return n.Tu||(n.Tu=function(e,t,i){const a=Ke(e);return a.iu(),new u0(t,a.So,a.authCredentials,a.appCheckCredentials,a.It,i)}(n.datastore,n.asyncQueue,{Yr:zE.bind(null,n),Zr:_0.bind(null,n),eu:WE.bind(null,n),tu:qE.bind(null,n)}),n.mu.push(function(){var e=(0,ge.Z)(function*(t){t?(n.Tu.Fo(),yield kl(n)):(yield n.Tu.stop(),n.du.length>0&&(Ne("RemoteStore",`Stopping write stream with ${n.du.length} pending writes`),n.du=[]))});return function(t){return e.apply(this,arguments)}}())),n.Tu}class i_{constructor(e,t,i,a,c){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=a,this.removalCallback=c,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(p=>{})}static createAndSchedule(e,t,i,a,c){const p=Date.now()+i,y=new i_(e,t,p,a,c);return y.start(i),y}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ce(oe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(n,e){if(yn("AsyncQueue",`${e}: ${n}`),Nr(n))return new Ce(oe.UNAVAILABLE,`${e}: ${n}`);throw n}class Vl{constructor(e){this.comparator=e?(t,i)=>e(t,i)||He.comparator(t.key,i.key):(t,i)=>He.comparator(t.key,i.key),this.keyedMap=Jp(),this.sortedSet=new st(this.comparator)}static emptySet(e){return new Vl(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Vl)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const a=t.getNext().key,c=i.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new Vl;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class s_{constructor(){this.Eu=new st(He.comparator)}track(e){const t=e.doc.key,i=this.Eu.get(t);i?0!==e.type&&3===i.type?this.Eu=this.Eu.insert(t,e):3===e.type&&1!==i.type?this.Eu=this.Eu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Eu=this.Eu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Eu=this.Eu.remove(t):1===e.type&&2===i.type?this.Eu=this.Eu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Eu=this.Eu.insert(t,{type:2,doc:e.doc}):it():this.Eu=this.Eu.insert(t,e)}Au(){const e=[];return this.Eu.inorderTraversal((t,i)=>{e.push(i)}),e}}class ah{constructor(e,t,i,a,c,p,y,D,T){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=a,this.mutatedKeys=c,this.fromCache=p,this.syncStateChanged=y,this.excludesMetadataChanges=D,this.hasCachedResults=T}static fromInitialDocuments(e,t,i,a,c){const p=[];return t.forEach(y=>{p.push({type:0,doc:y})}),new ah(e,t,Vl.emptySet(t),p,i,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ml(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let a=0;a<t.length;a++)if(t[a].type!==i[a].type||!t[a].doc.isEqual(i[a].doc))return!1;return!0}}class v0{constructor(){this.Ru=void 0,this.listeners=[]}}class KE{constructor(){this.queries=new Ku(e=>aE(e),ml),this.onlineState="Unknown",this.bu=new Set}}function o_(n,e){return I0.apply(this,arguments)}function I0(){return I0=(0,ge.Z)(function*(n,e){const t=Ke(n),i=e.query;let a=!1,c=t.queries.get(i);if(c||(a=!0,c=new v0),a)try{c.Ru=yield t.onListen(i)}catch(p){const y=Fl(p,`Initialization of query '${lI(e.query)}' failed`);return void e.onError(y)}t.queries.set(i,c),c.listeners.push(e),e.Pu(t.onlineState),c.Ru&&e.vu(c.Ru)&&uh(t)}),I0.apply(this,arguments)}function w0(n,e){return E0.apply(this,arguments)}function E0(){return E0=(0,ge.Z)(function*(n,e){const t=Ke(n),i=e.query;let a=!1;const c=t.queries.get(i);if(c){const p=c.listeners.indexOf(e);p>=0&&(c.listeners.splice(p,1),a=0===c.listeners.length)}if(a)return t.queries.delete(i),t.onUnlisten(i)}),E0.apply(this,arguments)}function Sb(n,e){const t=Ke(n);let i=!1;for(const a of e){const p=t.queries.get(a.query);if(p){for(const y of p.listeners)y.vu(a)&&(i=!0);p.Ru=a}}i&&uh(t)}function D0(n,e,t){const i=Ke(n),a=i.queries.get(e);if(a)for(const c of a.listeners)c.onError(t);i.queries.delete(e)}function uh(n){n.bu.forEach(e=>{e.next()})}class a_{constructor(e,t,i){this.query=e,this.Vu=t,this.Su=!1,this.Du=null,this.onlineState="Unknown",this.options=i||{}}vu(e){if(!this.options.includeMetadataChanges){const i=[];for(const a of e.docChanges)3!==a.type&&i.push(a);e=new ah(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Su?this.Cu(e)&&(this.Vu.next(e),t=!0):this.xu(e,this.onlineState)&&(this.Nu(e),t=!0),this.Du=e,t}onError(e){this.Vu.error(e)}Pu(e){this.onlineState=e;let t=!1;return this.Du&&!this.Su&&this.xu(this.Du,e)&&(this.Nu(this.Du),t=!0),t}xu(e,t){return!e.fromCache||(!this.options.ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Cu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Du&&this.Du.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Nu(e){e=ah.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Su=!0,this.Vu.next(e)}}class ZE{constructor(e,t){this.payload=e,this.byteLength=t}Ou(){return"metadata"in this.payload}}class u_{constructor(e){this.It=e}Ji(e){return Wi(this.It,e)}Yi(e){return e.metadata.exists?yy(this.It,e.document,!1):_n.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return kr(e)}}class Bf{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=b0(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t;const i=Kt.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new u_(this.It);for(const a of e)if(a.metadata.queries){const c=i.Ji(a.metadata.name);for(const p of a.metadata.queries){const y=(t.get(p)||kt()).add(c);t.set(p,y)}}return t}complete(){var e=this;return(0,ge.Z)(function*(){const t=yield function VE(n,e,t,i){return Gy.apply(this,arguments)}(e.localStore,new u_(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const a of e.queries)yield BE(e.localStore,a,i.get(a.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function b0(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class T0{constructor(e){this.key=e}}class C0{constructor(e){this.key=e}}class S0{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=kt(),this.mutatedKeys=kt(),this.Gu=cE(e),this.Qu=new Vl(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new s_,a=t?t.Qu:this.Qu;let c=t?t.mutatedKeys:this.mutatedKeys,p=a,y=!1;const D="F"===this.query.limitType&&a.size===this.query.limit?a.last():null,T="L"===this.query.limitType&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((M,P)=>{const q=a.get(M),te=dI(this.query,P)?P:null,ue=!!q&&this.mutatedKeys.has(q.key),Fe=!!te&&(te.hasLocalMutations||this.mutatedKeys.has(te.key)&&te.hasCommittedMutations);let Be=!1;q&&te?q.data.isEqual(te.data)?ue!==Fe&&(i.track({type:3,doc:te}),Be=!0):this.Hu(q,te)||(i.track({type:2,doc:te}),Be=!0,(D&&this.Gu(te,D)>0||T&&this.Gu(te,T)<0)&&(y=!0)):!q&&te?(i.track({type:0,doc:te}),Be=!0):q&&!te&&(i.track({type:1,doc:q}),Be=!0,(D||T)&&(y=!0)),Be&&(te?(p=p.add(te),c=Fe?c.add(M):c.delete(M)):(p=p.delete(M),c=c.delete(M)))}),null!==this.query.limit)for(;p.size>this.query.limit;){const M="F"===this.query.limitType?p.last():p.first();p=p.delete(M.key),c=c.delete(M.key),i.track({type:1,doc:M})}return{Qu:p,zu:i,$i:y,mutatedKeys:c}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const a=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const c=e.zu.Au();c.sort((T,M)=>function(P,q){const te=ue=>{switch(ue){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return it()}};return te(P)-te(q)}(T.type,M.type)||this.Gu(T.doc,M.doc)),this.Ju(i);const p=t?this.Yu():[],y=0===this.Ku.size&&this.current?1:0,D=y!==this.qu;return this.qu=y,0!==c.length||D?{snapshot:new ah(this.query,e.Qu,a,c,e.mutatedKeys,0===y,D,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:p}:{Xu:p}}Pu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new s_,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=kt(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new C0(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new T0(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=kt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return ah.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class YE{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class A0{constructor(e){this.key=e,this.nc=!1}}class QE{constructor(e,t,i,a,c,p){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=p,this.sc={},this.ic=new Ku(y=>aE(y),ml),this.rc=new Map,this.oc=new Set,this.uc=new st(He.comparator),this.cc=new Map,this.ac=new hg,this.hc={},this.lc=new Map,this.fc=sc.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function JE(n,e){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,ge.Z)(function*(n,e){const t=F0(n);let i,a;const c=t.ic.get(e);if(c)i=c.targetId,t.sharedClientState.addLocalQueryTarget(i),a=c.view.ec();else{const p=yield Ml(t.localStore,ii(e));t.isPrimaryClient&&Jy(t.remoteStore,p);const y=t.sharedClientState.addLocalQueryTarget(p.targetId);i=p.targetId,a=yield c_(t,e,i,"current"===y,p.resumeToken)}return a}),Bl.apply(this,arguments)}function c_(n,e,t,i,a){return bg.apply(this,arguments)}function bg(){return bg=(0,ge.Z)(function*(n,e,t,i,a){n._c=(P,q,te)=>{return(ue=(0,ge.Z)(function*(Fe,Be,Mt,Bt){let Lt=Be.view.Wu(Mt);Lt.$i&&(Lt=yield Rf(Fe.localStore,Be.query,!1).then(({documents:Ut})=>Be.view.Wu(Ut,Lt)));const Pt=Bt&&Bt.targetChanges.get(Be.targetId),Nt=Be.view.applyChanges(Lt,Fe.isPrimaryClient,Pt);return f_(Fe,Be.targetId,Nt.Xu),Nt.snapshot}),function(Fe,Be,Mt,Bt){return ue.apply(this,arguments)})(n,P,q,te);var ue};const c=yield Rf(n.localStore,e,!0),p=new S0(e,c.Hi),y=p.Wu(c.documents),D=pf.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,a),T=p.applyChanges(y,n.isPrimaryClient,D);f_(n,t,T.Xu);const M=new YE(e,t,p);return n.ic.set(e,M),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),T.snapshot}),bg.apply(this,arguments)}function XE(n,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,ge.Z)(function*(n,e){const t=Ke(n),i=t.ic.get(e),a=t.rc.get(i.targetId);if(a.length>1)return t.rc.set(i.targetId,a.filter(c=>!ml(c,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Nl(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),nh(t.remoteStore,i.targetId),ch(t,i.targetId)}).catch(Aa))):(ch(t,i.targetId),yield Nl(t.localStore,i.targetId,!0))}),Tg.apply(this,arguments)}function Cg(){return Cg=(0,ge.Z)(function*(n,e,t){const i=Ng(n);try{const a=yield function(c,p){const y=Ke(c),D=pn.now(),T=p.reduce((q,te)=>q.add(te.key),kt());let M,P;return y.persistence.runTransaction("Locally write mutations","readwrite",q=>{let te=yi(),ue=kt();return y.Gi.getEntries(q,T).next(Fe=>{te=Fe,te.forEach((Be,Mt)=>{Mt.isValidDocument()||(ue=ue.add(Be))})}).next(()=>y.localDocuments.getOverlayedDocuments(q,te)).next(Fe=>{M=Fe;const Be=[];for(const Mt of p){const Bt=Zp(Mt,M.get(Mt.key).overlayedDocument);null!=Bt&&Be.push(new Zs(Mt.key,Bt,Hp(Bt.value.mapValue),Rn.exists(!0)))}return y.mutationQueue.addMutationBatch(q,D,Be,p)}).next(Fe=>{P=Fe;const Be=Fe.applyToLocalDocumentSet(M,ue);return y.documentOverlayCache.saveOverlays(q,Fe.batchId,Be)})}).then(()=>({batchId:P.batchId,changes:_I(M)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(a.batchId),function(c,p,y){let D=c.hc[c.currentUser.toKey()];D||(D=new st(Ct)),D=D.insert(p,y),c.hc[c.currentUser.toKey()]=D}(i,a.batchId,t),yield La(i,a.changes),yield kl(i.remoteStore)}catch(a){const c=Fl(a,"Failed to persist write");t.reject(c)}}),Cg.apply(this,arguments)}function x0(n,e){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,ge.Z)(function*(n,e){const t=Ke(n);try{const i=yield XI(t.localStore,e);e.targetChanges.forEach((a,c)=>{const p=t.cc.get(c);p&&(It(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?p.nc=!0:a.modifiedDocuments.size>0?It(p.nc):a.removedDocuments.size>0&&(It(p.nc),p.nc=!1))}),yield La(t,i,e)}catch(i){yield Aa(i)}}),Uf.apply(this,arguments)}function M0(n,e,t){const i=Ke(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const a=[];i.ic.forEach((c,p)=>{const y=p.view.Pu(e);y.snapshot&&a.push(y.snapshot)}),function(c,p){const y=Ke(c);y.onlineState=p;let D=!1;y.queries.forEach((T,M)=>{for(const P of M.listeners)P.Pu(p)&&(D=!0)}),D&&uh(y)}(i.eventManager,e),a.length&&i.sc.zo(a),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function N0(n,e,t){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,ge.Z)(function*(n,e,t){const i=Ke(n);i.sharedClientState.updateQueryState(e,"rejected",t);const a=i.cc.get(e),c=a&&a.key;if(c){let p=new st(He.comparator);p=p.insert(c,_n.newNoDocument(c,Et.min()));const y=kt().add(c),D=new ff(Et.min(),new Map,new an(Ct),p,y);yield x0(i,D),i.uc=i.uc.remove(c),i.cc.delete(e),p_(i)}else yield Nl(i.localStore,e,!1).then(()=>ch(i,e,t)).catch(Aa)}),Sg.apply(this,arguments)}function tD(n,e){return l_.apply(this,arguments)}function l_(){return l_=(0,ge.Z)(function*(n,e){const t=Ke(n),i=e.batch.batchId;try{const a=yield JI(t.localStore,e);h_(t,i,null),d_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield La(t,a)}catch(a){yield Aa(a)}}),l_.apply(this,arguments)}function nD(n,e,t){return jf.apply(this,arguments)}function jf(){return jf=(0,ge.Z)(function*(n,e,t){const i=Ke(n);try{const a=yield function(c,p){const y=Ke(c);return y.persistence.runTransaction("Reject batch","readwrite-primary",D=>{let T;return y.mutationQueue.lookupMutationBatch(D,p).next(M=>(It(null!==M),T=M.keys(),y.mutationQueue.removeMutationBatch(D,M))).next(()=>y.mutationQueue.performConsistencyCheck(D)).next(()=>y.documentOverlayCache.removeOverlaysForBatchId(D,T,p)).next(()=>y.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(D,T)).next(()=>y.localDocuments.getDocuments(D,T))})}(i.localStore,e);h_(i,e,t),d_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield La(i,a)}catch(a){yield Aa(a)}}),jf.apply(this,arguments)}function Ag(){return Ag=(0,ge.Z)(function*(n,e){const t=Ke(n);Oa(t.remoteStore)||Ne("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(c){const p=Ke(c);return p.persistence.runTransaction("Get highest unacknowledged batch id","readonly",y=>p.mutationQueue.getHighestUnacknowledgedBatchId(y))}(t.localStore);if(-1===i)return void e.resolve();const a=t.lc.get(i)||[];a.push(e),t.lc.set(i,a)}catch(i){const a=Fl(i,"Initialization of waitForPendingWrites() operation failed");e.reject(a)}}),Ag.apply(this,arguments)}function d_(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function h_(n,e,t){const i=Ke(n);let a=i.hc[i.currentUser.toKey()];if(a){const c=a.get(e);c&&(t?c.reject(t):c.resolve(),a=a.remove(e)),i.hc[i.currentUser.toKey()]=a}}function ch(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||R0(n,i)})}function R0(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(nh(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),p_(n))}function f_(n,e,t){for(const i of t)i instanceof T0?(n.ac.addReference(i.key,e),iD(n,i)):i instanceof C0?(Ne("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||R0(n,i.key)):it()}function iD(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(Ne("SyncEngine","New document in limbo: "+t),n.oc.add(i),p_(n))}function p_(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new He(Kt.fromString(e)),i=n.fc.next();n.cc.set(i,new A0(t)),n.uc=n.uc.insert(t,i),Jy(n.remoteStore,new Zi(ii($d(t.path)),i,2,mi.at))}}function La(n,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,ge.Z)(function*(n,e,t){const i=Ke(n),a=[],c=[],p=[];var y;i.ic.isEmpty()||(i.ic.forEach((y,D)=>{p.push(i._c(D,e,t).then(T=>{if((T||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(D.targetId,T?.fromCache?"not-current":"current"),T){a.push(T);const M=fg.Ci(D.targetId,T);c.push(M)}}))}),yield Promise.all(p),i.sc.zo(a),yield(y=(0,ge.Z)(function*(D,T){const M=Ke(D);try{yield M.persistence.runTransaction("notifyLocalViewChanges","readwrite",P=>re.forEach(T,q=>re.forEach(q.Si,te=>M.persistence.referenceDelegate.addReference(P,q.targetId,te)).next(()=>re.forEach(q.Di,te=>M.persistence.referenceDelegate.removeReference(P,q.targetId,te)))))}catch(P){if(!Nr(P))throw P;Ne("LocalStore","Failed to update sequence numbers: "+P)}for(const P of T){const q=P.targetId;if(!P.fromCache){const te=M.Ui.get(q),Fe=te.withLastLimboFreeSnapshotVersion(te.snapshotVersion);M.Ui=M.Ui.insert(q,Fe)}}}),function(D,T){return y.apply(this,arguments)})(i.localStore,c))}),xg.apply(this,arguments)}function k0(n,e){return g_.apply(this,arguments)}function g_(){return g_=(0,ge.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ne("SyncEngine","User change. New user:",e.toKey());const i=yield Mf(t.localStore,e);t.currentUser=e,(a=t).lc.forEach(p=>{p.forEach(y=>{y.reject(new Ce(oe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),a.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield La(t,i.ji)}var a}),g_.apply(this,arguments)}function sD(n,e){const t=Ke(n),i=t.cc.get(e);if(i&&i.nc)return kt().add(i.key);{let a=kt();const c=t.rc.get(e);if(!c)return a;for(const p of c){const y=t.ic.get(p);a=a.unionWith(y.view.ju)}return a}}function P0(n,e){return m_.apply(this,arguments)}function m_(){return m_=(0,ge.Z)(function*(n,e){const t=Ke(n),i=yield Rf(t.localStore,e.query,!0),a=e.view.tc(i);return t.isPrimaryClient&&f_(t,e.targetId,a.Xu),a}),m_.apply(this,arguments)}function oD(n,e){return y_.apply(this,arguments)}function y_(){return y_=(0,ge.Z)(function*(n,e){const t=Ke(n);return $y(t.localStore,e).then(i=>La(t,i))}),y_.apply(this,arguments)}function __(n,e,t,i){return $f.apply(this,arguments)}function $f(){return $f=(0,ge.Z)(function*(n,e,t,i){const a=Ke(n),c=yield function(p,y){const D=Ke(p),T=Ke(D.mutationQueue);return D.persistence.runTransaction("Lookup mutation documents","readonly",M=>T.Tn(M,y).next(P=>P?D.localDocuments.getDocuments(M,P):re.resolve(null)))}(a.localStore,e);var y;null!==c?("pending"===t?yield kl(a.remoteStore):"acknowledged"===t||"rejected"===t?(h_(a,e,i||null),d_(a,e),y=e,Ke(Ke(a.localStore).mutationQueue).An(y)):it(),yield La(a,c)):Ne("SyncEngine","Cannot apply mutation batch with id: "+e)}),$f.apply(this,arguments)}function Hf(){return Hf=(0,ge.Z)(function*(n,e){const t=Ke(n);if(F0(t),Ng(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),a=yield L0(t,i.toArray());t.dc=!0,yield Ol(t.remoteStore,!0);for(const c of a)Jy(t.remoteStore,c)}else if(!1===e&&!1!==t.dc){const i=[];let a=Promise.resolve();t.rc.forEach((c,p)=>{t.sharedClientState.isLocalQueryTarget(p)?i.push(p):a=a.then(()=>(ch(t,p),Nl(t.localStore,p,!0))),nh(t.remoteStore,p)}),yield a,yield L0(t,i),function(c){const p=Ke(c);p.cc.forEach((y,D)=>{nh(p.remoteStore,D)}),p.ac.fs(),p.cc=new Map,p.uc=new st(He.comparator)}(t),t.dc=!1,yield Ol(t.remoteStore,!1)}}),Hf.apply(this,arguments)}function L0(n,e,t){return v_.apply(this,arguments)}function v_(){return v_=(0,ge.Z)(function*(n,e,t){const i=Ke(n),a=[],c=[];for(const p of e){let y;const D=i.rc.get(p);if(D&&0!==D.length){y=yield Ml(i.localStore,ii(D[0]));for(const T of D){const M=i.ic.get(T),P=yield P0(i,M);P.snapshot&&c.push(P.snapshot)}}else{const T=yield jy(i.localStore,p);y=yield Ml(i.localStore,T),yield c_(i,Mg(T),p,!1,y.resumeToken)}a.push(y)}return i.sc.zo(c),a}),v_.apply(this,arguments)}function Mg(n){return aI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function aD(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function uD(n,e,t,i){return lc.apply(this,arguments)}function lc(){return lc=(0,ge.Z)(function*(n,e,t,i){const a=Ke(n);if(a.dc)return void Ne("SyncEngine","Ignoring unexpected query state notification.");const c=a.rc.get(e);if(c&&c.length>0)switch(t){case"current":case"not-current":{const p=yield $y(a.localStore,uE(c[0])),y=ff.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,pr.EMPTY_BYTE_STRING);yield La(a,p,y);break}case"rejected":yield Nl(a.localStore,e,!0),ch(a,e,i);break;default:it()}}),lc.apply(this,arguments)}function cD(n,e,t){return I_.apply(this,arguments)}function I_(){return I_=(0,ge.Z)(function*(n,e,t){const i=F0(n);if(i.dc){for(const a of e){if(i.rc.has(a)){Ne("SyncEngine","Adding an already active target "+a);continue}const c=yield jy(i.localStore,a),p=yield Ml(i.localStore,c);yield c_(i,Mg(c),p.targetId,!1,p.resumeToken),Jy(i.remoteStore,p)}for(const a of t)i.rc.has(a)&&(yield Nl(i.localStore,a,!1).then(()=>{nh(i.remoteStore,a),ch(i,a)}).catch(Aa))}}),I_.apply(this,arguments)}function F0(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=x0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=N0.bind(null,e),e.sc.zo=Sb.bind(null,e.eventManager),e.sc.wc=D0.bind(null,e.eventManager),e}function Ng(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=tD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=nD.bind(null,e),e}class V0{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,ge.Z)(function*(){t.It=th(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Vy(this.persistence,new YI,e.initialUser,this.It)}yc(e){return new Es(xf.Bs,this.It)}gc(e){return new r0}terminate(){var e=this;return(0,ge.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class E_ extends V0{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield Ng(i.Ac.syncEngine),yield kl(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Vy(this.persistence,new YI,e.initialUser,this.It)}Tc(e,t){return new kE(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new eE(t,this.persistence);return new Xw(e.asyncQueue,i)}yc(e){const t=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?xi.withCacheSize(this.cacheSizeBytes):xi.DEFAULT;return new Ly(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,Yy(),Pf(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new r0}}class lD extends E_{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,ge.Z)(function*(){yield t().call(i,e);const a=i.Ac.syncEngine;i.sharedClientState instanceof Zy&&(i.sharedClientState.syncEngine={Fr:__.bind(null,a),$r:uD.bind(null,a),Br:cD.bind(null,a),vi:aD.bind(null,a),Mr:oD.bind(null,a)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var c=(0,ge.Z)(function*(p){yield function O0(n,e){return Hf.apply(this,arguments)}(i.Ac.syncEngine,p),i.gcScheduler&&(p&&!i.gcScheduler.started?i.gcScheduler.start():p||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(p&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():p||i.indexBackfillerScheduler.stop())});return function(p){return c.apply(this,arguments)}}())})()}gc(e){const t=Yy();if(!Zy.C(t))throw new Ce(oe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Fy(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Zy(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class D_{initialize(e,t){var i=this;return(0,ge.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=a=>M0(i.syncEngine,a,1),i.remoteStore.remoteSyncer.handleCredentialChange=k0.bind(null,i.syncEngine),yield Ol(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new KE}createDatastore(e){const t=th(e.databaseInfo.databaseId),i=new o0(e.databaseInfo);return new c0(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,a=e.asyncQueue,c=y=>M0(this.syncEngine,y,0),p=s0.C()?new s0:new UE,new HE(t,i,a,c,p);var t,i,a,c,p}createSyncEngine(e,t){return function(i,a,c,p,y,D,T){const M=new QE(i,a,c,p,y,D);return T&&(M.dc=!0),M}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,ge.Z)(function*(t){const i=Ke(t);Ne("RemoteStore","RemoteStore shutting down."),i.wu.add(5),yield Lf(i),i.gu.shutdown(),i.yu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Gf(n,e,t){if(!t)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function b_(n,e,t,i){if(!0===e&&!0===i)throw new Ce(oe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function T_(n){if(!He.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function C_(n){if(He.isDocumentKey(n))throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function zf(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":it()}function Gt(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Ce(oe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=zf(n);throw new Ce(oe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function B0(n,e){if(e<=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const U0=new Map;class j0{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Ce(oe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Ce(oe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,b_("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class lh{constructor(e,t,i,a){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Ce(oe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j0(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new jv;switch(t.type){case"gapi":return new Kw(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Ce(oe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=U0.get(e);t&&(Ne("ComponentProvider","Removing Datastore"),U0.delete(e),t.terminate())}(this),Promise.resolve()}}class vn{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new vn(this.firestore,e,this._key)}}class oi{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new oi(this.firestore,e,this._query)}}class Bo extends oi{constructor(e,t,i){super(e,t,$d(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new vn(this.firestore,null,new He(e))}withConverter(e){return new Bo(this.firestore,e,this._path)}}function hD(n,e,...t){if(n=(0,Vt.m9)(n),Gf("collection","path",e),n instanceof lh){const i=Kt.fromString(e,...t);return C_(i),new Bo(n,null,i)}{if(!(n instanceof vn||n instanceof Bo))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(e,...t));return C_(i),new Bo(n.firestore,null,i)}}function Rg(n,e,...t){if(n=(0,Vt.m9)(n),1===arguments.length&&(e=jm.R()),Gf("doc","path",e),n instanceof lh){const i=Kt.fromString(e,...t);return T_(i),new vn(n,null,new He(i))}{if(!(n instanceof vn||n instanceof Bo))throw new Ce(oe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Kt.fromString(e,...t));return T_(i),new vn(n.firestore,n instanceof Bo?n.converter:null,new He(i))}}function $0(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),(n instanceof vn||n instanceof Bo)&&(e instanceof vn||e instanceof Bo)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function S_(n,e){return n=(0,Vt.m9)(n),e=(0,Vt.m9)(e),n instanceof oi&&e instanceof oi&&n.firestore===e.firestore&&ml(n._query,e._query)&&n.converter===e.converter}function H0(n,e=10240){let t=0;return{read:()=>(0,ge.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,ge.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class kg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):yn("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class fD{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new vr,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.payload)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,ge.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,ge.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),a=Number(i);isNaN(a)&&e.Dc(`length string (${i}) is not valid number`);const c=yield e.Cc(a);return new ZE(JSON.parse(c),t.length+a)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,ge.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,ge.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,ge.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class mD{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,ge.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Ce(oe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(a=(0,ge.Z)(function*(c,p){const y=Ke(c),D=eg(y.It)+"/documents",T={documents:p.map(te=>wl(y.It,te))},M=yield y._o("BatchGetDocuments",D,T,p.length),P=new Map;M.forEach(te=>{const ue=function TI(n,e){return"found"in e?function(t,i){It(!!i.found);const a=Wi(t,i.found.name),c=kr(i.found.updateTime),p=new ri({mapValue:{fields:i.found.fields}});return _n.newFoundDocument(a,c,p)}(n,e):"missing"in e?function(t,i){It(!!i.missing),It(!!i.readTime);const a=Wi(t,i.missing),c=kr(i.readTime);return _n.newNoDocument(a,c)}(n,e):it()}(y.It,te);P.set(ue.key.toString(),ue)});const q=[];return p.forEach(te=>{const ue=P.get(te.toString());It(!!ue),q.push(ue)}),q}),function(c,p){return a.apply(this,arguments)})(t.datastore,e);var a;return i.forEach(a=>t.recordVersion(a)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new Gd(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ge.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,a)=>{const c=He.fromPath(a);e.mutations.push(new mI(c,e.precondition(c)))}),yield(i=(0,ge.Z)(function*(a,c){const p=Ke(a),y=eg(p.It)+"/documents",D={writes:c.map(T=>qi(p.It,T))};yield p.ao("Commit",y,D)}),function(a,c){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw it();t=Et.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new Ce(oe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Et.min())?Rn.exists(!1):Rn.updateTime(t):Rn.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Et.min()))throw new Ce(oe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rn.updateTime(t)}return Rn.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class yD{constructor(e,t,i,a,c){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=a,this.deferred=c,this.kc=i.maxAttempts,this.No=new yg(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.No.Ro((0,ge.Z)(function*(){const t=new mD(e.datastore),i=e.Mc(t);i&&i.then(a=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(a)}).catch(c=>{e.Fc(c)}))}).catch(a=>{e.Fc(a)})}))}Mc(e){try{const t=this.updateFunction(e);return!sf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!uy(t)}return!1}}class _D{constructor(e,t,i,a){var c=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=a,this.user=Mr.UNAUTHENTICATED,this.clientId=jm.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var p=(0,ge.Z)(function*(y){Ne("FirestoreClient","Received user=",y.uid),yield c.authCredentialListener(y),c.user=y});return function(y){return p.apply(this,arguments)}}()),this.appCheckCredentials.start(i,p=>(Ne("FirestoreClient","Received new app check token=",p),this.appCheckCredentialListener(p,this.user)))}getConfiguration(){var e=this;return(0,ge.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Ce(oe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const a=Fl(i,"Failed to shutdown persistence");t.reject(a)}})),t.promise}}function dh(n,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ne("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var a=(0,ge.Z)(function*(c){i.isEqual(c)||(yield Mf(e.localStore,c),i=c)});return function(c){return a.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Pg.apply(this,arguments)}function A_(n,e){return Og.apply(this,arguments)}function Og(){return Og=(0,ge.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield Lg(n);Ne("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(a=>n_(e.remoteStore,a)),n.setAppCheckTokenChangeListener((a,c)=>n_(e.remoteStore,c)),n.onlineComponents=e}),Og.apply(this,arguments)}function Lg(n){return Fg.apply(this,arguments)}function Fg(){return Fg=(0,ge.Z)(function*(n){return n.offlineComponents||(Ne("FirestoreClient","Using default OfflineComponentProvider"),yield dh(n,new V0)),n.offlineComponents}),Fg.apply(this,arguments)}function Vg(n){return x_.apply(this,arguments)}function x_(){return x_=(0,ge.Z)(function*(n){return n.onlineComponents||(Ne("FirestoreClient","Using default OnlineComponentProvider"),yield A_(n,new D_)),n.onlineComponents}),x_.apply(this,arguments)}function vD(n){return Lg(n).then(e=>e.persistence)}function Bg(n){return Lg(n).then(e=>e.localStore)}function M_(n){return Vg(n).then(e=>e.remoteStore)}function N_(n){return Vg(n).then(e=>e.syncEngine)}function hh(n){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,ge.Z)(function*(n){const e=yield Vg(n),t=e.eventManager;return t.onListen=JE.bind(null,e.syncEngine),t.onUnlisten=XE.bind(null,e.syncEngine),t}),Ul.apply(this,arguments)}function z0(n,e,t={}){const i=new vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,p,y,D){const T=new kg({next:P=>{c.enqueueAndForget(()=>w0(a,M));const q=P.docs.has(p);!q&&P.fromCache?D.reject(new Ce(oe.UNAVAILABLE,"Failed to get document because the client is offline.")):q&&P.fromCache&&y&&"server"===y.source?D.reject(new Ce(oe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):D.resolve(P)},error:P=>D.reject(P)}),M=new a_($d(p.path),T,{includeMetadataChanges:!0,ku:!0});return o_(a,M)}(yield hh(n),n.asyncQueue,e,t,i)})),i.promise}function fh(n,e,t={}){const i=new vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function(a,c,p,y,D){const T=new kg({next:P=>{c.enqueueAndForget(()=>w0(a,M)),P.fromCache&&"server"===y.source?D.reject(new Ce(oe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):D.resolve(P)},error:P=>D.reject(P)}),M=new a_(p,T,{includeMetadataChanges:!0,ku:!0});return o_(a,M)}(yield hh(n),n.asyncQueue,e,t,i)})),i.promise}class Ug{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.No=new yg(this,"async_queue_retry"),this.Wc=()=>{const t=Pf();t&&Ne("AsyncQueue","Visibility state changed to "+t.visibilityState),this.No.Po()};const e=Pf();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Pf();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new vr;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,ge.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.No.reset()}catch(t){if(!Nr(t))throw t;Ne("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.No.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,yn("INTERNAL UNHANDLED ERROR: ",function(c){let p=c.message||"";return c.stack&&(p=c.stack.includes(c.message)?c.stack:c.message+"\n"+c.stack),p}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const a=i_.createAndSchedule(this,e,t,i,c=>this.Yc(c));return this.qc.push(a),a}zc(){this.Kc&&it()}verifyOperationInProgress(){}Xc(){var e=this;return(0,ge.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function ph(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const a of["next","error","complete"])if(a in i&&"function"==typeof i[a])return!0;return!1}(n)}class bD{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class In extends lh{constructor(e,t,i,a){super(e,t,i,a),this.type="firestore",this._queue=new Ug,this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||q0(this),this._firestoreClient.terminate()}}function Qn(n){return n._firestoreClient||q0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function q0(n){var e;const t=n._freezeSettings(),i=(c=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Km(n._databaseId,c,n._persistenceKey,(y=t).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,y.useFetchStreams));var c,y;n._firestoreClient=new _D(n._authCredentials,n._appCheckCredentials,n._queue,i)}function jg(n,e,t){const i=new vr;return n.asyncQueue.enqueue((0,ge.Z)(function*(){try{yield dh(n,t),yield A_(n,e),i.resolve()}catch(a){const c=a;if(!("FirebaseError"===(p=c).name?p.code===oe.FAILED_PRECONDITION||p.code===oe.UNIMPLEMENTED:!(typeof DOMException<"u"&&p instanceof DOMException)||22===p.code||20===p.code||11===p.code))throw c;Ca("Error enabling offline persistence. Falling back to persistence disabled: "+c),i.reject(c)}var p})).then(()=>i.promise)}function Z0(n){if(n._initialized||n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Js{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Js(pr.fromBase64String(e))}catch(t){throw new Ce(oe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Js(pr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Xs{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Ce(oe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class jl{constructor(e){this._methodName=e}}class $g{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Ce(oe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Ce(oe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ct(this._lat,e._lat)||Ct(this._long,e._long)}}const MD=/^__.*__$/;class ND{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Il(e,this.data,t,this.fieldTransforms)}}class F_{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Zs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function V_(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw it()}}class Hg{constructor(e,t,i,a,c,p){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=a,void 0===c&&this.na(),this.fieldTransforms=c||[],this.fieldMask=p||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.ua(e),a}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),a=this.ia({path:i,oa:!1});return a.na(),a}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Wf(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(V_(this.sa)&&MD.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class Y0{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||th(e)}da(e,t,i,a=!1){return new Hg({sa:e,methodName:t,fa:i,path:Nn.emptyPath(),oa:!1,la:a},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function $l(n){const e=n._freezeSettings(),t=th(n._databaseId);return new Y0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Pr(n,e,t,i,a,c={}){const p=n.da(c.merge||c.mergeFields?2:0,e,t,a);j_("Data must be an object, but it was:",p,i);const y=ew(i,p);let D,T;if(c.merge)D=new Si(p.fieldMask),T=p.fieldTransforms;else if(c.mergeFields){const M=[];for(const P of c.mergeFields){const q=$_(e,P,t);if(!p.contains(q))throw new Ce(oe.INVALID_ARGUMENT,`Field '${q}' is specified in your field mask but missing from your input data.`);H_(M,q)||M.push(q)}D=new Si(M),T=p.fieldTransforms.filter(P=>D.covers(P.field))}else D=null,T=p.fieldTransforms;return new ND(new ri(y),D,T)}class Uo extends jl{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Uo}}function Q0(n,e,t){return new Hg({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class B_ extends jl{_toFieldTransform(e){return new lf(e.path,new yl)}isEqual(e){return e instanceof B_}}class kb extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Q0(this,e,!0),i=this._a.map(c=>Va(c,t)),a=new Na(i);return new lf(e.path,a)}isEqual(e){return this===e}}class Pb extends jl{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=Q0(this,e,!0),i=this._a.map(c=>Va(c,t)),a=new Ra(i);return new lf(e.path,a)}isEqual(e){return this===e}}class J0 extends jl{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Gi(e.It,hE(e.It,this.wa));return new lf(e.path,t)}isEqual(e){return this===e}}function Gg(n,e,t,i){const a=n.da(1,e,t);j_("Data must be an object, but it was:",a,i);const c=[],p=ri.empty();cl(i,(D,T)=>{const M=gh(e,D,t);T=(0,Vt.m9)(T);const P=a.ca(M);if(T instanceof Uo)c.push(M);else{const q=Va(T,P);null!=q&&(c.push(M),p.set(M,q))}});const y=new Si(c);return new F_(p,y,a.fieldTransforms)}function Hl(n,e,t,i,a,c){const p=n.da(1,e,t),y=[$_(e,i,t)],D=[a];if(c.length%2!=0)throw new Ce(oe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let q=0;q<c.length;q+=2)y.push($_(e,c[q])),D.push(c[q+1]);const T=[],M=ri.empty();for(let q=y.length-1;q>=0;--q)if(!H_(T,y[q])){const te=y[q];let ue=D[q];ue=(0,Vt.m9)(ue);const Fe=p.ca(te);if(ue instanceof Uo)T.push(te);else{const Be=Va(ue,Fe);null!=Be&&(T.push(te),M.set(te,Be))}}const P=new Si(T);return new F_(M,P,p.fieldTransforms)}function X0(n,e,t,i=!1){return Va(t,n.da(i?4:3,e))}function Va(n,e){if(U_(n=(0,Vt.m9)(n)))return j_("Unsupported field value:",e,n),ew(n,e);if(n instanceof jl)return function(t,i){if(!V_(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const a=t._toFieldTransform(i);a&&i.fieldTransforms.push(a)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const a=[];let c=0;for(const p of t){let y=Va(p,i.aa(c));null==y&&(y={nullValue:"NULL_VALUE"}),a.push(y),c++}return{arrayValue:{values:a}}}(n,e)}return function(t,i){if(null===(t=(0,Vt.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return hE(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const a=pn.fromDate(t);return{timestampValue:mf(i.It,a)}}if(t instanceof pn){const a=new pn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:mf(i.It,a)}}if(t instanceof $g)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Js)return{bytesValue:DI(i.It,t._byteString)};if(t instanceof vn){const a=i.databaseId,c=t.firestore._databaseId;if(!c.isEqual(a))throw i.ha(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${a.projectId}/${a.database}`);return{referenceValue:py(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${zf(t)}`)}(n,e)}function ew(n,e){const t={};return Yv(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):cl(n,(i,a)=>{const c=Va(a,e.ra(i));null!=c&&(t[i]=c)}),{mapValue:{fields:t}}}function U_(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof pn||n instanceof $g||n instanceof Js||n instanceof vn||n instanceof jl)}function j_(n,e,t){if(!U_(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=zf(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function $_(n,e,t){if((e=(0,Vt.m9)(e))instanceof Xs)return e._internalPath;if("string"==typeof e)return gh(n,e);throw Wf("Field path arguments must be of type string or ",n,!1,void 0,t)}const RD=new RegExp("[~\\*/\\[\\]]");function gh(n,e,t){if(e.search(RD)>=0)throw Wf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xs(...e.split("."))._internalPath}catch{throw Wf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Wf(n,e,t,i,a){const c=i&&!i.isEmpty(),p=void 0!==a;let y=`Function ${e}() called with invalid data`;t&&(y+=" (via `toFirestore()`)"),y+=". ";let D="";return(c||p)&&(D+=" (found",c&&(D+=` in field ${i}`),p&&(D+=` in document ${a}`),D+=")"),new Ce(oe.INVALID_ARGUMENT,y+n+D)}function H_(n,e){return n.some(t=>t.isEqual(e))}class dc{constructor(e,t,i,a,c){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new vn(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new G_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class G_ extends dc{data(){return super.data()}}function z_(n,e){return"string"==typeof e?gh(n,e):e instanceof Xs?e._internalPath:e._delegate._internalPath}function W_(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Ce(oe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class qf{}function Ba(n,...e){for(const t of e)n=t._apply(n);return n}class mh extends qf{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=$l(e.firestore),i=function(a,c,p,y,D,T,M){let P;if(D.isKeyField()){if("array-contains"===T||"array-contains-any"===T)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${T}' queries on documentId().`);if("in"===T||"not-in"===T){iw(M,T);const te=[];for(const ue of M)te.push(Y_(y,a,ue));P={arrayValue:{values:te}}}else P=Y_(y,a,M)}else"in"!==T&&"not-in"!==T&&"array-contains-any"!==T||iw(M,T),P=X0(p,"where",M,"in"===T||"not-in"===T);const q=Cn.create(D,T,P);return function(te,ue){if(ue.dt()){const Be=ty(te);if(null!==Be&&!Be.isEqual(ue.field))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Be.toString()}' and '${ue.field.toString()}'`);const Mt=uI(te);null!==Mt&&sw(0,ue.field,Mt)}const Fe=function(Be,Mt){for(const Bt of Be.filters)if(Mt.indexOf(Bt.op)>=0)return Bt.op;return null}(te,function(Be){switch(Be){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(ue.op));if(null!==Fe)throw new Ce(oe.INVALID_ARGUMENT,Fe===ue.op?`Invalid query. You cannot use more than one '${ue.op.toString()}' filter.`:`Invalid query. You cannot use '${ue.op.toString()}' filters with '${Fe.toString()}' filters.`)}(a,q),q}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new oi(e.firestore,e.converter,function(a,c){const p=a.filters.concat([c]);return new Ma(a.path,a.collectionGroup,a.explicitOrderBy.slice(),p,a.limit,a.limitType,a.startAt,a.endAt)}(e._query,i))}}class tw extends qf{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,a,c){if(null!==i.startAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const p=new Wu(a,c);return function(y,D){if(null===uI(y)){const T=ty(y);null!==T&&sw(0,T,D.field)}}(i,p),p}(e._query,this.ma,this.pa);return new oi(e.firestore,e.converter,function(i,a){const c=i.explicitOrderBy.concat([a]);return new Ma(i.path,i.collectionGroup,c,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class PD extends qf{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new oi(e.firestore,e.converter,qp(e._query,this.Ia,this.Ta))}}class nw extends qf{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=Z_(e,this.type,this.Ea,this.Aa);return new oi(e.firestore,e.converter,(a=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,a,i.endAt)));var i,a}}class K_ extends qf{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=Z_(e,this.type,this.Ea,this.Aa);return new oi(e.firestore,e.converter,(a=t,new Ma((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,a)));var i,a}}function Z_(n,e,t,i){if(t[0]=(0,Vt.m9)(t[0]),t[0]instanceof dc)return function(a,c,p,y,D){if(!y)throw new Ce(oe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${p}().`);const T=[];for(const M of gl(a))if(M.field.isKeyField())T.push(hl(c,y.key));else{const P=y.data.field(M.field);if(Fp(P))throw new Ce(oe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+M.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===P){const q=M.field.canonicalString();throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${q}' (used as the orderBy) does not exist.`)}T.push(P)}return new Oo(T,D)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const a=$l(n.firestore);return function(c,p,y,D,T,M){const P=c.explicitOrderBy;if(T.length>P.length)throw new Ce(oe.INVALID_ARGUMENT,`Too many arguments provided to ${D}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const q=[];for(let te=0;te<T.length;te++){const ue=T[te];if(P[te].field.isKeyField()){if("string"!=typeof ue)throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${D}(), but got a ${typeof ue}`);if(!cI(c)&&-1!==ue.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${D}() must be a plain document ID, but '${ue}' contains a slash.`);const Fe=c.path.child(Kt.fromString(ue));if(!He.isDocumentKey(Fe))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${D}() must result in a valid document path, but '${Fe}' is not because it contains an odd number of segments.`);const Be=new He(Fe);q.push(hl(p,Be))}else{const Fe=X0(y,D,ue);q.push(Fe)}}return new Oo(q,M)}(n._query,n.firestore._databaseId,a,e,t,i)}}function Y_(n,e,t){if("string"==typeof(t=(0,Vt.m9)(t))){if(""===t)throw new Ce(oe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cI(e)&&-1!==t.indexOf("/"))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Kt.fromString(t));if(!He.isDocumentKey(i))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return hl(n,new He(i))}if(t instanceof vn)return hl(n,t._key);throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zf(t)}.`)}function iw(n,e){if(!Array.isArray(n)||0===n.length)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Ce(oe.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function sw(n,e,t){if(!t.isEqual(e))throw new Ce(oe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class zg{convertValue(e,t="none"){switch(Gu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return sr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes($u(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw it()}}convertObject(e,t){const i={};return cl(e.fields,(a,c)=>{i[a]=this.convertValue(c,t)}),i}convertGeoPoint(e){return new $g(sr(e.latitude),sr(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Hu(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(rf(e));default:return null}}convertTimestamp(e){const t=ju(e);return new pn(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Kt.fromString(e);It(AI(i));const a=new Po(i.get(1),i.get(3)),c=new He(i.popFirst(5));return a.isEqual(t)||yn(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),c}}function Wg(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class ow extends zg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}class hc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jo extends dc{constructor(e,t,i,a,c,p){super(e,t,i,a,p),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new yh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(z_("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class yh extends jo{data(e={}){return super.data(e)}}class fc{constructor(e,t,i,a){this._firestore=e,this._userDataWriter=t,this._snapshot=a,this.metadata=new hc(a.hasPendingWrites,a.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new yh(this._firestore,this._userDataWriter,i.key,i,new hc(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Ce(oe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,a){if(i._snapshot.oldDocs.isEmpty()){let c=0;return i._snapshot.docChanges.map(p=>({type:"added",doc:new yh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new hc(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:c++}))}{let c=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(p=>a||3!==p.type).map(p=>{const y=new yh(i._firestore,i._userDataWriter,p.doc.key,p.doc,new hc(i._snapshot.mutatedKeys.has(p.doc.key),i._snapshot.fromCache),i.query.converter);let D=-1,T=-1;return 0!==p.type&&(D=c.indexOf(p.doc.key),c=c.delete(p.doc.key)),1!==p.type&&(c=c.add(p.doc),T=c.indexOf(p.doc.key)),{type:BD(p.type),doc:y,oldIndex:D,newIndex:T}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function BD(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return it()}}function UD(n,e){return n instanceof jo&&e instanceof jo?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof fc&&e instanceof fc&&n._firestore===e._firestore&&S_(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Gl extends zg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Js(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new vn(this.firestore,null,t)}}function jD(n,e,t){n=Gt(n,vn);const i=Gt(n.firestore,In),a=Wg(n.converter,e,t);return zl(i,[Pr($l(i),"setDoc",n._key,a,null!==n.converter,t).toMutation(n._key,Rn.none())])}function $D(n,e,t,...i){n=Gt(n,vn);const a=Gt(n.firestore,In),c=$l(a);let p;return p="string"==typeof(e=(0,Vt.m9)(e))||e instanceof Xs?Hl(c,"updateDoc",n._key,e,t,i):Gg(c,"updateDoc",n._key,e),zl(a,[p.toMutation(n._key,Rn.exists(!0))])}function Q_(n,...e){var t,i,a;n=(0,Vt.m9)(n);let c={includeMetadataChanges:!1},p=0;"object"!=typeof e[p]||ph(e[p])||(c=e[p],p++);const y={includeMetadataChanges:c.includeMetadataChanges};if(ph(e[p])){const P=e[p];e[p]=null===(t=P.next)||void 0===t?void 0:t.bind(P),e[p+1]=null===(i=P.error)||void 0===i?void 0:i.bind(P),e[p+2]=null===(a=P.complete)||void 0===a?void 0:a.bind(P)}let D,T,M;if(n instanceof vn)T=Gt(n.firestore,In),M=$d(n._key.path),D={next:P=>{e[p]&&e[p](Zg(T,n,P))},error:e[p+1],complete:e[p+2]};else{const P=Gt(n,oi);T=Gt(P.firestore,In),M=P._query;const q=new Gl(T);D={next:te=>{e[p]&&e[p](new fc(T,q,P,te))},error:e[p+1],complete:e[p+2]},W_(n._query)}return function(P,q,te,ue){const Fe=new kg(ue),Be=new a_(q,Fe,te);return P.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return o_(yield hh(P),Be)})),()=>{Fe.bc(),P.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return w0(yield hh(P),Be)}))}}(Qn(T),M,y,D)}function zl(n,e){return function(t,i){const a=new vr;return t.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function eD(n,e,t){return Cg.apply(this,arguments)}(yield N_(t),i,a)})),a.promise}(Qn(n),e)}function Zg(n,e,t){const i=t.docs.get(e._key),a=new Gl(n);return new jo(n,a,e._key,i,new hc(t.hasPendingWrites,t.fromCache),e.converter)}const cw={maxAttempts:5};class lw{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$l(e)}set(e,t,i){this._verifyNotCommitted();const a=pc(e,this._firestore),c=Wg(a.converter,t,i),p=Pr(this._dataReader,"WriteBatch.set",a._key,c,null!==a.converter,i);return this._mutations.push(p.toMutation(a._key,Rn.none())),this}update(e,t,i,...a){this._verifyNotCommitted();const c=pc(e,this._firestore);let p;return p="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Xs?Hl(this._dataReader,"WriteBatch.update",c._key,t,i,a):Gg(this._dataReader,"WriteBatch.update",c._key,t),this._mutations.push(p.toMutation(c._key,Rn.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=pc(e,this._firestore);return this._mutations=this._mutations.concat(new Gd(t._key,Rn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Ce(oe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function pc(n,e){if((n=(0,Vt.m9)(n)).firestore!==e)throw new Ce(oe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class $b extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$l(e)}get(e){const t=pc(e,this._firestore),i=new ow(this._firestore);return this._transaction.lookup([t._key]).then(a=>{if(!a||1!==a.length)return it();const c=a[0];if(c.isFoundDocument())return new dc(this._firestore,i,c.key,c,t.converter);if(c.isNoDocument())return new dc(this._firestore,i,t._key,null,t.converter);throw it()})}set(e,t,i){const a=pc(e,this._firestore),c=Wg(a.converter,t,i),p=Pr(this._dataReader,"Transaction.set",a._key,c,null!==a.converter,i);return this._transaction.set(a._key,p),this}update(e,t,i,...a){const c=pc(e,this._firestore);let p;return p="string"==typeof(t=(0,Vt.m9)(t))||t instanceof Xs?Hl(this._dataReader,"Transaction.update",c._key,t,i,a):Gg(this._dataReader,"Transaction.update",c._key,t),this._transaction.update(c._key,p),this}delete(e){const t=pc(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pc(e,this._firestore),i=new Gl(this._firestore);return super.get(e).then(a=>new jo(this._firestore,i,t._key,a._document,new hc(!1,!1),t.converter))}}function hw(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ce("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function fw(){if(typeof Uint8Array>"u")throw new Ce("unimplemented","Uint8Arrays are not available in this environment.")}function J_(){if(!function tE(){return typeof atob<"u"}())throw new Ce("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Ld=gi.SDK_VERSION,(0,gi._registerComponent)(new _o.wA("firestore",(t,{instanceIdentifier:i,options:a})=>{const c=t.getProvider("app").getImmediate(),p=new In(new $v(t.getProvider("auth-internal")),new Gv(t.getProvider("app-check-internal")),function(y,D){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new Ce(oe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Po(y.options.projectId,D)}(c,i),c);return a=Object.assign({useFetchStreams:e},a),p._setSettings(a),p},"PUBLIC").setMultipleInstances(!0)),(0,gi.registerVersion)(Od,"3.7.1",n),(0,gi.registerVersion)(Od,"3.7.1","esm2017")}();class _h{constructor(e){this._delegate=e}static fromBase64String(e){return J_(),new _h(Js.fromBase64String(e))}static fromUint8Array(e){return fw(),new _h(Js.fromUint8Array(e))}toBase64(){return J_(),this._delegate.toBase64()}toUint8Array(){return fw(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function pw(n){return function eo(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class WD{enableIndexedDbPersistence(e,t){return function SD(n,e){Z0(n=Gt(n,In));const t=Qn(n),i=n._freezeSettings(),a=new D_;return jg(t,a,new E_(a,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Mb(n){Z0(n=Gt(n,In));const e=Qn(n),t=n._freezeSettings(),i=new D_;return jg(e,i,new lD(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function P_(n){if(n._initialized&&!n._terminated)throw new Ce(oe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,ge.Z)(function*(){try{yield(t=(0,ge.Z)(function*(i){if(!vs.C())return Promise.resolve();const a=i+"main";yield vs.delete(a)}),function(i){return t.apply(this,arguments)})(Fy(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Qg{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof Po||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Ca("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function dD(n,e,t,i={}){var a;const c=(n=Gt(n,lh))._getSettings();if("firestore.googleapis.com"!==c.host&&c.host!==e&&Ca("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},c),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let p,y;if("string"==typeof i.mockUserToken)p=i.mockUserToken,y=Mr.MOCK_USER;else{p=(0,Vt.Sg)(i.mockUserToken,null===(a=n._app)||void 0===a?void 0:a.options.projectId);const D=i.mockUserToken.sub||i.mockUserToken.user_id;if(!D)throw new Ce(oe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");y=new Mr(D)}n._authCredentials=new Bm(new Uv(p,y))}}(this._delegate,e,t,i)}enableNetwork(){return function O_(n){return function ID(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield vD(n),t=yield M_(n);return e.setNetworkEnabled(!0),function(i){const a=Ke(i);return a.wu.delete(0),Of(a)}(t)}))}(Qn(n=Gt(n,In)))}(this._delegate)}disableNetwork(){return function L_(n){return function R_(n){return n.asyncQueue.enqueue((0,ge.Z)(function*(){const e=yield vD(n),t=yield M_(n);return e.setNetworkEnabled(!1),(i=(0,ge.Z)(function*(a){const c=Ke(a);c.wu.add(0),yield Lf(c),c.yu.set("Offline")}),function(a){return i.apply(this,arguments)})(t);var i}))}(Qn(n=Gt(n,In)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,b_("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function K0(n){return function(e){const t=new vr;return e.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return function rD(n,e){return Ag.apply(this,arguments)}(yield N_(e),t)})),t.promise}(Qn(n=Gt(n,In)))}(this._delegate)}onSnapshotsInSync(e){return function Kg(n,e){return function wD(n,e){const t=new kg(e);return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield hh(n),a=t,Ke(i).bu.add(a),void a.next();var i,a})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return i=yield hh(n),a=t,void Ke(i).bu.delete(a);var i,a}))}}(Qn(n=Gt(n,In)),ph(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Ce("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Ih(this,hD(this._delegate,e))}catch(t){throw Wr(t,"collection()","Firestore.collection()")}}doc(e){try{return new bs(this,Rg(this._delegate,e))}catch(t){throw Wr(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ai(this,function Ab(n,e){if(n=Gt(n,lh),Gf("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ce(oe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new oi(n,null,(t=e,new Ma(Kt.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Wr(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Hb(n,e,t){n=Gt(n,In);const i=Object.assign(Object.assign({},cw),t);return function(a){if(a.maxAttempts<1)throw new Ce(oe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(a,c,p){const y=new vr;return a.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){const D=yield function G0(n){return Vg(n).then(e=>e.datastore)}(a);new yD(a.asyncQueue,D,p,c,y).run()})),y.promise}(Qn(n),a=>e(new $b(n,a)),i)}(this._delegate,t=>e(new gw(this,t)))}batch(){return Qn(this._delegate),new Xg(new lw(this._delegate,e=>zl(this._delegate,e)))}loadBundle(e){return function AD(n,e){const t=Qn(n=Gt(n,In)),i=new bD;return function ED(n,e,t,i){const a=function(c,p){let y;return y="string"==typeof c?(new TextEncoder).encode(c):c,D=function(D,T){if(D instanceof Uint8Array)return H0(D,T);if(D instanceof ArrayBuffer)return H0(new Uint8Array(D),T);if(D instanceof ReadableStream)return D.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(y),new fD(D,p);var D}(t,th(e));n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){!function w_(n,e,t){const i=Ke(n);var a;(a=(0,ge.Z)(function*(c,p,y){try{const D=yield p.getMetadata();if(yield function(q,te){const ue=Ke(q),Fe=kr(te.createTime);return ue.persistence.runTransaction("hasNewerBundle","readonly",Be=>ue.Ns.getBundleMetadata(Be,te.id)).then(Be=>!!Be&&Be.createTime.compareTo(Fe)>=0)}(c.localStore,D))return yield p.close(),y._completeWith({taskState:"Success",documentsLoaded:(q=D).totalDocuments,bytesLoaded:q.totalBytes,totalDocuments:q.totalDocuments,totalBytes:q.totalBytes}),Promise.resolve(new Set);y._updateProgress(b0(D));const T=new Bf(D,c.localStore,p.It);let M=yield p.mc();for(;M;){const q=yield T.Fu(M);q&&y._updateProgress(q),M=yield p.mc()}const P=yield T.complete();return yield La(c,P.Lu,void 0),yield function(q,te){const ue=Ke(q);return ue.persistence.runTransaction("Save bundle","readwrite",Fe=>ue.Ns.saveBundleMetadata(Fe,te))}(c.localStore,D),y._completeWith(P.progress),Promise.resolve(P.Bu)}catch(D){return Ca("SyncEngine",`Loading bundle failed with ${D}`),y._failWith(D),Promise.resolve(new Set)}var q}),function(c,p,y){return a.apply(this,arguments)})(i,e,t).then(a=>{i.sharedClientState.notifyBundleLoaded(a)})}(yield N_(n),a,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function xD(n,e){return function DD(n,e){return n.asyncQueue.enqueue((0,ge.Z)(function*(){return function(t,i){const a=Ke(t);return a.persistence.runTransaction("Get named query","readonly",c=>a.Ns.getNamedQuery(c,i))}(yield Bg(n),e)}))}(Qn(n=Gt(n,In)),e).then(t=>t?new oi(n,null,t.query):null)}(this._delegate,e).then(t=>t?new ai(this,t):null)}}class Jg extends zg{constructor(e){super(),this.firestore=e}convertBytes(e){return new _h(new Js(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return bs.forKey(t,this.firestore,null)}}class gw{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Jg(e)}get(e){const t=Ua(e);return this._delegate.get(t).then(i=>new Kf(this._firestore,new jo(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const a=Ua(e);return i?(hw("Transaction.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=Ua(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=Ua(e);return this._delegate.delete(t),this}}class Xg{constructor(e){this._delegate=e}set(e,t,i){const a=Ua(e);return i?(hw("WriteBatch.set",i),this._delegate.set(a,t,i)):this._delegate.set(a,t),this}update(e,t,i,...a){const c=Ua(e);return 2===arguments.length?this._delegate.update(c,t):this._delegate.update(c,t,i,...a),this}delete(e){const t=Ua(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wl{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new yh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new vh(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=Wl.INSTANCES;let a=i.get(e);a||(a=new WeakMap,i.set(e,a));let c=a.get(t);return c||(c=new Wl(e,new Jg(e),t),a.set(t,c)),c}}Wl.INSTANCES=new WeakMap;class bs{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jg(e)}static forPath(e,t,i){if(e.length%2!=0)throw new Ce("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new bs(t,new vn(t._delegate,i,new He(e)))}static forKey(e,t,i){return new bs(t,new vn(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new Ih(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Ih(this.firestore,hD(this._delegate,e))}catch(t){throw Wr(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Vt.m9)(e))instanceof vn&&$0(this._delegate,e)}set(e,t){t=hw("DocumentReference.set",t);try{return t?jD(this._delegate,e,t):jD(this._delegate,e)}catch(i){throw Wr(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?$D(this._delegate,e):$D(this._delegate,e,t,...i)}catch(a){throw Wr(a,"updateDoc()","DocumentReference.update()")}}delete(){return function qg(n){return zl(Gt(n.firestore,In),[new Gd(n._key,Rn.none())])}(this._delegate)}onSnapshot(...e){const t=X_(e),i=ev(e,a=>new Kf(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)));return Q_(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function Lb(n){n=Gt(n,vn);const e=Gt(n.firestore,In),t=Qn(e),i=new Gl(e);return function Fa(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(a,c,p){try{const y=yield function(D,T){const M=Ke(D);return M.persistence.runTransaction("read document","readonly",P=>M.localDocuments.getDocument(P,T))}(a,c);y.isFoundDocument()?p.resolve(y):y.isNoDocument()?p.resolve(null):p.reject(new Ce(oe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(y){const D=Fl(y,`Failed to get document '${c} from cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield Bg(n),e,t);var i})),t.promise}(t,n._key).then(a=>new jo(e,i,n._key,a,new hc(null!==a&&a.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function Fb(n){n=Gt(n,vn);const e=Gt(n.firestore,In);return z0(Qn(e),n._key,{source:"server"}).then(t=>Zg(e,n,t))}(this._delegate):function aw(n){n=Gt(n,vn);const e=Gt(n.firestore,In);return z0(Qn(e),n._key).then(t=>Zg(e,n,t))}(this._delegate),t.then(i=>new Kf(this.firestore,new jo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new bs(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}function Wr(n,e,t){return n.message=n.message.replace(e,t),n}function X_(n){for(const e of n)if("object"==typeof e&&!pw(e))return e;return{}}function ev(n,e){var t,i;let a;return a=pw(n[0])?n[0]:pw(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:c=>{a.next&&a.next(e(c))},error:null===(t=a.error)||void 0===t?void 0:t.bind(a),complete:null===(i=a.complete)||void 0===i?void 0:i.bind(a)}}class Kf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new bs(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return UD(this._delegate,e._delegate)}}class vh extends Kf{data(e){const t=this._delegate.data(e);return function qw(n,e){n||it()}(void 0!==t),t}}class ai{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Jg(e)}where(e,t,i){try{return new ai(this.firestore,Ba(this._delegate,function kD(n,e,t){const i=e,a=z_("where",n);return new mh(a,i,t)}(e,t,i)))}catch(a){throw Wr(a,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ai(this.firestore,Ba(this._delegate,function q_(n,e="asc"){const t=e,i=z_("orderBy",n);return new tw(i,t)}(e,t)))}catch(i){throw Wr(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ai(this.firestore,Ba(this._delegate,function OD(n){return B0("limit",n),new PD("limit",n,"F")}(e)))}catch(t){throw Wr(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ai(this.firestore,Ba(this._delegate,function Ob(n){return B0("limitToLast",n),new PD("limitToLast",n,"L")}(e)))}catch(t){throw Wr(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ai(this.firestore,Ba(this._delegate,function LD(...n){return new nw("startAt",n,!0)}(...e)))}catch(t){throw Wr(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ai(this.firestore,Ba(this._delegate,function FD(...n){return new nw("startAfter",n,!1)}(...e)))}catch(t){throw Wr(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ai(this.firestore,Ba(this._delegate,function rw(...n){return new K_("endBefore",n,!1)}(...e)))}catch(t){throw Wr(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ai(this.firestore,Ba(this._delegate,function VD(...n){return new K_("endAt",n,!0)}(...e)))}catch(t){throw Wr(t,"endAt()","Query.endAt()")}}isEqual(e){return S_(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Bb(n){n=Gt(n,oi);const e=Gt(n.firestore,In),t=Qn(e),i=new Gl(e);return function k_(n,e){const t=new vr;return n.asyncQueue.enqueueAndForget((0,ge.Z)(function*(){return(i=(0,ge.Z)(function*(a,c,p){try{const y=yield Rf(a,c,!0),D=new S0(c,y.Hi),T=D.Wu(y.documents),M=D.applyChanges(T,!1);p.resolve(M.snapshot)}catch(y){const D=Fl(y,`Failed to execute query '${c} against cache`);p.reject(D)}}),function(a,c,p){return i.apply(this,arguments)})(yield Bg(n),e,t);var i})),t.promise}(t,n._query).then(a=>new fc(e,i,n,a))}(this._delegate):"server"===e?.source?function Ub(n){n=Gt(n,oi);const e=Gt(n.firestore,In),t=Qn(e),i=new Gl(e);return fh(t,n._query,{source:"server"}).then(a=>new fc(e,i,n,a))}(this._delegate):function Vb(n){n=Gt(n,oi);const e=Gt(n.firestore,In),t=Qn(e),i=new Gl(e);return W_(n._query),fh(t,n._query).then(a=>new fc(e,i,n,a))}(this._delegate),t.then(i=>new em(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=X_(e),i=ev(e,a=>new em(this.firestore,new fc(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)));return Q_(this._delegate,t,i)}withConverter(e){return new ai(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}class qD{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new vh(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class em{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ai(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new vh(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new qD(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new vh(this._firestore,i))})}isEqual(e){return UD(this._delegate,e._delegate)}}class Ih extends ai{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new bs(this.firestore,e):null}doc(e){try{return new bs(this.firestore,void 0===e?Rg(this._delegate):Rg(this._delegate,e))}catch(t){throw Wr(t,"doc()","CollectionReference.doc()")}}add(e){return function jb(n,e){const t=Gt(n.firestore,In),i=Rg(n),a=Wg(n.converter,e);return zl(t,[Pr($l(n.firestore),"addDoc",i._key,a,null!==n.converter,{}).toMutation(i._key,Rn.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new bs(this.firestore,t))}isEqual(e){return $0(this._delegate,e._delegate)}withConverter(e){return new Ih(this.firestore,this._delegate.withConverter(e?Wl.getInstance(this.firestore,e):null))}}function Ua(n){return Gt(n,vn)}class $o{constructor(...e){this._delegate=new Xs(...e)}static documentId(){return new $o(Nn.keyField().canonicalString())}isEqual(e){return(e=(0,Vt.m9)(e))instanceof Xs&&this._delegate._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function HD(){return new B_("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new gc(e)}static delete(){const e=function Gb(){return new Uo("deleteField")}();return e._methodName="FieldValue.delete",new gc(e)}static arrayUnion(...e){const t=function Yg(...n){return new kb("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new gc(t)}static arrayRemove(...e){const t=function GD(...n){return new Pb("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new gc(t)}static increment(e){const t=function zb(n){return new J0("increment",n)}(e);return t._methodName="FieldValue.increment",new gc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const tv={Firestore:Qg,GeoPoint:$g,Timestamp:pn,Blob:_h,Transaction:gw,WriteBatch:Xg,DocumentReference:bs,DocumentSnapshot:Kf,Query:ai,QueryDocumentSnapshot:vh,QuerySnapshot:em,CollectionReference:Ih,FieldPath:$o,FieldValue:gc,setLogLevel:function Ds(n){!function Bv(n){ko.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function KD(n){(function ja(n,e){n.INTERNAL.registerComponent(new _o.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),a=t.getProvider("firestore").getImmediate();return e(i,a)},"PUBLIC").setServiceProps(Object.assign({},tv)))})(n,(e,t)=>new Qg(e,t,new WD)),n.registerVersion("@firebase/firestore-compat","0.2.1")}(pa.Z);var ZD=L(7579),YD=L(6451),nv=L(5363),QD=L(8421);function mc(n,e){return(0,ps.e)((t,i)=>{let a=null,c=0,p=!1;const y=()=>p&&!a&&i.complete();t.subscribe((0,ei.x)(i,D=>{a?.unsubscribe();let T=0;const M=c++;(0,QD.Xf)(n(D,M)).subscribe(a=(0,ei.x)(i,P=>i.next(e?e(D,P,M,T++):P),()=>{a=null,y()}))},()=>{p=!0,y()}))})}var mw=L(6063);class qb extends ZD.x{constructor(e=1/0,t=1/0,i=mw.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:i,_infiniteTimeWindow:a,_timestampProvider:c,_windowTime:p}=this;t||(i.push(e),!a&&i.push(c.now()+p)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:i,_buffer:a}=this,c=a.slice();for(let p=0;p<c.length&&!e.closed;p+=i?1:2)e.next(c[p]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:a}=this,c=(a?1:2)*e;if(e<1/0&&c<i.length&&i.splice(0,i.length-c),!a){const p=t.now();let y=0;for(let D=1;D<i.length&&i[D]<=p;D+=2)y=D;y&&i.splice(0,y+1)}}}var yw=L(3099);function _w(n,e,t){let i,a=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:e=1/0,refCount:a=!1,scheduler:t}=n):i=n??1/0,(0,yw.B)({connector:()=>new qb(i,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}const JD=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var rv=L(515);function Iw(n){return n<=0?()=>rv.E:(0,ps.e)((e,t)=>{let i=0;e.subscribe((0,ei.x)(t,a=>{++i<=n&&(t.next(a),n<=i&&t.complete())}))})}function ww(n){return(0,ps.e)((e,t)=>{let i=!1;e.subscribe((0,ei.x)(t,a=>{i=!0,t.next(a)},()=>{i||t.next(n),t.complete()}))})}function Ew(n=Dw){return(0,ps.e)((e,t)=>{let i=!1;e.subscribe((0,ei.x)(t,a=>{i=!0,t.next(a)},()=>i?t.complete():t.error(n())))})}function Dw(){return new JD}var iv=L(576);function Zf(n,e){return(0,iv.m)(e)?mc(()=>n,e):mc(()=>n)}var tm=L(9468);L(5867);const Aw=new Map,rb={activated:!1,tokenObservers:[]},xw={initialized:!1,enabled:!1};function kn(n){return Aw.get(n)||rb}function Yi(n,e){Aw.set(n,e)}function wh(){return xw}class Jb{constructor(e,t,i,a,c){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=i,this.lowerBound=a,this.upperBound=c,this.pending=null,this.nextErrorWaitInterval=a,a>c)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,ge.Z)(function*(){t.stop();try{t.pending=new Vt.BH,yield function Xb(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new Vt.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(i){t.retryPolicy(i)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ui=new Vt.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Mw(n){if(!kn(n).activated)throw ui.create("use-before-activation",{appName:n.name})}function im(n,e){return sm.apply(this,arguments)}function sm(){return sm=(0,ge.Z)(function*({url:n,body:e},t){var i,a;const c={"Content-Type":"application/json"},p=t.getImmediate({optional:!0});if(p){const te=yield p.getHeartbeatsHeader();te&&(c["X-Firebase-Client"]=te)}const y={method:"POST",body:JSON.stringify(e),headers:c};let D,T;try{D=yield fetch(n,y)}catch(te){throw ui.create("fetch-network-error",{originalErrorMessage:null===(i=te)||void 0===i?void 0:i.message})}if(200!==D.status)throw ui.create("fetch-status-error",{httpStatus:D.status});try{T=yield D.json()}catch(te){throw ui.create("fetch-parse-error",{originalErrorMessage:null===(a=te)||void 0===a?void 0:a.message})}const M=T.ttl.match(/^([\d.]+)(s)$/);if(!M||!M[2]||isNaN(Number(M[1])))throw ui.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${T.ttl}`});const P=1e3*Number(M[1]),q=Date.now();return{token:T.token,expireTimeMillis:q+P,issuedAtTimeMillis:q}}),sm.apply(this,arguments)}function ob(n,e){const{projectId:t,appId:i,apiKey:a}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${i}:exchangeDebugToken?key=${a}`,body:{debug_token:e}}}const om="firebase-app-check-store";let Eh=null;function kw(){return Eh||(Eh=new Promise((n,e)=>{var t;try{const i=indexedDB.open("firebase-app-check-database",1);i.onsuccess=a=>{n(a.target.result)},i.onerror=a=>{var c;e(ui.create("storage-open",{originalErrorMessage:null===(c=a.target.error)||void 0===c?void 0:c.message}))},i.onupgradeneeded=a=>{0===a.oldVersion&&a.target.result.createObjectStore(om,{keyPath:"compositeKey"})}}catch(i){e(ui.create("storage-open",{originalErrorMessage:null===(t=i)||void 0===t?void 0:t.message}))}}),Eh)}function Ow(){return Ow=(0,ge.Z)(function*(n,e){const i=(yield kw()).transaction(om,"readwrite"),c=i.objectStore(om).put({compositeKey:n,value:e});return new Promise((p,y)=>{c.onsuccess=D=>{p()},i.onerror=D=>{var T;y(ui.create("storage-set",{originalErrorMessage:null===(T=D.target.error)||void 0===T?void 0:T.message}))}})}),Ow.apply(this,arguments)}const am=new Cr.Yd("@firebase/app-check");function Fw(n,e){return(0,Vt.hl)()?function tT(n,e){return function Pw(n,e){return Ow.apply(this,arguments)}(function lb(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{am.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function db(){return wh().enabled}function hb(){return Bw.apply(this,arguments)}function Bw(){return Bw=(0,ge.Z)(function*(){const n=wh();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),Bw.apply(this,arguments)}const s={error:"UNKNOWN_ERROR"};function o(n){return Vt.US.encodeString(JSON.stringify(n),!1)}function u(n){return l.apply(this,arguments)}function l(){return l=(0,ge.Z)(function*(n,e=!1){const t=n.app;Mw(t);const i=kn(t);let c,a=i.token;if(a&&!x(a)&&(Yi(t,Object.assign(Object.assign({},i),{token:void 0})),a=void 0),!a){const D=yield i.cachedTokenPromise;D&&(x(D)?a=D:yield Fw(t,void 0))}if(!e&&a&&x(a))return{token:a.token};let y,p=!1;if(db()){i.exchangeTokenPromise||(i.exchangeTokenPromise=im(ob(t,yield hb()),n.heartbeatServiceProvider).finally(()=>{i.exchangeTokenPromise=void 0}),p=!0);const D=yield i.exchangeTokenPromise;return yield Fw(t,D),Yi(t,Object.assign(Object.assign({},i),{token:D})),{token:D.token}}try{i.exchangeTokenPromise||(i.exchangeTokenPromise=i.provider.getToken().finally(()=>{i.exchangeTokenPromise=void 0}),p=!0),a=yield i.exchangeTokenPromise}catch(D){"appCheck/throttled"===D.code?am.warn(D.message):am.error(D),c=D}return a?c?y=x(a)?{token:a.token,internalError:c}:R(c):(y={token:a.token},Yi(t,Object.assign(Object.assign({},i),{token:a})),yield Fw(t,a)):y=R(c),p&&C(t,y),y}),l.apply(this,arguments)}function m(n,e){const t=kn(n),i=t.tokenObservers.filter(a=>a.next!==e);0===i.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),Yi(n,Object.assign(Object.assign({},t),{tokenObservers:i}))}function v(n){const{app:e}=n,t=kn(e);let i=t.tokenRefresher;i||(i=function w(n){const{app:e}=n;return new Jb((0,ge.Z)(function*(){let i;if(i=kn(e).token?yield u(n,!0):yield u(n),i.error)throw i.error;if(i.internalError)throw i.internalError}),()=>!0,()=>{const t=kn(e);if(t.token){let i=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return i=Math.min(i,t.token.expireTimeMillis-3e5),Math.max(0,i-Date.now())}return 0},3e4,96e4)}(n),Yi(e,Object.assign(Object.assign({},t),{tokenRefresher:i}))),!i.isRunning()&&t.isTokenAutoRefreshEnabled&&i.start()}function C(n,e){const t=kn(n).tokenObservers;for(const i of t)try{"EXTERNAL"===i.type&&null!=e.error?i.error(e.error):i.next(e)}catch{}}function x(n){return n.expireTimeMillis-Date.now()>0}function R(n){return{token:o(s),error:n}}class j{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=kn(this.app);for(const t of e)m(this.app,t.next);return Promise.resolve()}}const sT="app-check-internal";!function LT(){(0,gi._registerComponent)(new _o.wA("app-check",n=>function J(n,e){return new j(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(sT).initialize()})),(0,gi._registerComponent)(new _o.wA(sT,n=>function ye(n){return{getToken:e=>u(n,e),addTokenListener:e=>function h(n,e,t,i){const{app:a}=n,c=kn(a),p={next:t,error:i,type:e};if(Yi(a,Object.assign(Object.assign({},c),{tokenObservers:[...c.tokenObservers,p]})),c.token&&x(c.token)){const y=c.token;Promise.resolve().then(()=>{t({token:y.token}),v(n)}).catch(()=>{})}c.cachedTokenPromise.then(()=>v(n))}(n,"INTERNAL",e),removeTokenListener:e=>m(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,gi.registerVersion)("@firebase/app-check","0.5.15")}();class gb{constructor(){return(0,qn.vb)("app-check")}}typeof window<"u"&&window;var jT=L(127);const aT=new I.OlP("angularfire2.auth.use-emulator"),uT=new I.OlP("angularfire2.auth.settings"),cT=new I.OlP("angularfire2.auth.tenant-id"),lT=new I.OlP("angularfire2.auth.langugage-code"),dT=new I.OlP("angularfire2.auth.use-device-language"),hT=new I.OlP("angularfire.auth.persistence"),fT=(n,e,t,i,a,c,p,y)=>(0,jr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const D=e.runOutsideAngular(()=>n.auth());if(t&&D.useEmulator(...t),i&&(D.tenantId=i),D.languageCode=a,c&&D.useDeviceLanguage(),p)for(const[T,M]of Object.entries(p))D.settings[T]=M;return y&&D.setPersistence(y),D},[t,i,a,c,p,y]);let pT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,M,P,q,te){const ue=new ZD.x,Fe=dr(void 0).pipe((0,nv.Q)(p.outsideAngular),mc(()=>c.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,9545)))),(0,hr.U)(()=>(0,jr.on)(t,c,i)),(0,hr.U)(Be=>fT(Be,c,y,T,M,P,D,q)),_w({bufferSize:1,refCount:!1}));if(lr(a))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=dr(null);else{Fe.pipe(function bw(n,e){const t=arguments.length>=2;return i=>i.pipe(n?yo((a,c)=>n(a,c,i)):$s.y,Iw(1),t?ww(e):Ew(()=>new JD))}()).subscribe();const Mt=Fe.pipe(mc(Pt=>Pt.getRedirectResult().then(Nt=>Nt,()=>null)),qn.iC,_w({bufferSize:1,refCount:!1})),Bt=Fe.pipe(mc(Pt=>new zc.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>Pt.onAuthStateChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))})))),Lt=Fe.pipe(mc(Pt=>new zc.y(Nt=>({unsubscribe:c.runOutsideAngular(()=>Pt.onIdTokenChanged(Ut=>Nt.next(Ut),Ut=>Nt.error(Ut),()=>Nt.complete()))}))));this.authState=Mt.pipe(Zf(Bt),(0,tm.R)(p.outsideAngular),(0,nv.Q)(p.insideAngular)),this.user=Mt.pipe(Zf(Lt),(0,tm.R)(p.outsideAngular),(0,nv.Q)(p.insideAngular)),this.idToken=this.user.pipe(mc(Pt=>Pt?(0,pi.D)(Pt.getIdToken()):dr(null))),this.idTokenResult=this.user.pipe(mc(Pt=>Pt?(0,pi.D)(Pt.getIdTokenResult()):dr(null))),this.credential=(0,YD.T)(Mt,ue,this.authState.pipe(yo(Pt=>!Pt))).pipe((0,hr.U)(Pt=>Pt?.user?Pt:null),(0,tm.R)(p.outsideAngular),(0,nv.Q)(p.insideAngular))}return(0,jr.pX)(this,Fe,c,{spy:{apply:(Be,Mt,Bt)=>{(Be.startsWith("signIn")||Be.startsWith("createUser"))&&Bt.then(Lt=>ue.next(Lt))}}})}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(jr.Dh),I.LFG(jr.xv,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(qn.HU),I.LFG(aT,8),I.LFG(uT,8),I.LFG(cT,8),I.LFG(lT,8),I.LFG(dT,8),I.LFG(hT,8),I.LFG(gb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function gT(n,e){return function HT(n,e=go.z){return new zc.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function yb(n,e){return gT(n,e).pipe((0,hr.U)(t=>({payload:t,type:"query"})))}function Uw(n,e){return yb(n,e).pipe(ha(void 0),gs(),(0,hr.U)(([t,i])=>{const a=i.payload.docChanges(),c=a.map(p=>({type:p.type,payload:p}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((p,y)=>{const D=a.find(M=>M.doc.ref.isEqual(p.ref)),T=t?.payload.docs.find(M=>M.ref.isEqual(p.ref));D&&JSON.stringify(D.doc.metadata)===JSON.stringify(p.metadata)||!D&&T&&JSON.stringify(T.metadata)===JSON.stringify(p.metadata)||c.push({type:"modified",payload:{oldIndex:y,newIndex:y,type:"modified",doc:p}})}),c}))}function mT(n,e,t){return Uw(n,t).pipe(fa((i,a)=>function zT(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function WT(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return _b(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return _b(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _b(n,e.oldIndex,1)}return n}(n,i))}),n}(i,a.map(c=>c.payload),e),[]),function fd(n,e=$s.y){return n=n??Wc,(0,ps.e)((t,i)=>{let a,c=!0;t.subscribe((0,ei.x)(i,p=>{const y=e(p);(c||!n(a,y))&&(c=!1,a=y,i.next(p))}))})}(),(0,hr.U)(i=>i.map(a=>({type:a.type,payload:a}))))}function _b(n,e,t,...i){const a=n.slice();return a.splice(e,t,...i),a}function yT(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class _T{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=Uw(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,hr.U)(i=>i.filter(a=>e.indexOf(a.type)>-1)))),t.pipe(ha(void 0),gs(),yo(([i,a])=>a.length>0||!i),(0,hr.U)(([i,a])=>a),qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(fa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=yT(e);return mT(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return yb(this.query,this.afs.schedulers.outsideAngular).pipe((0,hr.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),qn.iC)}get(e){return(0,pi.D)(this.query.get(e)).pipe(qn.iC)}add(e){return this.ref.add(e)}doc(e){return new vT(this.ref.doc(e),this.afs)}}class vT{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:a,query:c}=ET(i,t);return new _T(a,c,this.afs)}snapshotChanges(){return function GT(n,e){return gT(n,e).pipe(ha(void 0),gs(),(0,hr.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,hr.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,pi.D)(this.ref.get(e)).pipe(qn.iC)}}class qT{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?Uw(this.query,this.afs.schedulers.outsideAngular).pipe((0,hr.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),yo(t=>t.length>0),qn.iC):Uw(this.query,this.afs.schedulers.outsideAngular).pipe(qn.iC)}auditTrail(e){return this.stateChanges(e).pipe(fa((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=yT(e);return mT(this.query,t,this.afs.schedulers.outsideAngular).pipe(qn.iC)}valueChanges(e={}){return yb(this.query,this.afs.schedulers.outsideAngular).pipe((0,hr.U)(i=>i.payload.docs.map(a=>e.idField?Object.assign({[e.idField]:a.id},a.data()):a.data())),qn.iC)}get(e){return(0,pi.D)(this.query.get(e)).pipe(qn.iC)}}const IT=new I.OlP("angularfire2.enableFirestorePersistence"),wT=new I.OlP("angularfire2.firestore.persistenceSettings"),KT=new I.OlP("angularfire2.firestore.settings"),ZT=new I.OlP("angularfire2.firestore.use-emulator");function ET(n,e=(t=>t)){return{query:e(n),ref:n}}let DT=(()=>{class n{constructor(t,i,a,c,p,y,D,T,M,P,q,te,ue,Fe,Be,Mt,Bt){this.schedulers=D;const Lt=(0,jr.on)(t,y,i),Pt=M;P&&fT(Lt,y,q,ue,Fe,Be,te,Mt),[this.firestore,this.persistenceEnabled$]=(0,jr.cc)(`${Lt.name}.firestore`,"AngularFirestore",Lt.name,()=>{const Nt=y.runOutsideAngular(()=>Lt.firestore());if(c&&Nt.settings(c),Pt&&Nt.useEmulator(...Pt),a&&!lr(p)){const Ut=()=>{try{return(0,pi.D)(Nt.enablePersistence(T||void 0).then(()=>!0,()=>!1))}catch(qr){return typeof console<"u"&&console.warn(qr),dr(!1)}};return[Nt,y.runOutsideAngular(Ut)]}return[Nt,dr(!1)]},[c,Pt,a])}collection(t,i){let a;a="string"==typeof t?this.firestore.collection(t):t;const{ref:c,query:p}=ET(a,i),y=this.schedulers.ngZone.run(()=>c);return new _T(y,p,this)}collectionGroup(t,i){const a=i||(p=>p),c=this.firestore.collectionGroup(t);return new qT(a(c),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const a=this.schedulers.ngZone.run(()=>i);return new vT(a,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(jr.Dh),I.LFG(jr.xv,8),I.LFG(IT,8),I.LFG(KT,8),I.LFG(I.Lbi),I.LFG(I.R0b),I.LFG(qn.HU),I.LFG(wT,8),I.LFG(ZT,8),I.LFG(pT,8),I.LFG(aT,8),I.LFG(uT,8),I.LFG(cT,8),I.LFG(lT,8),I.LFG(dT,8),I.LFG(hT,8),I.LFG(gb,8))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),YT=(()=>{class n{constructor(){jT.Z.registerVersion("angularfire",qn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:IT,useValue:!0},{provide:wT,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n}),n.\u0275inj=I.cJS({providers:[DT]}),n})(),QT=(()=>{class n{constructor(t){this.firestore=t,this.firestoreCollection=t.collection("todos")}addTodo(t){this.firestoreCollection.add({title:t,isDone:!1})}updateTodoStatus(t,i){this.firestoreCollection.doc(t).update({isDone:i})}deleteTodo(t){this.firestoreCollection.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(I.LFG(DT))},n.\u0275prov=I.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function JT(n,e){if(1&n){const t=I.EpF();I.TgZ(0,"li",12)(1,"span")(2,"i",13),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onStatusChange(c.id,!c.isDone))}),I.qZA(),I._uU(3),I.TgZ(4,"span",14),I.NdJ("click",function(){const c=I.CHM(t).$implicit,p=I.oxw();return I.KtG(p.onDelete(c.id))}),I._UZ(5,"i",15),I.qZA()()()}if(2&n){const t=e.$implicit;I.xp6(2),I.Q6J("ngClass",t.isDone?"fa-solid fa-circle-check":"fa-regular fa-circle"),I.xp6(1),I.hij(" ",t.title," ")}}let XT=(()=>{class n{constructor(t){this.todoService=t,this.todos=[]}ngOnInit(){this.todoService.firestoreCollection.valueChanges({idField:"id"}).subscribe(t=>{this.todos=t.sort((i,a)=>i.isDone-a.isDone)})}onClick(t){t.value&&(this.todoService.addTodo(t.value),t.value="")}onStatusChange(t,i){this.todoService.updateTodoStatus(t,i)}onDelete(t){this.todoService.deleteTodo(t)}}return n.\u0275fac=function(t){return new(t||n)(I.Y36(QT))},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-todo"]],decls:13,vars:1,consts:[[1,"card","shadow-lg","mt-5"],[1,"card-header","text-center","py-4","border-0"],[1,"display-6","fw-bold"],[1,"card-body","p-4"],[1,"list-group"],[1,"list-group-item","mb-2","border","py-0","rounded-3"],[1,"input-group"],["type","text","placeholder","Title goes here",1,"form-control","border-0","py-3","shadow-none"],["titleInput",""],[1,"btn","text-success","border-0",3,"click"],[1,"fa-solid","fa-circle-plus","fa-xl"],["class","list-group-item mb-2 border py-3 rounded-3",4,"ngFor","ngForOf"],[1,"list-group-item","mb-2","border","py-3","rounded-3"],[1,"text-success",3,"ngClass","click"],[1,"float-end","text-secondary",3,"click"],[1,"fa-solid","fa-trash-can"]],template:function(t,i){if(1&t){const a=I.EpF();I.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),I._uU(3,"To Do List"),I.qZA()(),I.TgZ(4,"div",3)(5,"ul",4)(6,"li",5)(7,"div",6),I._UZ(8,"input",7,8),I.TgZ(10,"button",9),I.NdJ("click",function(){I.CHM(a);const p=I.MAs(9);return I.KtG(i.onClick(p))}),I._UZ(11,"i",10),I.qZA()()(),I.YNc(12,JT,6,2,"li",11),I.qZA()()()}2&t&&(I.xp6(12),I.Q6J("ngForOf",i.todos))},dependencies:[tn,xs],encapsulation:2}),n})(),eC=(()=>{class n{constructor(){this.title="todoApp"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=I.Xpm({type:n,selectors:[["app-root"]],decls:4,vars:0,consts:[[1,"container"],[1,"row","justify-content-center"],[1,"col-md-5"]],template:function(t,i){1&t&&(I.TgZ(0,"div",0)(1,"div",1)(2,"div",2),I._UZ(3,"app-todo"),I.qZA()()())},dependencies:[XT]}),n})();const bT_firebaseConfig={apiKey:"AIzaSyCKYQ631croT7TiSzNu7Rs4bLarIQri9sA",authDomain:"todo-app-762f7.firebaseapp.com",projectId:"todo-app-762f7",storageBucket:"todo-app-762f7.appspot.com",messagingSenderId:"453567343739",appId:"1:453567343739:web:255666efa64235018f06de"};let tC=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=I.oAB({type:n,bootstrap:[eC]}),n.\u0275inj=I.cJS({imports:[jc,jr.hO.initializeApp(bT_firebaseConfig),YT]}),n})();(0,I.G48)(),gu().bootstrapModule(tC).catch(n=>console.error(n))},5867:(dt,Se,L)=>{L.d(Se,{C6:()=>I.getApps,Mq:()=>I.getApp});var I=L(9681);(0,I.registerVersion)("firebase","9.12.1","app")},127:(dt,Se,L)=>{L.d(Se,{Z:()=>I.Z});var I=L(3942);I.Z.registerVersion("firebase","9.12.1","app-compat")},9545:(dt,Se,L)=>{L.r(Se);var I=L(5861),X=L(3942),k=L(2090),ae=L(9681),ie=L(1877),de=L(655),he=L(4859);const Ae=function ze(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},We=function xe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},fe=new k.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),qe=new ie.Yd("@firebase/auth");function Qe(g,...d){qe.logLevel<=ie.in.ERROR&&qe.error(`Auth (${ae.SDK_VERSION}): ${g}`,...d)}function be(g,...d){throw Ve(g,...d)}function me(g,...d){return Ve(g,...d)}function Ie(g,d,f){const _=Object.assign(Object.assign({},We()),{[d]:f});return new k.LL("auth","Firebase",_).create(d,{appName:g.name})}function Ue(g,d,f){if(!(d instanceof f))throw f.name!==d.constructor.name&&be(g,"argument-error"),Ie(g,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Ve(g,...d){if("string"!=typeof g){const f=d[0],_=[...d.slice(1)];return _[0]&&(_[0].appName=g.name),g._errorFactory.create(f,..._)}return fe.create(g,...d)}function V(g,d,...f){if(!g)throw Ve(d,...f)}function ce(g){const d="INTERNAL ASSERTION FAILED: "+g;throw Qe(d),new Error(d)}function H(g,d){g||ce(d)}const Q=new Map;function ne(g){H(g instanceof Function,"Expected a class definition");let d=Q.get(g);return d?(H(d instanceof g,"Instance stored in cache mismatched with class"),d):(d=new g,Q.set(g,d),d)}function Me(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.href)||""}function lt(){return"http:"===zt()||"https:"===zt()}function zt(){var g;return typeof self<"u"&&(null===(g=self.location)||void 0===g?void 0:g.protocol)||null}class en{constructor(d,f){this.shortDelay=d,this.longDelay=f,H(f>d,"Short delay should be less than long delay!"),this.isMobile=(0,k.uI)()||(0,k.b$)()}get(){return function Ot(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(lt()||(0,k.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function un(g,d){H(g.emulator,"Emulator should always be set here");const{url:f}=g.emulator;return d?`${f}${d.startsWith("/")?d.slice(1):d}`:f}class Ht{static initialize(d,f,_){this.fetchImpl=d,f&&(this.headersImpl=f),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void ce("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void ce("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void ce("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Wt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},wr=new en(3e4,6e4);function St(g,d){return g.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:g.tenantId}):d}function nn(g,d,f,_){return Qi.apply(this,arguments)}function Qi(){return(Qi=(0,I.Z)(function*(g,d,f,_,S={}){return ci(g,S,(0,I.Z)(function*(){let N={},G={};_&&("GET"===d?G=_:N={body:JSON.stringify(_)});const se=(0,k.xO)(Object.assign({key:g.config.apiKey},G)).slice(1),Pe=yield g._getAdditionalHeaders();return Pe["Content-Type"]="application/json",g.languageCode&&(Pe["X-Firebase-Locale"]=g.languageCode),Ht.fetch()(li(g,g.config.apiHost,f,se),Object.assign({method:d,headers:Pe,referrerPolicy:"no-referrer"},N))}))})).apply(this,arguments)}function ci(g,d,f){return Er.apply(this,arguments)}function Er(){return(Er=(0,I.Z)(function*(g,d,f){g._canInitEmulator=!1;const _=Object.assign(Object.assign({},Wt),d);try{const S=new Kr(g),N=yield Promise.race([f(),S.promise]);S.clearNetworkTimeout();const G=yield N.json();if("needConfirmation"in G)throw Zr(g,"account-exists-with-different-credential",G);if(N.ok&&!("errorMessage"in G))return G;{const se=N.ok?G.errorMessage:G.error.message,[Pe,Xe]=se.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw Zr(g,"credential-already-in-use",G);if("EMAIL_EXISTS"===Pe)throw Zr(g,"email-already-in-use",G);if("USER_DISABLED"===Pe)throw Zr(g,"user-disabled",G);const gt=_[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(Xe)throw Ie(g,gt,Xe);be(g,gt)}}catch(S){if(S instanceof k.ZR)throw S;be(g,"network-request-failed")}})).apply(this,arguments)}function Or(g,d,f,_){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,I.Z)(function*(g,d,f,_,S={}){const N=yield nn(g,d,f,_,S);return"mfaPendingCredential"in N&&be(g,"multi-factor-auth-required",{_serverResponse:N}),N})).apply(this,arguments)}function li(g,d,f,_){const S=`${d}${f}?${_}`;return g.config.emulator?un(g.config,S):`${g.config.apiScheme}://${S}`}class Kr{constructor(d){this.auth=d,this.timer=null,this.promise=new Promise((f,_)=>{this.timer=setTimeout(()=>_(me(this.auth,"network-request-failed")),wr.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Zr(g,d,f){const _={appName:g.name};f.email&&(_.email=f.email),f.phoneNumber&&(_.phoneNumber=f.phoneNumber);const S=me(g,d,_);return S.customData._tokenResponse=f,S}function Je(){return(Je=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:delete",d)})).apply(this,arguments)}function gr(g,d){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function $n(g,d){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:lookup",d)})).apply(this,arguments)}function vi(g){if(g)try{const d=new Date(Number(g));if(!isNaN(d.getTime()))return d.toUTCString()}catch{}}function sn(){return(sn=(0,I.Z)(function*(g,d=!1){const f=(0,k.m9)(g),_=yield f.getIdToken(d),S=ut(_);V(S&&S.exp&&S.auth_time&&S.iat,f.auth,"internal-error");const N="object"==typeof S.firebase?S.firebase:void 0,G=N?.sign_in_provider;return{claims:S,token:_,authTime:vi(ht(S.auth_time)),issuedAtTime:vi(ht(S.iat)),expirationTime:vi(ht(S.exp)),signInProvider:G||null,signInSecondFactor:N?.sign_in_second_factor||null}})).apply(this,arguments)}function ht(g){return 1e3*Number(g)}function ut(g){var d;const[f,_,S]=g.split(".");if(void 0===f||void 0===_||void 0===S)return Qe("JWT malformed, contained fewer than 3 sections"),null;try{const N=(0,k.tV)(_);return N?JSON.parse(N):(Qe("Failed to decode base64 JWT payload"),null)}catch(N){return Qe("Caught error parsing JWT payload as JSON",null===(d=N)||void 0===d?void 0:d.toString()),null}}function ar(g,d){return On.apply(this,arguments)}function On(){return(On=(0,I.Z)(function*(g,d,f=!1){if(f)return d;try{return yield d}catch(_){throw _ instanceof k.ZR&&Lr(_)&&g.auth.currentUser===g&&(yield g.auth.signOut()),_}})).apply(this,arguments)}function Lr({code:g}){return"auth/user-disabled"===g||"auth/user-token-expired"===g}class bt{constructor(d){this.user=d,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(d){var f;if(d){const _=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),_}{this.errorBackoff=3e4;const S=(null!==(f=this.user.stsTokenManager.expirationTime)&&void 0!==f?f:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(d=!1){var f=this;if(!this.isRunning)return;const _=this.getInterval(d);this.timerId=setTimeout((0,I.Z)(function*(){yield f.iteration()}),_)}iteration(){var d=this;return(0,I.Z)(function*(){var f;try{yield d.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===(null===(f=_)||void 0===f?void 0:f.code)&&d.schedule(!0))}d.schedule()})()}}class Xi{constructor(d,f){this.createdAt=d,this.lastLoginAt=f,this._initializeTime()}_initializeTime(){this.lastSignInTime=vi(this.lastLoginAt),this.creationTime=vi(this.createdAt)}_copy(d){this.createdAt=d.createdAt,this.lastLoginAt=d.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Zt(g){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,I.Z)(function*(g){var d;const f=g.auth,_=yield g.getIdToken(),S=yield ar(g,$n(f,{idToken:_}));V(S?.users.length,f,"internal-error");const N=S.users[0];g._notifyReloadListener(N);const G=null!==(d=N.providerUserInfo)&&void 0!==d&&d.length?tt(N.providerUserInfo):[],se=Dr(g.providerData,G),gt=!!g.isAnonymous&&!(g.email&&N.passwordHash||se?.length),ft={uid:N.localId,displayName:N.displayName||null,photoURL:N.photoUrl||null,email:N.email||null,emailVerified:N.emailVerified||!1,phoneNumber:N.phoneNumber||null,tenantId:N.tenantId||null,providerData:se,metadata:new Xi(N.createdAt,N.lastLoginAt),isAnonymous:gt};Object.assign(g,ft)})).apply(this,arguments)}function Hn(){return(Hn=(0,I.Z)(function*(g){const d=(0,k.m9)(g);yield Zt(d),yield d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)})).apply(this,arguments)}function Dr(g,d){return[...g.filter(_=>!d.some(S=>S.providerId===_.providerId)),...d]}function tt(g){return g.map(d=>{var{providerId:f}=d,_=(0,de._T)(d,["providerId"]);return{providerId:f,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}})}function et(){return(et=(0,I.Z)(function*(g,d){const f=yield ci(g,{},(0,I.Z)(function*(){const _=(0,k.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:S,apiKey:N}=g.config,G=li(g,S,"/v1/token",`key=${N}`),se=yield g._getAdditionalHeaders();return se["Content-Type"]="application/x-www-form-urlencoded",Ht.fetch()(G,{method:"POST",headers:se,body:_})}));return{accessToken:f.access_token,expiresIn:f.expires_in,refreshToken:f.refresh_token}})).apply(this,arguments)}class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(d){V(d.idToken,"internal-error"),V(typeof d.idToken<"u","internal-error"),V(typeof d.refreshToken<"u","internal-error");const f="expiresIn"in d&&typeof d.expiresIn<"u"?Number(d.expiresIn):function Xt(g){const d=ut(g);return V(d,"internal-error"),V(typeof d.exp<"u","internal-error"),V(typeof d.iat<"u","internal-error"),Number(d.exp)-Number(d.iat)}(d.idToken);this.updateTokensAndExpiration(d.idToken,d.refreshToken,f)}getToken(d,f=!1){var _=this;return(0,I.Z)(function*(){return V(!_.accessToken||_.refreshToken,d,"user-token-expired"),f||!_.accessToken||_.isExpired?_.refreshToken?(yield _.refresh(d,_.refreshToken),_.accessToken):null:_.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(d,f){var _=this;return(0,I.Z)(function*(){const{accessToken:S,refreshToken:N,expiresIn:G}=yield function Ee(g,d){return et.apply(this,arguments)}(d,f);_.updateTokensAndExpiration(S,N,Number(G))})()}updateTokensAndExpiration(d,f,_){this.refreshToken=f||null,this.accessToken=d||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(d,f){const{refreshToken:_,accessToken:S,expirationTime:N}=f,G=new vt;return _&&(V("string"==typeof _,"internal-error",{appName:d}),G.refreshToken=_),S&&(V("string"==typeof S,"internal-error",{appName:d}),G.accessToken=S),N&&(V("number"==typeof N,"internal-error",{appName:d}),G.expirationTime=N),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(d){this.accessToken=d.accessToken,this.refreshToken=d.refreshToken,this.expirationTime=d.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return ce("not implemented")}}function _t(g,d){V("string"==typeof g||typeof g>"u","internal-error",{appName:d})}class At{constructor(d){var{uid:f,auth:_,stsTokenManager:S}=d,N=(0,de._T)(d,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new bt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=f,this.auth=_,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=N.displayName||null,this.email=N.email||null,this.emailVerified=N.emailVerified||!1,this.phoneNumber=N.phoneNumber||null,this.photoURL=N.photoURL||null,this.isAnonymous=N.isAnonymous||!1,this.tenantId=N.tenantId||null,this.providerData=N.providerData?[...N.providerData]:[],this.metadata=new Xi(N.createdAt||void 0,N.lastLoginAt||void 0)}getIdToken(d){var f=this;return(0,I.Z)(function*(){const _=yield ar(f,f.stsTokenManager.getToken(f.auth,d));return V(_,f.auth,"internal-error"),f.accessToken!==_&&(f.accessToken=_,yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)),_})()}getIdTokenResult(d){return function Pn(g){return sn.apply(this,arguments)}(this,d)}reload(){return function Yt(g){return Hn.apply(this,arguments)}(this)}_assign(d){this!==d&&(V(this.uid===d.uid,this.auth,"internal-error"),this.displayName=d.displayName,this.photoURL=d.photoURL,this.email=d.email,this.emailVerified=d.emailVerified,this.phoneNumber=d.phoneNumber,this.isAnonymous=d.isAnonymous,this.tenantId=d.tenantId,this.providerData=d.providerData.map(f=>Object.assign({},f)),this.metadata._copy(d.metadata),this.stsTokenManager._assign(d.stsTokenManager))}_clone(d){return new At(Object.assign(Object.assign({},this),{auth:d,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(d){V(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=d,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(d){this.reloadListener?this.reloadListener(d):this.reloadUserInfo=d}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(d,f=!1){var _=this;return(0,I.Z)(function*(){let S=!1;d.idToken&&d.idToken!==_.stsTokenManager.accessToken&&(_.stsTokenManager.updateFromServerResponse(d),S=!0),f&&(yield Zt(_)),yield _.auth._persistUserIfCurrent(_),S&&_.auth._notifyListenersIfCurrent(_)})()}delete(){var d=this;return(0,I.Z)(function*(){const f=yield d.getIdToken();return yield ar(d,function Ho(g,d){return Je.apply(this,arguments)}(d.auth,{idToken:f})),d.stsTokenManager.clearRefreshToken(),d.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(d=>Object.assign({},d)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(d,f){var _,S,N,G,se,Pe,Xe,gt;const ft=null!==(_=f.displayName)&&void 0!==_?_:void 0,Zn=null!==(S=f.email)&&void 0!==S?S:void 0,ni=null!==(N=f.phoneNumber)&&void 0!==N?N:void 0,il=null!==(G=f.photoURL)&&void 0!==G?G:void 0,Wh=null!==(se=f.tenantId)&&void 0!==se?se:void 0,Ou=null!==(Pe=f._redirectEventId)&&void 0!==Pe?Pe:void 0,Ap=null!==(Xe=f.createdAt)&&void 0!==Xe?Xe:void 0,qh=null!==(gt=f.lastLoginAt)&&void 0!==gt?gt:void 0,{uid:xp,emailVerified:xm,isAnonymous:Mm,providerData:Lu,stsTokenManager:Da}=f;V(xp&&Da,d,"internal-error");const Fu=vt.fromJSON(this.name,Da);V("string"==typeof xp,d,"internal-error"),_t(ft,d.name),_t(Zn,d.name),V("boolean"==typeof xm,d,"internal-error"),V("boolean"==typeof Mm,d,"internal-error"),_t(ni,d.name),_t(il,d.name),_t(Wh,d.name),_t(Ou,d.name),_t(Ap,d.name),_t(qh,d.name);const Vu=new At({uid:xp,auth:d,email:Zn,emailVerified:xm,displayName:ft,isAnonymous:Mm,photoURL:il,phoneNumber:ni,tenantId:Wh,stsTokenManager:Fu,createdAt:Ap,lastLoginAt:qh});return Lu&&Array.isArray(Lu)&&(Vu.providerData=Lu.map(Kh=>Object.assign({},Kh))),Ou&&(Vu._redirectEventId=Ou),Vu}static _fromIdTokenResponse(d,f,_=!1){return(0,I.Z)(function*(){const S=new vt;S.updateFromServerResponse(f);const N=new At({uid:f.localId,auth:d,stsTokenManager:S,isAnonymous:_});return yield Zt(N),N})()}}const F=(()=>{class g{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,I.Z)(function*(){return!0})()}_set(f,_){var S=this;return(0,I.Z)(function*(){S.storage[f]=_})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=_.storage[f];return void 0===S?null:S})()}_remove(f){var _=this;return(0,I.Z)(function*(){delete _.storage[f]})()}_addListener(f,_){}_removeListener(f,_){}}return g.type="NONE",g})();function z(g,d,f){return`firebase:${g}:${d}:${f}`}class _e{constructor(d,f,_){this.persistence=d,this.auth=f,this.userKey=_;const{config:S,name:N}=this.auth;this.fullUserKey=z(this.userKey,S.apiKey,N),this.fullPersistenceKey=z("persistence",S.apiKey,N),this.boundEventHandler=f._onStorageEvent.bind(f),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(d){return this.persistence._set(this.fullUserKey,d.toJSON())}getCurrentUser(){var d=this;return(0,I.Z)(function*(){const f=yield d.persistence._get(d.fullUserKey);return f?At._fromJSON(d.auth,f):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(d){var f=this;return(0,I.Z)(function*(){if(f.persistence===d)return;const _=yield f.getCurrentUser();return yield f.removeCurrentUser(),f.persistence=d,_?f.setCurrentUser(_):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(d,f,_="authUser"){return(0,I.Z)(function*(){if(!f.length)return new _e(ne(F),d,_);const S=(yield Promise.all(f.map(function(){var Xe=(0,I.Z)(function*(gt){if(yield gt._isAvailable())return gt});return function(gt){return Xe.apply(this,arguments)}}()))).filter(Xe=>Xe);let N=S[0]||ne(F);const G=z(_,d.config.apiKey,d.name);let se=null;for(const Xe of f)try{const gt=yield Xe._get(G);if(gt){const ft=At._fromJSON(d,gt);Xe!==N&&(se=ft),N=Xe;break}}catch{}const Pe=S.filter(Xe=>Xe._shouldAllowMigration);return N._shouldAllowMigration&&Pe.length?(N=Pe[0],se&&(yield N._set(G,se.toJSON())),yield Promise.all(f.map(function(){var Xe=(0,I.Z)(function*(gt){if(gt!==N)try{yield gt._remove(G)}catch{}});return function(gt){return Xe.apply(this,arguments)}}())),new _e(N,d,_)):new _e(N,d,_)})()}}function K(g){const d=g.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(rn(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";if(d.includes("edge/"))return"Edge";if($e(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(Oe(d))return"Blackberry";if(je(d))return"Webos";if(ct(d))return"Safari";if((d.includes("chrome/")||qt(d))&&!d.includes("edge/"))return"Chrome";if(jt(d))return"Android";{const _=g.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===_?.length)return _[1]}return"Other"}function $e(g=(0,k.z$)()){return/firefox\//i.test(g)}function ct(g=(0,k.z$)()){const d=g.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function qt(g=(0,k.z$)()){return/crios\//i.test(g)}function rn(g=(0,k.z$)()){return/iemobile/i.test(g)}function jt(g=(0,k.z$)()){return/android/i.test(g)}function Oe(g=(0,k.z$)()){return/blackberry/i.test(g)}function je(g=(0,k.z$)()){return/webos/i.test(g)}function Rt(g=(0,k.z$)()){return/iphone|ipad|ipod/i.test(g)||/macintosh/i.test(g)&&/mobile/i.test(g)}function Cs(g=(0,k.z$)()){return Rt(g)||jt(g)||je(g)||Oe(g)||/windows phone/i.test(g)||rn(g)}function es(g,d=[]){let f;switch(g){case"Browser":f=K((0,k.z$)());break;case"Worker":f=`${K((0,k.z$)())}-${g}`;break;default:f=g}const _=d.length?d.join(","):"FirebaseCore-web";return`${f}/JsCore/${ae.SDK_VERSION}/${_}`}class to{constructor(d){this.auth=d,this.queue=[]}pushCallback(d,f){const _=N=>new Promise((G,se)=>{try{G(d(N))}catch(Pe){se(Pe)}});_.onAbort=f,this.queue.push(_);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(d){var f=this;return(0,I.Z)(function*(){var _;if(f.auth.currentUser===d)return;const S=[];try{for(const N of f.queue)yield N(d),N.onAbort&&S.push(N.onAbort)}catch(N){S.reverse();for(const G of S)try{G()}catch{}throw f.auth._errorFactory.create("login-blocked",{originalMessage:null===(_=N)||void 0===_?void 0:_.message})}})()}}class xt{constructor(d,f,_){this.app=d,this.heartbeatServiceProvider=f,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ss(this),this.idTokenSubscription=new Ss(this),this.beforeStateQueue=new to(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fe,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=d.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(d,f){var _=this;return f&&(this._popupRedirectResolver=ne(f)),this._initializationPromise=this.queue((0,I.Z)(function*(){var S,N;if(!_._deleted&&(_.persistenceManager=yield _e.create(_,d),!_._deleted)){if(null!==(S=_._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield _._popupRedirectResolver._initialize(_)}catch{}yield _.initializeCurrentUser(f),_.lastNotifiedUid=(null===(N=_.currentUser)||void 0===N?void 0:N.uid)||null,!_._deleted&&(_._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var d=this;return(0,I.Z)(function*(){if(d._deleted)return;const f=yield d.assertedPersistence.getCurrentUser();if(d.currentUser||f){if(d.currentUser&&f&&d.currentUser.uid===f.uid)return d._currentUser._assign(f),void(yield d.currentUser.getIdToken());yield d._updateCurrentUser(f,!0)}})()}initializeCurrentUser(d){var f=this;return(0,I.Z)(function*(){var _;const S=yield f.assertedPersistence.getCurrentUser();let N=S,G=!1;if(d&&f.config.authDomain){yield f.getOrInitRedirectPersistenceManager();const se=null===(_=f.redirectUser)||void 0===_?void 0:_._redirectEventId,Pe=N?._redirectEventId,Xe=yield f.tryRedirectSignIn(d);(!se||se===Pe)&&Xe?.user&&(N=Xe.user,G=!0)}if(!N)return f.directlySetCurrentUser(null);if(!N._redirectEventId){if(G)try{yield f.beforeStateQueue.runMiddleware(N)}catch(se){N=S,f._popupRedirectResolver._overrideRedirectResult(f,()=>Promise.reject(se))}return N?f.reloadAndSetCurrentUserOrClear(N):f.directlySetCurrentUser(null)}return V(f._popupRedirectResolver,f,"argument-error"),yield f.getOrInitRedirectPersistenceManager(),f.redirectUser&&f.redirectUser._redirectEventId===N._redirectEventId?f.directlySetCurrentUser(N):f.reloadAndSetCurrentUserOrClear(N)})()}tryRedirectSignIn(d){var f=this;return(0,I.Z)(function*(){let _=null;try{_=yield f._popupRedirectResolver._completeRedirectFn(f,d,!0)}catch{yield f._setRedirectUser(null)}return _})()}reloadAndSetCurrentUserOrClear(d){var f=this;return(0,I.Z)(function*(){var _;try{yield Zt(d)}catch(S){if("auth/network-request-failed"!==(null===(_=S)||void 0===_?void 0:_.code))return f.directlySetCurrentUser(null)}return f.directlySetCurrentUser(d)})()}useDeviceLanguage(){this.languageCode=function Ye(){if(typeof navigator>"u")return null;const g=navigator;return g.languages&&g.languages[0]||g.language||null}()}_delete(){var d=this;return(0,I.Z)(function*(){d._deleted=!0})()}updateCurrentUser(d){var f=this;return(0,I.Z)(function*(){const _=d?(0,k.m9)(d):null;return _&&V(_.auth.config.apiKey===f.config.apiKey,f,"invalid-user-token"),f._updateCurrentUser(_&&_._clone(f))})()}_updateCurrentUser(d,f=!1){var _=this;return(0,I.Z)(function*(){if(!_._deleted)return d&&V(_.tenantId===d.tenantId,_,"tenant-id-mismatch"),f||(yield _.beforeStateQueue.runMiddleware(d)),_.queue((0,I.Z)(function*(){yield _.directlySetCurrentUser(d),_.notifyAuthListeners()}))})()}signOut(){var d=this;return(0,I.Z)(function*(){return yield d.beforeStateQueue.runMiddleware(null),(d.redirectPersistenceManager||d._popupRedirectResolver)&&(yield d._setRedirectUser(null)),d._updateCurrentUser(null,!0)})()}setPersistence(d){var f=this;return this.queue((0,I.Z)(function*(){yield f.assertedPersistence.setPersistence(ne(d))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(d){this._errorFactory=new k.LL("auth","Firebase",d())}onAuthStateChanged(d,f,_){return this.registerStateListener(this.authStateSubscription,d,f,_)}beforeAuthStateChanged(d,f){return this.beforeStateQueue.pushCallback(d,f)}onIdTokenChanged(d,f,_){return this.registerStateListener(this.idTokenSubscription,d,f,_)}toJSON(){var d;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(d=this._currentUser)||void 0===d?void 0:d.toJSON()}}_setRedirectUser(d,f){var _=this;return(0,I.Z)(function*(){const S=yield _.getOrInitRedirectPersistenceManager(f);return null===d?S.removeCurrentUser():S.setCurrentUser(d)})()}getOrInitRedirectPersistenceManager(d){var f=this;return(0,I.Z)(function*(){if(!f.redirectPersistenceManager){const _=d&&ne(d)||f._popupRedirectResolver;V(_,f,"argument-error"),f.redirectPersistenceManager=yield _e.create(f,[ne(_._redirectPersistence)],"redirectUser"),f.redirectUser=yield f.redirectPersistenceManager.getCurrentUser()}return f.redirectPersistenceManager})()}_redirectUserForId(d){var f=this;return(0,I.Z)(function*(){var _,S;return f._isInitialized&&(yield f.queue((0,I.Z)(function*(){}))),(null===(_=f._currentUser)||void 0===_?void 0:_._redirectEventId)===d?f._currentUser:(null===(S=f.redirectUser)||void 0===S?void 0:S._redirectEventId)===d?f.redirectUser:null})()}_persistUserIfCurrent(d){var f=this;return(0,I.Z)(function*(){if(d===f.currentUser)return f.queue((0,I.Z)(function*(){return f.directlySetCurrentUser(d)}))})()}_notifyListenersIfCurrent(d){d===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var d,f;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const _=null!==(f=null===(d=this.currentUser)||void 0===d?void 0:d.uid)&&void 0!==f?f:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(d,f,_,S){if(this._deleted)return()=>{};const N="function"==typeof f?f:f.next.bind(f),G=this._isInitialized?Promise.resolve():this._initializationPromise;return V(G,this,"internal-error"),G.then(()=>N(this.currentUser)),"function"==typeof f?d.addObserver(f,_,S):d.addObserver(f)}directlySetCurrentUser(d){var f=this;return(0,I.Z)(function*(){f.currentUser&&f.currentUser!==d&&f._currentUser._stopProactiveRefresh(),d&&f.isProactiveRefreshEnabled&&d._startProactiveRefresh(),f.currentUser=d,d?yield f.assertedPersistence.setCurrentUser(d):yield f.assertedPersistence.removeCurrentUser()})()}queue(d){return this.operations=this.operations.then(d,d),this.operations}get assertedPersistence(){return V(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(d){!d||this.frameworks.includes(d)||(this.frameworks.push(d),this.frameworks.sort(),this.clientVersion=es(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var d=this;return(0,I.Z)(function*(){var f;const _={"X-Client-Version":d.clientVersion};d.app.options.appId&&(_["X-Firebase-gmpid"]=d.app.options.appId);const S=yield null===(f=d.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===f?void 0:f.getHeartbeatsHeader();return S&&(_["X-Firebase-Client"]=S),_})()}}function hn(g){return(0,k.m9)(g)}class Ss{constructor(d){this.auth=d,this.observer=null,this.addObserver=(0,k.ne)(f=>this.observer=f)}get next(){return V(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function wi(g){const d=g.indexOf(":");return d<0?"":g.substr(0,d+1)}function ts(g){if(!g)return null;const d=Number(g);return isNaN(d)?null:d}class ur{constructor(d,f){this.providerId=d,this.signInMethod=f}toJSON(){return ce("not implemented")}_getIdTokenResponse(d){return ce("not implemented")}_linkToIdToken(d,f){return ce("not implemented")}_getReauthenticationResolver(d){return ce("not implemented")}}function Fn(g,d){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:resetPassword",St(g,d))})).apply(this,arguments)}function tn(g,d){return _c.apply(this,arguments)}function _c(){return(_c=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function vc(g,d){return As.apply(this,arguments)}function As(){return(As=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:update",St(g,d))})).apply(this,arguments)}function xs(){return(xs=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithPassword",St(g,d))})).apply(this,arguments)}function rs(g,d){return di.apply(this,arguments)}function di(){return(di=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:sendOobCode",St(g,d))})).apply(this,arguments)}function cr(g,d){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function Xn(g,d){return br.apply(this,arguments)}function br(){return(br=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function Ga(g,d){return zo.apply(this,arguments)}function zo(){return(zo=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function wc(g,d){return mr.apply(this,arguments)}function mr(){return(mr=(0,I.Z)(function*(g,d){return rs(g,d)})).apply(this,arguments)}function ql(){return(ql=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithEmailLink",St(g,d))})).apply(this,arguments)}function Ec(){return(Ec=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithEmailLink",St(g,d))})).apply(this,arguments)}class Dc extends ur{constructor(d,f,_,S=null){super("password",_),this._email=d,this._password=f,this._tenantId=S}static _fromEmailAndPassword(d,f){return new Dc(d,f,"password")}static _fromEmailAndCode(d,f,_=null){return new Dc(d,f,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d;if(f?.email&&f?.password){if("password"===f.signInMethod)return this._fromEmailAndPassword(f.email,f.password);if("emailLink"===f.signInMethod)return this._fromEmailAndCode(f.email,f.password,f.tenantId)}return null}_getIdTokenResponse(d){var f=this;return(0,I.Z)(function*(){switch(f.signInMethod){case"password":return function Go(g,d){return xs.apply(this,arguments)}(d,{returnSecureToken:!0,email:f._email,password:f._password});case"emailLink":return function Dh(g,d){return ql.apply(this,arguments)}(d,{email:f._email,oobCode:f._password});default:be(d,"internal-error")}})()}_linkToIdToken(d,f){var _=this;return(0,I.Z)(function*(){switch(_.signInMethod){case"password":return tn(d,{idToken:f,returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function bh(g,d){return Ec.apply(this,arguments)}(d,{idToken:f,email:_._email,oobCode:_._password});default:be(d,"internal-error")}})()}_getReauthenticationResolver(d){return this._getIdTokenResponse(d)}}function zn(g,d){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithIdp",St(g,d))})).apply(this,arguments)}class Mi extends ur{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(d){const f=new Mi(d.providerId,d.signInMethod);return d.idToken||d.accessToken?(d.idToken&&(f.idToken=d.idToken),d.accessToken&&(f.accessToken=d.accessToken),d.nonce&&!d.pendingToken&&(f.nonce=d.nonce),d.pendingToken&&(f.pendingToken=d.pendingToken)):d.oauthToken&&d.oauthTokenSecret?(f.accessToken=d.oauthToken,f.secret=d.oauthTokenSecret):be("argument-error"),f}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S}=f,N=(0,de._T)(f,["providerId","signInMethod"]);if(!_||!S)return null;const G=new Mi(_,S);return G.idToken=N.idToken||void 0,G.accessToken=N.accessToken||void 0,G.secret=N.secret,G.nonce=N.nonce,G.pendingToken=N.pendingToken||null,G}_getIdTokenResponse(d){return zn(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,zn(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,zn(d,f)}buildRequest(){const d={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)d.pendingToken=this.pendingToken;else{const f={};this.idToken&&(f.id_token=this.idToken),this.accessToken&&(f.access_token=this.accessToken),this.secret&&(f.oauth_token_secret=this.secret),f.providerId=this.providerId,this.nonce&&!this.pendingToken&&(f.nonce=this.nonce),d.postBody=(0,k.xO)(f)}return d}}function tp(g,d){return Zl.apply(this,arguments)}function Zl(){return(Zl=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:sendVerificationCode",St(g,d))})).apply(this,arguments)}function is(){return(is=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithPhoneNumber",St(g,d))})).apply(this,arguments)}function Yl(){return(Yl=(0,I.Z)(function*(g,d){const f=yield Or(g,"POST","/v1/accounts:signInWithPhoneNumber",St(g,d));if(f.temporaryProof)throw Zr(g,"account-exists-with-different-credential",f);return f})).apply(this,arguments)}const rp={USER_NOT_FOUND:"user-not-found"};function Ql(){return(Ql=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithPhoneNumber",St(g,Object.assign(Object.assign({},d),{operation:"REAUTH"})),rp)})).apply(this,arguments)}class ss extends ur{constructor(d){super("phone","phone"),this.params=d}static _fromVerification(d,f){return new ss({verificationId:d,verificationCode:f})}static _fromTokenResponse(d,f){return new ss({phoneNumber:d,temporaryProof:f})}_getIdTokenResponse(d){return function bc(g,d){return is.apply(this,arguments)}(d,this._makeVerificationRequest())}_linkToIdToken(d,f){return function np(g,d){return Yl.apply(this,arguments)}(d,Object.assign({idToken:f},this._makeVerificationRequest()))}_getReauthenticationResolver(d){return function ip(g,d){return Ql.apply(this,arguments)}(d,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:d,phoneNumber:f,verificationId:_,verificationCode:S}=this.params;return d&&f?{temporaryProof:d,phoneNumber:f}:{sessionInfo:_,code:S}}toJSON(){const d={providerId:this.providerId};return this.params.phoneNumber&&(d.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(d.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(d.verificationCode=this.params.verificationCode),this.params.verificationId&&(d.verificationId=this.params.verificationId),d}static fromJSON(d){"string"==typeof d&&(d=JSON.parse(d));const{verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}=d;return _||f||S||N?new ss({verificationId:f,verificationCode:_,phoneNumber:S,temporaryProof:N}):null}}class za{constructor(d){var f,_,S,N,G,se;const Pe=(0,k.zd)((0,k.pd)(d)),Xe=null!==(f=Pe.apiKey)&&void 0!==f?f:null,gt=null!==(_=Pe.oobCode)&&void 0!==_?_:null,ft=function Jl(g){switch(g){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=Pe.mode)&&void 0!==S?S:null);V(Xe&&gt&&ft,"argument-error"),this.apiKey=Xe,this.operation=ft,this.code=gt,this.continueUrl=null!==(N=Pe.continueUrl)&&void 0!==N?N:null,this.languageCode=null!==(G=Pe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(se=Pe.tenantId)&&void 0!==se?se:null}static parseLink(d){const f=function Xl(g){const d=(0,k.zd)((0,k.pd)(g)).link,f=d?(0,k.zd)((0,k.pd)(d)).deep_link_id:null,_=(0,k.zd)((0,k.pd)(g)).deep_link_id;return(_?(0,k.zd)((0,k.pd)(_)).link:null)||_||f||d||g}(d);try{return new za(f)}catch{return null}}}let Ei=(()=>{class g{constructor(){this.providerId=g.PROVIDER_ID}static credential(f,_){return Dc._fromEmailAndPassword(f,_)}static credentialWithLink(f,_){const S=za.parseLink(_);return V(S,"argument-error"),Dc._fromEmailAndCode(f,S.code,S.tenantId)}}return g.PROVIDER_ID="password",g.EMAIL_PASSWORD_SIGN_IN_METHOD="password",g.EMAIL_LINK_SIGN_IN_METHOD="emailLink",g})();class Ni{constructor(d){this.providerId=d,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(d){this.defaultLanguageCode=d}setCustomParameters(d){return this.customParameters=d,this}getCustomParameters(){return this.customParameters}}class Ri extends Ni{constructor(){super(...arguments),this.scopes=[]}addScope(d){return this.scopes.includes(d)||this.scopes.push(d),this}getScopes(){return[...this.scopes]}}class Ms extends Ri{static credentialFromJSON(d){const f="string"==typeof d?JSON.parse(d):d;return V("providerId"in f&&"signInMethod"in f,"argument-error"),Mi._fromParams(f)}credential(d){return this._credential(Object.assign(Object.assign({},d),{nonce:d.rawNonce}))}_credential(d){return V(d.idToken||d.accessToken,"argument-error"),Mi._fromParams(Object.assign(Object.assign({},d),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(d){return Ms.oauthCredentialFromTaggedObject(d)}static credentialFromError(d){return Ms.oauthCredentialFromTaggedObject(d.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{oauthIdToken:f,oauthAccessToken:_,oauthTokenSecret:S,pendingToken:N,nonce:G,providerId:se}=d;if(!_&&!S&&!f&&!N||!se)return null;try{return new Ms(se)._credential({idToken:f,accessToken:_,nonce:G,pendingToken:N})}catch{return null}}}let Wo=(()=>{class g extends Ri{constructor(){super("facebook.com")}static credential(f){return Mi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.FACEBOOK_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.FACEBOOK_SIGN_IN_METHOD="facebook.com",g.PROVIDER_ID="facebook.com",g})(),Wa=(()=>{class g extends Ri{constructor(){super("google.com"),this.addScope("profile")}static credential(f,_){return Mi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GOOGLE_SIGN_IN_METHOD,idToken:f,accessToken:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:_,oauthAccessToken:S}=f;if(!_&&!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.GOOGLE_SIGN_IN_METHOD="google.com",g.PROVIDER_ID="google.com",g})(),Tc=(()=>{class g extends Ri{constructor(){super("github.com")}static credential(f){return Mi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.GITHUB_SIGN_IN_METHOD,accessToken:f})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f||!("oauthAccessToken"in f)||!f.oauthAccessToken)return null;try{return g.credential(f.oauthAccessToken)}catch{return null}}}return g.GITHUB_SIGN_IN_METHOD="github.com",g.PROVIDER_ID="github.com",g})();class qo extends ur{constructor(d,f){super(d,d),this.pendingToken=f}_getIdTokenResponse(d){return zn(d,this.buildRequest())}_linkToIdToken(d,f){const _=this.buildRequest();return _.idToken=f,zn(d,_)}_getReauthenticationResolver(d){const f=this.buildRequest();return f.autoCreate=!1,zn(d,f)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(d){const f="string"==typeof d?JSON.parse(d):d,{providerId:_,signInMethod:S,pendingToken:N}=f;return _&&S&&N&&_===S?new qo(_,N):null}static _create(d,f){return new qo(d,f)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Qr extends Ni{constructor(d){V(d.startsWith("saml."),"argument-error"),super(d)}static credentialFromResult(d){return Qr.samlCredentialFromTaggedObject(d)}static credentialFromError(d){return Qr.samlCredentialFromTaggedObject(d.customData||{})}static credentialFromJSON(d){const f=qo.fromJSON(d);return V(f,"argument-error"),f}static samlCredentialFromTaggedObject({_tokenResponse:d}){if(!d)return null;const{pendingToken:f,providerId:_}=d;if(!f||!_)return null;try{return qo._create(_,f)}catch{return null}}}let Vr=(()=>{class g extends Ri{constructor(){super("twitter.com")}static credential(f,_){return Mi._fromParams({providerId:g.PROVIDER_ID,signInMethod:g.TWITTER_SIGN_IN_METHOD,oauthToken:f,oauthTokenSecret:_})}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthAccessToken:_,oauthTokenSecret:S}=f;if(!_||!S)return null;try{return g.credential(_,S)}catch{return null}}}return g.TWITTER_SIGN_IN_METHOD="twitter.com",g.PROVIDER_ID="twitter.com",g})();function no(g,d){return ed.apply(this,arguments)}function ed(){return(ed=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signUp",St(g,d))})).apply(this,arguments)}class lr{constructor(d){this.user=d.user,this.providerId=d.providerId,this._tokenResponse=d._tokenResponse,this.operationType=d.operationType}static _fromIdTokenResponse(d,f,_,S=!1){return(0,I.Z)(function*(){const N=yield At._fromIdTokenResponse(d,_,S),G=Sh(_);return new lr({user:N,providerId:G,_tokenResponse:_,operationType:f})})()}static _forOperation(d,f,_){return(0,I.Z)(function*(){yield d._updateTokensIfNecessary(_,!0);const S=Sh(_);return new lr({user:d,providerId:S,_tokenResponse:_,operationType:f})})()}}function Sh(g){return g.providerId?g.providerId:"phoneNumber"in g?"phone":null}function wn(){return(wn=(0,I.Z)(function*(g){var d;const f=hn(g);if(yield f._initializationPromise,null!==(d=f.currentUser)&&void 0!==d&&d.isAnonymous)return new lr({user:f.currentUser,providerId:null,operationType:"signIn"});const _=yield no(f,{returnSecureToken:!0}),S=yield lr._fromIdTokenResponse(f,"signIn",_,!0);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class Cc extends k.ZR{constructor(d,f,_,S){var N;super(f.code,f.message),this.operationType=_,this.user=S,Object.setPrototypeOf(this,Cc.prototype),this.customData={appName:d.name,tenantId:null!==(N=d.tenantId)&&void 0!==N?N:void 0,_serverResponse:f.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(d,f,_,S){return new Cc(d,f,_,S)}}function sp(g,d,f,_){return("reauthenticate"===d?f._getReauthenticationResolver(g):f._getIdTokenResponse(g)).catch(N=>{throw"auth/multi-factor-auth-required"===N.code?Cc._fromErrorAndOperation(g,N,d,_):N})}function Jr(g){return new Set(g.map(({providerId:d})=>d).filter(d=>!!d))}function qa(){return(qa=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);yield $t(!0,f,d);const{providerUserInfo:_}=yield gr(f.auth,{idToken:yield f.getIdToken(),deleteProvider:[d]}),S=Jr(_||[]);return f.providerData=f.providerData.filter(N=>S.has(N.providerId)),S.has("phone")||(f.phoneNumber=null),yield f.auth._persistUserIfCurrent(f),f})).apply(this,arguments)}function ro(g,d){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,I.Z)(function*(g,d,f=!1){const _=yield ar(g,d._linkToIdToken(g.auth,yield g.getIdToken()),f);return lr._forOperation(g,"link",_)})).apply(this,arguments)}function $t(g,d,f){return Ka.apply(this,arguments)}function Ka(){return(Ka=(0,I.Z)(function*(g,d,f){yield Zt(d);const S=!1===g?"provider-already-linked":"no-such-provider";V(Jr(d.providerData).has(f)===g,d.auth,S)})).apply(this,arguments)}function Ns(g,d){return Za.apply(this,arguments)}function Za(){return(Za=(0,I.Z)(function*(g,d,f=!1){var _;const{auth:S}=g,N="reauthenticate";try{const G=yield ar(g,sp(S,N,d,g),f);V(G.idToken,S,"internal-error");const se=ut(G.idToken);V(se,S,"internal-error");const{sub:Pe}=se;return V(g.uid===Pe,S,"user-mismatch"),lr._forOperation(g,N,G)}catch(G){throw"auth/user-not-found"===(null===(_=G)||void 0===_?void 0:_.code)&&be(S,"user-mismatch"),G}})).apply(this,arguments)}function hi(g,d){return Ya.apply(this,arguments)}function Ya(){return(Ya=(0,I.Z)(function*(g,d,f=!1){const _="signIn",S=yield sp(g,_,d),N=yield lr._fromIdTokenResponse(g,_,S);return f||(yield g._updateCurrentUser(N.user)),N})).apply(this,arguments)}function mn(g,d){return wt.apply(this,arguments)}function wt(){return(wt=(0,I.Z)(function*(g,d){return hi(hn(g),d)})).apply(this,arguments)}function Qa(g,d){return xh.apply(this,arguments)}function xh(){return(xh=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g);return yield $t(!1,f,d.providerId),ro(f,d)})).apply(this,arguments)}function Ja(g,d){return Xa.apply(this,arguments)}function Xa(){return(Xa=(0,I.Z)(function*(g,d){return Ns((0,k.m9)(g),d)})).apply(this,arguments)}function Sc(g,d){return Oi.apply(this,arguments)}function Oi(){return(Oi=(0,I.Z)(function*(g,d){return Or(g,"POST","/v1/accounts:signInWithCustomToken",St(g,d))})).apply(this,arguments)}function Ko(){return(Ko=(0,I.Z)(function*(g,d){const f=hn(g),_=yield Sc(f,{token:d,returnSecureToken:!0}),S=yield lr._fromIdTokenResponse(f,"signIn",_);return yield f._updateCurrentUser(S.user),S})).apply(this,arguments)}class De{constructor(d,f){this.factorId=d,this.uid=f.mfaEnrollmentId,this.enrollmentTime=new Date(f.enrolledAt).toUTCString(),this.displayName=f.displayName}static _fromServerResponse(d,f){return"phoneInfo"in f?Ft._fromServerResponse(d,f):be(d,"internal-error")}}class Ft extends De{constructor(d){super("phone",d),this.phoneNumber=d.phoneInfo}static _fromServerResponse(d,f){return new Ft(f)}}function eu(g,d,f){var _;V((null===(_=f.url)||void 0===_?void 0:_.length)>0,g,"invalid-continue-uri"),V(typeof f.dynamicLinkDomain>"u"||f.dynamicLinkDomain.length>0,g,"invalid-dynamic-link-domain"),d.continueUrl=f.url,d.dynamicLinkDomain=f.dynamicLinkDomain,d.canHandleCodeInApp=f.handleCodeInApp,f.iOS&&(V(f.iOS.bundleId.length>0,g,"missing-ios-bundle-id"),d.iOSBundleId=f.iOS.bundleId),f.android&&(V(f.android.packageName.length>0,g,"missing-android-pkg-name"),d.androidInstallApp=f.android.installApp,d.androidMinimumVersionCode=f.android.minimumVersion,d.androidPackageName=f.android.packageName)}function En(){return(En=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"PASSWORD_RESET",email:d};f&&eu(_,S,f),yield Xn(_,S)})).apply(this,arguments)}function io(){return(io=(0,I.Z)(function*(g,d,f){yield Fn((0,k.m9)(g),{oobCode:d,newPassword:f})})).apply(this,arguments)}function Zo(){return(Zo=(0,I.Z)(function*(g,d){yield vc((0,k.m9)(g),{oobCode:d})})).apply(this,arguments)}function Yo(g,d){return xc.apply(this,arguments)}function xc(){return(xc=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),_=yield Fn(f,{oobCode:d}),S=_.requestType;switch(V(S,f,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":V(_.newEmail,f,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":V(_.mfaInfo,f,"internal-error");default:V(_.email,f,"internal-error")}let N=null;return _.mfaInfo&&(N=De._fromServerResponse(hn(f),_.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.newEmail:_.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===_.requestType?_.email:_.newEmail)||null,multiFactorInfo:N},operation:S}})).apply(this,arguments)}function td(){return(td=(0,I.Z)(function*(g,d){const{data:f}=yield Yo((0,k.m9)(g),d);return f.email})).apply(this,arguments)}function Dn(){return(Dn=(0,I.Z)(function*(g,d,f){const _=hn(g),S=yield no(_,{returnSecureToken:!0,email:d,password:f}),N=yield lr._fromIdTokenResponse(_,"signIn",S);return yield _._updateCurrentUser(N.user),N})).apply(this,arguments)}function Rs(){return(Rs=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S={requestType:"EMAIL_SIGNIN",email:d};V(f.handleCodeInApp,_,"argument-error"),f&&eu(_,S,f),yield Ga(_,S)})).apply(this,arguments)}function Jo(){return(Jo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=Ei.credentialWithLink(d,f||Me());return V(S._tenantId===(_.tenantId||null),_,"tenant-id-mismatch"),mn(_,S)})).apply(this,arguments)}function ap(g,d){return Rc.apply(this,arguments)}function Rc(){return(Rc=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:createAuthUri",St(g,d))})).apply(this,arguments)}function Xo(){return(Xo=(0,I.Z)(function*(g,d){const _={identifier:d,continueUri:lt()?Me():"http://localhost"},{signinMethods:S}=yield ap((0,k.m9)(g),_);return S||[]})).apply(this,arguments)}function ea(){return(ea=(0,I.Z)(function*(g,d){const f=(0,k.m9)(g),S={requestType:"VERIFY_EMAIL",idToken:yield g.getIdToken()};d&&eu(f.auth,S,d);const{email:N}=yield cr(f.auth,S);N!==g.email&&(yield g.reload())})).apply(this,arguments)}function iu(){return(iu=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),N={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield g.getIdToken(),newEmail:d};f&&eu(_.auth,N,f);const{email:G}=yield wc(_.auth,N);G!==g.email&&(yield g.reload())})).apply(this,arguments)}function su(g,d){return Oc.apply(this,arguments)}function Oc(){return(Oc=(0,I.Z)(function*(g,d){return nn(g,"POST","/v1/accounts:update",d)})).apply(this,arguments)}function Fc(){return(Fc=(0,I.Z)(function*(g,{displayName:d,photoURL:f}){if(void 0===d&&void 0===f)return;const _=(0,k.m9)(g),N={idToken:yield _.getIdToken(),displayName:d,photoUrl:f,returnSecureToken:!0},G=yield ar(_,su(_.auth,N));_.displayName=G.displayName||null,_.photoURL=G.photoUrl||null;const se=_.providerData.find(({providerId:Pe})=>"password"===Pe);se&&(se.displayName=_.displayName,se.photoURL=_.photoURL),yield _._updateTokensIfNecessary(G)})).apply(this,arguments)}function Ps(g,d,f){return ou.apply(this,arguments)}function ou(){return(ou=(0,I.Z)(function*(g,d,f){const{auth:_}=g,N={idToken:yield g.getIdToken(),returnSecureToken:!0};d&&(N.email=d),f&&(N.password=f);const G=yield ar(g,tn(_,N));yield g._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Br{constructor(d,f,_={}){this.isNewUser=d,this.providerId=f,this.profile=_}}class ln extends Br{constructor(d,f,_,S){super(d,f,_),this.username=S}}class rd extends Br{constructor(d,f){super(d,"facebook.com",f)}}class Vc extends ln{constructor(d,f){super(d,"github.com",f,"string"==typeof f?.login?f?.login:null)}}class Mh extends Br{constructor(d,f){super(d,"google.com",f)}}class Bc extends ln{constructor(d,f,_){super(d,"twitter.com",f,_)}}function au(g){const{user:d,_tokenResponse:f}=g;return d.isAnonymous&&!f?{providerId:null,isNewUser:!1,profile:null}:function Wn(g){var d,f;if(!g)return null;const{providerId:_}=g,S=g.rawUserInfo?JSON.parse(g.rawUserInfo):{},N=g.isNewUser||"identitytoolkit#SignupNewUserResponse"===g.kind;if(!_&&g?.idToken){const G=null===(f=null===(d=ut(g.idToken))||void 0===d?void 0:d.firebase)||void 0===f?void 0:f.sign_in_provider;if(G)return new Br(N,"anonymous"!==G&&"custom"!==G?G:null)}if(!_)return null;switch(_){case"facebook.com":return new rd(N,S);case"github.com":return new Vc(N,S);case"google.com":return new Mh(N,S);case"twitter.com":return new Bc(N,S,g.screenName||null);case"custom":case"anonymous":return new Br(N,null);default:return new Br(N,_,S)}}(f)}class Ls{constructor(d,f,_){this.type=d,this.credential=f,this.auth=_}static _fromIdtoken(d,f){return new Ls("enroll",d,f)}static _fromMfaPendingCredential(d){return new Ls("signin",d)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(d){var f,_;if(d?.multiFactorSession){if(null!==(f=d.multiFactorSession)&&void 0!==f&&f.pendingCredential)return Ls._fromMfaPendingCredential(d.multiFactorSession.pendingCredential);if(null!==(_=d.multiFactorSession)&&void 0!==_&&_.idToken)return Ls._fromIdtoken(d.multiFactorSession.idToken)}return null}}class cu{constructor(d,f,_){this.session=d,this.hints=f,this.signInResolver=_}static _fromError(d,f){const _=hn(d),S=f.customData._serverResponse,N=(S.mfaInfo||[]).map(se=>De._fromServerResponse(_,se));V(S.mfaPendingCredential,_,"internal-error");const G=Ls._fromMfaPendingCredential(S.mfaPendingCredential);return new cu(G,N,function(){var se=(0,I.Z)(function*(Pe){const Xe=yield Pe._process(_,G);delete S.mfaInfo,delete S.mfaPendingCredential;const gt=Object.assign(Object.assign({},S),{idToken:Xe.idToken,refreshToken:Xe.refreshToken});switch(f.operationType){case"signIn":const ft=yield lr._fromIdTokenResponse(_,f.operationType,gt);return yield _._updateCurrentUser(ft.user),ft;case"reauthenticate":return V(f.user,_,"internal-error"),lr._forOperation(f.user,f.operationType,gt);default:be(_,"internal-error")}});return function(Pe){return se.apply(this,arguments)}}())}resolveSignIn(d){var f=this;return(0,I.Z)(function*(){return f.signInResolver(d)})()}}function lu(g,d){return nn(g,"POST","/v2/accounts/mfaEnrollment:start",St(g,d))}class Nh{constructor(d){this.user=d,this.enrolledFactors=[],d._onReload(f=>{f.mfaInfo&&(this.enrolledFactors=f.mfaInfo.map(_=>De._fromServerResponse(d.auth,_)))})}static _fromUser(d){return new Nh(d)}getSession(){var d=this;return(0,I.Z)(function*(){return Ls._fromIdtoken(yield d.user.getIdToken(),d.user.auth)})()}enroll(d,f){var _=this;return(0,I.Z)(function*(){const S=d,N=yield _.getSession(),G=yield ar(_.user,S._process(_.user.auth,N,f));return yield _.user._updateTokensIfNecessary(G),_.user.reload()})()}unenroll(d){var f=this;return(0,I.Z)(function*(){var _;const S="string"==typeof d?d:d.uid,N=yield f.user.getIdToken(),G=yield ar(f.user,function ad(g,d){return nn(g,"POST","/v2/accounts/mfaEnrollment:withdraw",St(g,d))}(f.user.auth,{idToken:N,mfaEnrollmentId:S}));f.enrolledFactors=f.enrolledFactors.filter(({uid:se})=>se!==S),yield f.user._updateTokensIfNecessary(G);try{yield f.user.reload()}catch(se){if("auth/user-token-expired"!==(null===(_=se)||void 0===_?void 0:_.code))throw se}})()}}const ao=new WeakMap,Fs="__sak";class hu{constructor(d,f){this.storageRetriever=d,this.type=f}_isAvailable(){try{return this.storage?(this.storage.setItem(Fs,"1"),this.storage.removeItem(Fs),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(d,f){return this.storage.setItem(d,JSON.stringify(f)),Promise.resolve()}_get(d){const f=this.storage.getItem(d);return Promise.resolve(f?JSON.parse(f):null)}_remove(d){return this.storage.removeItem(d),Promise.resolve()}get storage(){return this.storageRetriever()}}const na=(()=>{class g extends hu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(f,_)=>this.onStorageEvent(f,_),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function ta(){const g=(0,k.z$)();return ct(g)||Rt(g)}()&&function cn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Cs(),this._shouldAllowMigration=!0}forAllChangedKeys(f){for(const _ of Object.keys(this.listeners)){const S=this.storage.getItem(_),N=this.localCache[_];S!==N&&f(_,N,S)}}onStorageEvent(f,_=!1){if(!f.key)return void this.forAllChangedKeys((se,Pe,Xe)=>{this.notifyListeners(se,Xe)});const S=f.key;if(_?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const se=this.storage.getItem(S);if(f.newValue!==se)null!==f.newValue?this.storage.setItem(S,f.newValue):this.storage.removeItem(S);else if(this.localCache[S]===f.newValue&&!_)return}const N=()=>{const se=this.storage.getItem(S);!_&&this.localCache[S]===se||this.notifyListeners(S,se)},G=this.storage.getItem(S);!function Gn(){return(0,k.w1)()&&10===document.documentMode}()||G===f.newValue||f.newValue===f.oldValue?N():setTimeout(N,10)}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_&&JSON.parse(_))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((f,_,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:f,oldValue:_,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(f,_){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[f]||(this.listeners[f]=new Set,this.localCache[f]=this.storage.getItem(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(f,_){var S=()=>super._set,N=this;return(0,I.Z)(function*(){yield S().call(N,f,_),N.localCache[f]=JSON.stringify(_)})()}_get(f){var _=()=>super._get,S=this;return(0,I.Z)(function*(){const N=yield _().call(S,f);return S.localCache[f]=JSON.stringify(N),N})()}_remove(f){var _=()=>super._remove,S=this;return(0,I.Z)(function*(){yield _().call(S,f),delete S.localCache[f]})()}}return g.type="LOCAL",g})(),bi=(()=>{class g extends hu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(f,_){}_removeListener(f,_){}}return g.type="SESSION",g})();let ld=(()=>{class g{constructor(f){this.eventTarget=f,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(f){const _=this.receivers.find(N=>N.isListeningto(f));if(_)return _;const S=new g(f);return this.receivers.push(S),S}isListeningto(f){return this.eventTarget===f}handleEvent(f){var _=this;return(0,I.Z)(function*(){const S=f,{eventId:N,eventType:G,data:se}=S.data,Pe=_.handlersMap[G];if(!Pe?.size)return;S.ports[0].postMessage({status:"ack",eventId:N,eventType:G});const Xe=Array.from(Pe).map(function(){var ft=(0,I.Z)(function*(Zn){return Zn(S.origin,se)});return function(Zn){return ft.apply(this,arguments)}}()),gt=yield function ia(g){return Promise.all(g.map(function(){var d=(0,I.Z)(function*(f){try{return{fulfilled:!0,value:yield f}}catch(_){return{fulfilled:!1,reason:_}}});return function(f){return d.apply(this,arguments)}}()))}(Xe);S.ports[0].postMessage({status:"done",eventId:N,eventType:G,response:gt})})()}_subscribe(f,_){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[f]||(this.handlersMap[f]=new Set),this.handlersMap[f].add(_)}_unsubscribe(f,_){this.handlersMap[f]&&_&&this.handlersMap[f].delete(_),(!_||0===this.handlersMap[f].size)&&delete this.handlersMap[f],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return g.receivers=[],g})();function sa(g="",d=10){let f="";for(let _=0;_<d;_++)f+=Math.floor(10*Math.random());return g+f}class Uc{constructor(d){this.target=d,this.handlers=new Set}removeMessageHandler(d){d.messageChannel&&(d.messageChannel.port1.removeEventListener("message",d.onMessage),d.messageChannel.port1.close()),this.handlers.delete(d)}_send(d,f,_=50){var S=this;return(0,I.Z)(function*(){const N=typeof MessageChannel<"u"?new MessageChannel:null;if(!N)throw new Error("connection_unavailable");let G,se;return new Promise((Pe,Xe)=>{const gt=sa("",20);N.port1.start();const ft=setTimeout(()=>{Xe(new Error("unsupported_event"))},_);se={messageChannel:N,onMessage(Zn){const ni=Zn;if(ni.data.eventId===gt)switch(ni.data.status){case"ack":clearTimeout(ft),G=setTimeout(()=>{Xe(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Pe(ni.data.response);break;default:clearTimeout(ft),clearTimeout(G),Xe(new Error("invalid_response"))}}},S.handlers.add(se),N.port1.addEventListener("message",se.onMessage),S.target.postMessage({eventType:d,eventId:gt,data:f},[N.port2])}).finally(()=>{se&&S.removeMessageHandler(se)})})()}}function xn(){return window}function fu(){return typeof xn().WorkerGlobalScope<"u"&&"function"==typeof xn().importScripts}function oa(){return(oa=(0,I.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const us="firebaseLocalStorageDb",cs="firebaseLocalStorage",jc="fbase_key";class Bs{constructor(d){this.request=d}toPromise(){return new Promise((d,f)=>{this.request.addEventListener("success",()=>{d(this.request.result)}),this.request.addEventListener("error",()=>{f(this.request.error)})})}}function aa(g,d){return g.transaction([cs],d?"readwrite":"readonly").objectStore(cs)}function ua(){const g=indexedDB.open(us,1);return new Promise((d,f)=>{g.addEventListener("error",()=>{f(g.error)}),g.addEventListener("upgradeneeded",()=>{const _=g.result;try{_.createObjectStore(cs,{keyPath:jc})}catch(S){f(S)}}),g.addEventListener("success",(0,I.Z)(function*(){const _=g.result;_.objectStoreNames.contains(cs)?d(_):(_.close(),yield function hd(){const g=indexedDB.deleteDatabase(us);return new Bs(g).toPromise()}(),d(yield ua()))}))})}function ls(g,d,f){return $c.apply(this,arguments)}function $c(){return($c=(0,I.Z)(function*(g,d,f){const _=aa(g,!0).put({[jc]:d,value:f});return new Bs(_).toPromise()})).apply(this,arguments)}function ca(){return(ca=(0,I.Z)(function*(g,d){const f=aa(g,!1).get(d),_=yield new Bs(f).toPromise();return void 0===_?null:_.value})).apply(this,arguments)}function Us(g,d){const f=aa(g,!0).delete(d);return new Bs(f).toPromise()}const co=(()=>{class g{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var f=this;return(0,I.Z)(function*(){return f.db||(f.db=yield ua()),f.db})()}_withRetries(f){var _=this;return(0,I.Z)(function*(){let S=0;for(;;)try{const N=yield _._openDb();return yield f(N)}catch(N){if(S++>3)throw N;_.db&&(_.db.close(),_.db=void 0)}})()}initializeServiceWorkerMessaging(){var f=this;return(0,I.Z)(function*(){return fu()?f.initializeReceiver():f.initializeSender()})()}initializeReceiver(){var f=this;return(0,I.Z)(function*(){f.receiver=ld._getInstance(function gu(){return fu()?self:null}()),f.receiver._subscribe("keyChanged",function(){var _=(0,I.Z)(function*(S,N){return{keyProcessed:(yield f._poll()).includes(N.key)}});return function(S,N){return _.apply(this,arguments)}}()),f.receiver._subscribe("ping",function(){var _=(0,I.Z)(function*(S,N){return["keyChanged"]});return function(S,N){return _.apply(this,arguments)}}())})()}initializeSender(){var f=this;return(0,I.Z)(function*(){var _,S;if(f.activeServiceWorker=yield function Vs(){return oa.apply(this,arguments)}(),!f.activeServiceWorker)return;f.sender=new Uc(f.activeServiceWorker);const N=yield f.sender._send("ping",{},800);!N||(null===(_=N[0])||void 0===_?void 0:_.fulfilled)&&(null===(S=N[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(f.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(f){var _=this;return(0,I.Z)(function*(){if(_.sender&&_.activeServiceWorker&&function pu(){var g;return(null===(g=navigator?.serviceWorker)||void 0===g?void 0:g.controller)||null}()===_.activeServiceWorker)try{yield _.sender._send("keyChanged",{key:f},_.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,I.Z)(function*(){try{if(!indexedDB)return!1;const f=yield ua();return yield ls(f,Fs,"1"),yield Us(f,Fs),!0}catch{}return!1})()}_withPendingWrite(f){var _=this;return(0,I.Z)(function*(){_.pendingWrites++;try{yield f()}finally{_.pendingWrites--}})()}_set(f,_){var S=this;return(0,I.Z)(function*(){return S._withPendingWrite((0,I.Z)(function*(){return yield S._withRetries(N=>ls(N,f,_)),S.localCache[f]=_,S.notifyServiceWorker(f)}))})()}_get(f){var _=this;return(0,I.Z)(function*(){const S=yield _._withRetries(N=>function mu(g,d){return ca.apply(this,arguments)}(N,f));return _.localCache[f]=S,S})()}_remove(f){var _=this;return(0,I.Z)(function*(){return _._withPendingWrite((0,I.Z)(function*(){return yield _._withRetries(S=>Us(S,f)),delete _.localCache[f],_.notifyServiceWorker(f)}))})()}_poll(){var f=this;return(0,I.Z)(function*(){const _=yield f._withRetries(G=>{const se=aa(G,!1).getAll();return new Bs(se).toPromise()});if(!_)return[];if(0!==f.pendingWrites)return[];const S=[],N=new Set;for(const{fbase_key:G,value:se}of _)N.add(G),JSON.stringify(f.localCache[G])!==JSON.stringify(se)&&(f.notifyListeners(G,se),S.push(G));for(const G of Object.keys(f.localCache))f.localCache[G]&&!N.has(G)&&(f.notifyListeners(G,null),S.push(G));return S})()}notifyListeners(f,_){this.localCache[f]=_;const S=this.listeners[f];if(S)for(const N of Array.from(S))N(_)}startPolling(){var f=this;this.stopPolling(),this.pollTimer=setInterval((0,I.Z)(function*(){return f._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(f,_){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[f]||(this.listeners[f]=new Set,this._get(f)),this.listeners[f].add(_)}_removeListener(f,_){this.listeners[f]&&(this.listeners[f].delete(_),0===this.listeners[f].size&&delete this.listeners[f]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return g.type="LOCAL",g})();function lo(g,d){return nn(g,"POST","/v2/accounts/mfaSignIn:start",St(g,d))}function hs(){return(hs=(0,I.Z)(function*(g){return(yield nn(g,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function fo(g){return new Promise((d,f)=>{const _=document.createElement("script");_.setAttribute("src",g),_.onload=d,_.onerror=S=>{const N=me("internal-error");N.customData=S,f(N)},_.type="text/javascript",_.charset="UTF-8",function ho(){var g,d;return null!==(d=null===(g=document.getElementsByTagName("head"))||void 0===g?void 0:g[0])&&void 0!==d?d:document}().appendChild(_)})}function vu(g){return`__${g}${Math.floor(1e6*Math.random())}`}const la=1e12;class on{constructor(d){this.auth=d,this.counter=la,this._widgets=new Map}render(d,f){const _=this.counter;return this._widgets.set(_,new up(d,this.auth.name,f||{})),this.counter++,_}reset(d){var f;const _=d||la;null===(f=this._widgets.get(_))||void 0===f||f.delete(),this._widgets.delete(_)}getResponse(d){var f;return(null===(f=this._widgets.get(d||la))||void 0===f?void 0:f.getResponse())||""}execute(d){var f=this;return(0,I.Z)(function*(){var _;return null===(_=f._widgets.get(d||la))||void 0===_||_.execute(),""})()}}class up{constructor(d,f,_){this.params=_,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof d?document.getElementById(d):d;V(S,"argument-error",{appName:f}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fm(g){const d=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<g;_++)d.push(f.charAt(Math.floor(Math.random()*f.length)));return d.join("")}(50);const{callback:d,"expired-callback":f}=this.params;if(d)try{d(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,f)try{f()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const cp=vu("rcb"),pm=new en(3e4,6e4);class Rh{constructor(){var d;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(d=xn().grecaptcha)||void 0===d||!d.render)}load(d,f=""){return V(function mv(g){return g.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(g)}(f),d,"argument-error"),this.shouldResolveImmediately(f)?Promise.resolve(xn().grecaptcha):new Promise((_,S)=>{const N=xn().setTimeout(()=>{S(me(d,"network-request-failed"))},pm.get());xn()[cp]=()=>{xn().clearTimeout(N),delete xn()[cp];const se=xn().grecaptcha;if(!se)return void S(me(d,"internal-error"));const Pe=se.render;se.render=(Xe,gt)=>{const ft=Pe(Xe,gt);return this.counter++,ft},this.hostLanguage=f,_(se)},fo(`https://www.google.com/recaptcha/api.js??${(0,k.xO)({onload:cp,render:"explicit",hl:f})}`).catch(()=>{clearTimeout(N),S(me(d,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(d){var f;return!(null===(f=xn().grecaptcha)||void 0===f||!f.render)&&(d===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Gc{load(d){return(0,I.Z)(function*(){return new on(d)})()}clearedOneInstance(){}}const mm="recaptcha",ym={theme:"light",type:"image"};class tr{constructor(d,f=Object.assign({},ym),_){this.parameters=f,this.type=mm,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=hn(_),this.isInvisible="invisible"===this.parameters.size,V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof d?document.getElementById(d):d;V(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Gc:new Rh,this.validateStartingState()}verify(){var d=this;return(0,I.Z)(function*(){d.assertNotDestroyed();const f=yield d.render(),_=d.getAssertedRecaptcha();return _.getResponse(f)||new Promise(N=>{const G=se=>{!se||(d.tokenChangeListeners.delete(G),N(se))};d.tokenChangeListeners.add(G),d.isInvisible&&_.execute(f)})})()}render(){try{this.assertNotDestroyed()}catch(d){return Promise.reject(d)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(d=>{throw this.renderPromise=null,d})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(d=>{this.container.removeChild(d)})}validateStartingState(){V(!this.parameters.sitekey,this.auth,"argument-error"),V(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),V(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(d){return f=>{if(this.tokenChangeListeners.forEach(_=>_(f)),"function"==typeof d)d(f);else if("string"==typeof d){const _=xn()[d];"function"==typeof _&&_(f)}}}assertNotDestroyed(){V(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var d=this;return(0,I.Z)(function*(){if(yield d.init(),!d.widgetId){let f=d.container;if(!d.isInvisible){const _=document.createElement("div");f.appendChild(_),f=_}d.widgetId=d.getAssertedRecaptcha().render(f,d.parameters)}return d.widgetId})()}init(){var d=this;return(0,I.Z)(function*(){V(lt()&&!fu(),d.auth,"internal-error"),yield function jr(){let g=null;return new Promise(d=>{"complete"!==document.readyState?(g=()=>d(),window.addEventListener("load",g)):d()}).catch(d=>{throw g&&window.removeEventListener("load",g),d})}(),d.recaptcha=yield d._recaptchaLoader.load(d.auth,d.auth.languageCode||void 0);const f=yield function Ur(g){return hs.apply(this,arguments)}(d.auth);V(f,d.auth,"internal-error"),d.parameters.sitekey=f})()}getAssertedRecaptcha(){return V(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class go{constructor(d,f){this.verificationId=d,this.onConfirmation=f}confirm(d){const f=ss._fromVerification(this.verificationId,d);return this.onConfirmation(f)}}function pi(){return(pi=(0,I.Z)(function*(g,d,f){const _=hn(g),S=yield fs(_,d,(0,k.m9)(f));return new go(S,N=>mn(_,N))})).apply(this,arguments)}function dr(){return(dr=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);yield $t(!1,_,"phone");const S=yield fs(_.auth,d,(0,k.m9)(f));return new go(S,N=>Qa(_,N))})).apply(this,arguments)}function mo(){return(mo=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g),S=yield fs(_.auth,d,(0,k.m9)(f));return new go(S,N=>Ja(_,N))})).apply(this,arguments)}function fs(g,d,f){return da.apply(this,arguments)}function da(){return(da=(0,I.Z)(function*(g,d,f){var _;const S=yield f.verify();try{let N;if(V("string"==typeof S,g,"argument-error"),V(f.type===mm,g,"argument-error"),N="string"==typeof d?{phoneNumber:d}:d,"session"in N){const G=N.session;if("phoneNumber"in N)return V("enroll"===G.type,g,"internal-error"),(yield lu(g,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:N.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{V("signin"===G.type,g,"internal-error");const se=(null===(_=N.multiFactorHint)||void 0===_?void 0:_.uid)||N.multiFactorUid;return V(se,g,"missing-multi-factor-info"),(yield lo(g,{mfaPendingCredential:G.credential,mfaEnrollmentId:se,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield tp(g,{phoneNumber:N.phoneNumber,recaptchaToken:S});return G}}finally{f._reset()}})).apply(this,arguments)}function ha(){return(ha=(0,I.Z)(function*(g,d){yield ro((0,k.m9)(g),d)})).apply(this,arguments)}let ei=(()=>{class g{constructor(f){this.providerId=g.PROVIDER_ID,this.auth=hn(f)}verifyPhoneNumber(f,_){return fs(this.auth,f,(0,k.m9)(_))}static credential(f,_){return ss._fromVerification(f,_)}static credentialFromResult(f){return g.credentialFromTaggedObject(f)}static credentialFromError(f){return g.credentialFromTaggedObject(f.customData||{})}static credentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{phoneNumber:_,temporaryProof:S}=f;return _&&S?ss._fromTokenResponse(_,S):null}}return g.PROVIDER_ID="phone",g.PHONE_SIGN_IN_METHOD="phone",g})();function gs(g,d){return d?ne(d):(V(g._popupRedirectResolver,g,"argument-error"),g._popupRedirectResolver)}class hr extends ur{constructor(d){super("custom","custom"),this.params=d}_getIdTokenResponse(d){return zn(d,this._buildIdpRequest())}_linkToIdToken(d,f){return zn(d,this._buildIdpRequest(f))}_getReauthenticationResolver(d){return zn(d,this._buildIdpRequest())}_buildIdpRequest(d){const f={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return d&&(f.idToken=d),f}}function $r(g){return hi(g.auth,new hr(g),g.bypassAuthState)}function fa(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),Ns(f,new hr(g),g.bypassAuthState)}function $s(g){return fd.apply(this,arguments)}function fd(){return(fd=(0,I.Z)(function*(g){const{auth:d,user:f}=g;return V(f,d,"internal-error"),ro(f,new hr(g),g.bypassAuthState)})).apply(this,arguments)}class Wc{constructor(d,f,_,S,N=!1){this.auth=d,this.resolver=_,this.user=S,this.bypassAuthState=N,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(f)?f:[f]}execute(){var d=this;return new Promise(function(){var f=(0,I.Z)(function*(_,S){d.pendingPromise={resolve:_,reject:S};try{d.eventManager=yield d.resolver._initialize(d.auth),yield d.onExecution(),d.eventManager.registerConsumer(d)}catch(N){d.reject(N)}});return function(_,S){return f.apply(this,arguments)}}())}onAuthEvent(d){var f=this;return(0,I.Z)(function*(){const{urlResponse:_,sessionId:S,postBody:N,tenantId:G,error:se,type:Pe}=d;if(se)return void f.reject(se);const Xe={auth:f.auth,requestUri:_,sessionId:S,tenantId:G||void 0,postBody:N||void 0,user:f.user,bypassAuthState:f.bypassAuthState};try{f.resolve(yield f.getIdpTask(Pe)(Xe))}catch(gt){f.reject(gt)}})()}onError(d){this.reject(d)}getIdpTask(d){switch(d){case"signInViaPopup":case"signInViaRedirect":return $r;case"linkViaPopup":case"linkViaRedirect":return $s;case"reauthViaPopup":case"reauthViaRedirect":return fa;default:be(this.auth,"internal-error")}}resolve(d){H(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(d),this.unregisterAndCleanUp()}reject(d){H(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(d),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yo=new en(2e3,1e4);function pa(){return(pa=(0,I.Z)(function*(g,d,f){const _=hn(g);Ue(g,d,Ni);const S=gs(_,f);return new Vt(_,"signInViaPopup",d,S).executeNotNull()})).apply(this,arguments)}function gi(){return(gi=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Ue(_.auth,d,Ni);const S=gs(_.auth,f);return new Vt(_.auth,"reauthViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}function Cr(){return(Cr=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Ue(_.auth,d,Ni);const S=gs(_.auth,f);return new Vt(_.auth,"linkViaPopup",d,S,_).executeNotNull()})).apply(this,arguments)}let Vt=(()=>{class g extends Wc{constructor(f,_,S,N,G){super(f,_,N,G),this.provider=S,this.authWindow=null,this.pollId=null,g.currentPopupAction&&g.currentPopupAction.cancel(),g.currentPopupAction=this}executeNotNull(){var f=this;return(0,I.Z)(function*(){const _=yield f.execute();return V(_,f.auth,"internal-error"),_})()}onExecution(){var f=this;return(0,I.Z)(function*(){H(1===f.filter.length,"Popup operations only handle one event");const _=sa();f.authWindow=yield f.resolver._openPopup(f.auth,f.provider,f.filter[0],_),f.authWindow.associatedEvent=_,f.resolver._originValidation(f.auth).catch(S=>{f.reject(S)}),f.resolver._isIframeWebStorageSupported(f.auth,S=>{S||f.reject(me(f.auth,"web-storage-unsupported"))}),f.pollUserCancellation()})()}get eventId(){var f;return(null===(f=this.authWindow)||void 0===f?void 0:f.associatedEvent)||null}cancel(){this.reject(me(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,g.currentPopupAction=null}pollUserCancellation(){const f=()=>{var _,S;this.pollId=null!==(S=null===(_=this.authWindow)||void 0===_?void 0:_.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(me(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(f,yo.get())};f()}}return g.currentPopupAction=null,g})();const fr=new Map;class nt extends Wc{constructor(d,f,_=!1){super(d,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],f,void 0,_),this.eventId=null}execute(){var d=()=>super.execute,f=this;return(0,I.Z)(function*(){let _=fr.get(f.auth._key());if(!_){try{const N=(yield function vo(g,d){return pt.apply(this,arguments)}(f.resolver,f.auth))?yield d().call(f):null;_=()=>Promise.resolve(N)}catch(S){_=()=>Promise.reject(S)}fr.set(f.auth._key(),_)}return f.bypassAuthState||fr.set(f.auth._key(),()=>Promise.resolve(null)),_()})()}onAuthEvent(d){var f=()=>super.onAuthEvent,_=this;return(0,I.Z)(function*(){if("signInViaRedirect"===d.type)return f().call(_,d);if("unknown"!==d.type){if(d.eventId){const S=yield _.auth._redirectUserForId(d.eventId);if(S)return _.user=S,f().call(_,d);_.resolve(null)}}else _.resolve(null)})()}onExecution(){return(0,I.Z)(function*(){})()}cleanUp(){}}function pt(){return(pt=(0,I.Z)(function*(g,d){const f=ms(d),_=Fi(g);if(!(yield _._isAvailable()))return!1;const S="true"===(yield _._get(f));return yield _._remove(f),S})).apply(this,arguments)}function Hs(g,d){return Io.apply(this,arguments)}function Io(){return(Io=(0,I.Z)(function*(g,d){return Fi(g)._set(ms(d),"true")})).apply(this,arguments)}function Hr(g,d){fr.set(g._key(),d)}function Fi(g){return ne(g._redirectPersistence)}function ms(g){return z("pendingRedirect",g.config.apiKey,g.name)}function Bn(){return(Bn=(0,I.Z)(function*(g,d,f){const _=hn(g);Ue(g,d,Ni);const S=gs(_,f);return yield Hs(S,_),S._openRedirect(_,d,"signInViaRedirect")})).apply(this,arguments)}function Vi(){return(Vi=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Ue(_.auth,d,Ni);const S=gs(_.auth,f);yield Hs(S,_.auth);const N=yield Le(_);return S._openRedirect(_.auth,d,"reauthViaRedirect",N)})).apply(this,arguments)}function A(){return(A=(0,I.Z)(function*(g,d,f){const _=(0,k.m9)(g);Ue(_.auth,d,Ni);const S=gs(_.auth,f);yield $t(!1,_,d.providerId),yield Hs(S,_.auth);const N=yield Le(_);return S._openRedirect(_.auth,d,"linkViaRedirect",N)})).apply(this,arguments)}function W(){return(W=(0,I.Z)(function*(g,d){return yield hn(g)._initializationPromise,Z(g,d,!1)})).apply(this,arguments)}function Z(g,d){return we.apply(this,arguments)}function we(){return(we=(0,I.Z)(function*(g,d,f=!1){const _=hn(g),S=gs(_,d),G=yield new nt(_,S,f).execute();return G&&!f&&(delete G.user._redirectEventId,yield _._persistUserIfCurrent(G.user),yield _._setRedirectUser(null,d)),G})).apply(this,arguments)}function Le(g){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,I.Z)(function*(g){const d=sa(`${g.uid}:::`);return g._redirectEventId=d,yield g.auth._setRedirectUser(g),yield g.auth._persistUserIfCurrent(g),d})).apply(this,arguments)}class Tt{constructor(d){this.auth=d,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(d){this.consumers.add(d),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,d)&&(this.sendToConsumer(this.queuedRedirectEvent,d),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(d){this.consumers.delete(d)}onEvent(d){if(this.hasEventBeenHandled(d))return!1;let f=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(d,_)&&(f=!0,this.sendToConsumer(d,_),this.saveEventToCache(d))}),this.hasHandledPotentialRedirect||!function Kn(g){switch(g.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Un(g);default:return!1}}(d)||(this.hasHandledPotentialRedirect=!0,f||(this.queuedRedirectEvent=d,f=!0)),f}sendToConsumer(d,f){var _;if(d.error&&!Un(d)){const S=(null===(_=d.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";f.onError(me(this.auth,S))}else f.onAuthEvent(d)}isEventForConsumer(d,f){const _=null===f.eventId||!!d.eventId&&d.eventId===f.eventId;return f.filter.includes(d.type)&&_}hasEventBeenHandled(d){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rt(d))}saveEventToCache(d){this.cachedEventUids.add(rt(d)),this.lastProcessedEventTime=Date.now()}}function rt(g){return[g.type,g.eventId,g.sessionId,g.tenantId].filter(d=>d).join("-")}function Un({type:g,error:d}){return"unknown"===g&&"auth/no-auth-event"===d?.code}function Bi(g){return ti.apply(this,arguments)}function ti(){return(ti=(0,I.Z)(function*(g,d={}){return nn(g,"GET","/v1/projects",d)})).apply(this,arguments)}const Do=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Iu=/^https?/;function bo(){return(bo=(0,I.Z)(function*(g){if(g.config.emulator)return;const{authorizedDomains:d}=yield Bi(g);for(const f of d)try{if(ys(f))return}catch{}be(g,"unauthorized-domain")})).apply(this,arguments)}function ys(g){const d=Me(),{protocol:f,hostname:_}=new URL(d);if(g.startsWith("chrome-extension://")){const G=new URL(g);return""===G.hostname&&""===_?"chrome-extension:"===f&&g.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===f&&G.hostname===_}if(!Iu.test(f))return!1;if(Do.test(g))return _===g;const S=g.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(_)}const Ui=new en(3e4,6e4);function ga(){const g=xn().___jsl;if(g?.H)for(const d of Object.keys(g.H))if(g.H[d].r=g.H[d].r||[],g.H[d].L=g.H[d].L||[],g.H[d].r=[...g.H[d].L],g.CP)for(let f=0;f<g.CP.length;f++)g.CP[f]=null}let ma=null;function vm(g){return ma=ma||function Eu(g){return new Promise((d,f)=>{var _,S,N;function G(){ga(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{ga(),f(me(g,"network-request-failed"))},timeout:Ui.get()})}if(null!==(S=null===(_=xn().gapi)||void 0===_?void 0:_.iframes)&&void 0!==S&&S.Iframe)d(gapi.iframes.getContext());else{if(null===(N=xn().gapi)||void 0===N||!N.load){const se=vu("iframefcb");return xn()[se]=()=>{gapi.load?G():f(me(g,"network-request-failed"))},fo(`https://apis.google.com/js/api.js?onload=${se}`).catch(Pe=>f(Pe))}G()}}).catch(d=>{throw ma=null,d})}(g),ma}const lp=new en(5e3,15e3),yv={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ya=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Im(g){const d=g.config;V(d.authDomain,g,"auth-domain-config-required");const f=d.emulator?un(d,"emulator/auth/iframe"):`https://${g.config.authDomain}/__/auth/iframe`,_={apiKey:d.apiKey,appName:g.name,v:ae.SDK_VERSION},S=ya.get(g.config.apiHost);S&&(_.eid=S);const N=g._getFrameworks();return N.length&&(_.fw=N.join(",")),`${f}?${(0,k.xO)(_).slice(1)}`}function bu(){return bu=(0,I.Z)(function*(g){const d=yield vm(g),f=xn().gapi;return V(f,g,"internal-error"),d.open({where:document.body,url:Im(g),messageHandlersFilter:f.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yv,dontclear:!0},_=>new Promise(function(){var S=(0,I.Z)(function*(N,G){yield _.restyle({setHideOnLeave:!1});const se=me(g,"network-request-failed"),Pe=xn().setTimeout(()=>{G(se)},lp.get());function Xe(){xn().clearTimeout(Pe),N(_)}_.ping(Xe).then(Xe,()=>{G(se)})});return function(N,G){return S.apply(this,arguments)}}()))}),bu.apply(this,arguments)}const Oh={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tu{constructor(d){this.window=d,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Su(g,d,f,_,S,N){V(g.config.authDomain,g,"auth-domain-config-required"),V(g.config.apiKey,g,"invalid-api-key");const G={apiKey:g.config.apiKey,appName:g.name,authType:f,redirectUrl:_,v:ae.SDK_VERSION,eventId:S};if(d instanceof Ni){d.setDefaultLanguage(g.languageCode),G.providerId=d.providerId||"",(0,k.xb)(d.getCustomParameters())||(G.customParameters=JSON.stringify(d.getCustomParameters()));for(const[Pe,Xe]of Object.entries(N||{}))G[Pe]=Xe}if(d instanceof Ri){const Pe=d.getScopes().filter(Xe=>""!==Xe);Pe.length>0&&(G.scopes=Pe.join(","))}g.tenantId&&(G.tid=g.tenantId);const se=G;for(const Pe of Object.keys(se))void 0===se[Pe]&&delete se[Pe];return`${function fp({config:g}){return g.emulator?un(g,"emulator/auth/handler"):`https://${g.authDomain}/__/auth/handler`}(g)}?${(0,k.xO)(se).slice(1)}`}const _d="webStorageSupport";class Ti extends class pp{constructor(d){this.factorId=d}_process(d,f,_){switch(f.type){case"enroll":return this._finalizeEnroll(d,f.credential,_);case"signin":return this._finalizeSignIn(d,f.credential);default:return ce("unexpected MultiFactorSessionType")}}}{constructor(d){super("phone"),this.credential=d}static _fromCredential(d){return new Ti(d)}_finalizeEnroll(d,f,_){return function du(g,d){return nn(g,"POST","/v2/accounts/mfaEnrollment:finalize",St(g,d))}(d,{idToken:f,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(d,f){return function _u(g,d){return nn(g,"POST","/v2/accounts/mfaSignIn:finalize",St(g,d))}(d,{mfaPendingCredential:f,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Au=(()=>{class g{constructor(){}static assertion(f){return Ti._fromCredential(f)}}return g.FACTOR_ID="phone",g})();var gp="@firebase/auth",Vh="0.20.10";class mp{constructor(d){this.auth=d,this.internalListeners=new Map}getUid(){var d;return this.assertAuthConfigured(),(null===(d=this.auth.currentUser)||void 0===d?void 0:d.uid)||null}getToken(d){var f=this;return(0,I.Z)(function*(){return f.assertAuthConfigured(),yield f.auth._initializationPromise,f.auth.currentUser?{accessToken:yield f.auth.currentUser.getIdToken(d)}:null})()}addAuthTokenListener(d){if(this.assertAuthConfigured(),this.internalListeners.has(d))return;const f=this.auth.onIdTokenChanged(_=>{var S;d((null===(S=_)||void 0===S?void 0:S.stsTokenManager.accessToken)||null)});this.internalListeners.set(d,f),this.updateProactiveRefresh()}removeAuthTokenListener(d){this.assertAuthConfigured();const f=this.internalListeners.get(d);!f||(this.internalListeners.delete(d),f(),this.updateProactiveRefresh())}assertAuthConfigured(){V(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function To(){return window}function Co(){return(Co=(0,I.Z)(function*(g,d,f){var _;const{BuildInfo:S}=To();H(d.sessionId,"AuthEvent did not contain a session ID");const N=yield Kc(d.sessionId),G={};return Rt()?G.ibi=S.packageName:jt()?G.apn=S.packageName:be(g,"operation-not-supported-in-this-environment"),S.displayName&&(G.appDisplayName=S.displayName),G.sessionId=N,Su(g,f,d.type,void 0,null!==(_=d.eventId)&&void 0!==_?_:void 0,G)})).apply(this,arguments)}function wd(){return(wd=(0,I.Z)(function*(g){const{BuildInfo:d}=To(),f={};Rt()?f.iosBundleId=d.packageName:jt()?f.androidPackageName=d.packageName:be(g,"operation-not-supported-in-this-environment"),yield Bi(g,f)})).apply(this,arguments)}function _p(){return(_p=(0,I.Z)(function*(g,d,f){const{cordova:_}=To();let S=()=>{};try{yield new Promise((N,G)=>{let se=null;function Pe(){var ft;N();const Zn=null===(ft=_.plugins.browsertab)||void 0===ft?void 0:ft.close;"function"==typeof Zn&&Zn(),"function"==typeof f?.close&&f.close()}function Xe(){se||(se=window.setTimeout(()=>{G(me(g,"redirect-cancelled-by-user"))},2e3))}function gt(){"visible"===document?.visibilityState&&Xe()}d.addPassiveListener(Pe),document.addEventListener("resume",Xe,!1),jt()&&document.addEventListener("visibilitychange",gt,!1),S=()=>{d.removePassiveListener(Pe),document.removeEventListener("resume",Xe,!1),document.removeEventListener("visibilitychange",gt,!1),se&&window.clearTimeout(se)}})}finally{S()}})).apply(this,arguments)}function Kc(g){return _a.apply(this,arguments)}function _a(){return(_a=(0,I.Z)(function*(g){const d=Tm(g),f=yield crypto.subtle.digest("SHA-256",d);return Array.from(new Uint8Array(f)).map(S=>S.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Tm(g){if(H(/[0-9a-zA-Z]+/.test(g),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(g);const d=new ArrayBuffer(g.length),f=new Uint8Array(d);for(let _=0;_<g.length;_++)f[_]=g.charCodeAt(_);return f}(0,k.Pz)("authIdTokenMaxAge"),function _r(g){(0,ae._registerComponent)(new he.wA("auth",(d,{options:f})=>{const _=d.getProvider("app").getImmediate(),S=d.getProvider("heartbeat"),{apiKey:N,authDomain:G}=_.options;return((se,Pe)=>{V(N&&!N.includes(":"),"invalid-api-key",{appName:se.name}),V(!G?.includes(":"),"argument-error",{appName:se.name});const Xe={apiKey:N,authDomain:G,clientPlatform:g,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:es(g)},gt=new xt(se,Pe,Xe);return function Re(g,d){const f=d?.persistence||[],_=(Array.isArray(f)?f:[f]).map(ne);d?.errorMap&&g._updateErrorMap(d.errorMap),g._initializeWithPersistence(_,d?.popupRedirectResolver)}(gt,f),gt})(_,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((d,f,_)=>{d.getProvider("auth-internal").initialize()})),(0,ae._registerComponent)(new he.wA("auth-internal",d=>{const f=hn(d.getProvider("auth").getImmediate());return new mp(f)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ae.registerVersion)(gp,Vh,function yp(g){switch(g){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(g)),(0,ae.registerVersion)(gp,Vh,"esm2017")}("Browser");class xu extends Tt{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(d=>{this.resolveInialized=d})}addPassiveListener(d){this.passiveListeners.add(d)}removePassiveListener(d){this.passiveListeners.delete(d)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(d){return this.resolveInialized(),this.passiveListeners.forEach(f=>f(d)),super.onEvent(d)}initialized(){var d=this;return(0,I.Z)(function*(){yield d.initPromise})()}}function jh(g){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,I.Z)(function*(g){const d=yield So()._get(Zc(g));return d&&(yield So()._remove(Zc(g))),d})).apply(this,arguments)}function Dd(){const g=[],d="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let f=0;f<20;f++){const _=Math.floor(Math.random()*d.length);g.push(d.charAt(_))}return g.join("")}function So(){return ne(na)}function Zc(g){return z("authEvent",g.config.apiKey,g.name)}function Yc(g){if(!g?.includes("?"))return{};const[d,...f]=g.split("?");return(0,k.zd)(f.join("?"))}function Hh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:me("no-auth-event")}}function Jc(){var g;return(null===(g=self?.location)||void 0===g?void 0:g.protocol)||null}function va(g=(0,k.z$)()){return!("file:"!==Jc()&&"ionic:"!==Jc()&&"capacitor:"!==Jc()||!g.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ad(){try{const g=self.localStorage,d=sa();if(g)return g.setItem(d,"1"),g.removeItem(d),!function Sd(g=(0,k.z$)()){return function Ru(){return(0,k.w1)()&&11===document?.documentMode}()||function Cd(g=(0,k.z$)()){return/Edge\/\d+/.test(g)}(g)}()||(0,k.hl)()}catch{return Ia()&&(0,k.hl)()}return!1}function Ia(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Ao(){return(function Dp(){return"http:"===Jc()||"https:"===Jc()}()||(0,k.ru)()||va())&&!function Gh(){return(0,k.b$)()||(0,k.UG)()}()&&Ad()&&!Ia()}function Xc(){return va()&&typeof document<"u"}function el(){return(el=(0,I.Z)(function*(){return!!Xc()&&new Promise(g=>{const d=setTimeout(()=>{g(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(d),g(!0)})})})).apply(this,arguments)}const Ar={LOCAL:"local",NONE:"none",SESSION:"session"},wa=V,Ws="persistence";function tl(g){return _s.apply(this,arguments)}function _s(){return(_s=(0,I.Z)(function*(g){yield g._initializationPromise;const d=Ea(),f=z(Ws,g.config.apiKey,g.name);d&&d.setItem(f,g._getPersistence())})).apply(this,arguments)}function Ea(){var g;try{return(null===(g=function ku(){return typeof window<"u"?window:null}())||void 0===g?void 0:g.sessionStorage)||null}catch{return null}}const xo=V;class nr{constructor(){this.browserResolver=ne(class Em{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bi,this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){var G;H(null===(G=N.eventManagers[d._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const se=Su(d,f,_,Me(),S);return function Cu(g,d,f,_=500,S=600){const N=Math.max((window.screen.availHeight-S)/2,0).toString(),G=Math.max((window.screen.availWidth-_)/2,0).toString();let se="";const Pe=Object.assign(Object.assign({},Oh),{width:_.toString(),height:S.toString(),top:N,left:G}),Xe=(0,k.z$)().toLowerCase();f&&(se=qt(Xe)?"_blank":f),$e(Xe)&&(d=d||"http://localhost",Pe.scrollbars="yes");const gt=Object.entries(Pe).reduce((Zn,[ni,il])=>`${Zn}${ni}=${il},`,"");if(function Fr(g=(0,k.z$)()){var d;return Rt(g)&&!(null===(d=window.navigator)||void 0===d||!d.standalone)}(Xe)&&"_self"!==se)return function gd(g,d){const f=document.createElement("a");f.href=g,f.target=d;const _=document.createEvent("MouseEvent");_.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),f.dispatchEvent(_)}(d||"",se),new Tu(null);const ft=window.open(d||"",se,gt);V(ft,g,"popup-blocked");try{ft.focus()}catch{}return new Tu(ft)}(d,se,sa())})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N._originValidation(d),function fi(g){xn().location.href=g}(Su(d,f,_,Me(),S)),new Promise(()=>{})})()}_initialize(d){const f=d._key();if(this.eventManagers[f]){const{manager:S,promise:N}=this.eventManagers[f];return S?Promise.resolve(S):(H(N,"If manager is not set, promise should be"),N)}const _=this.initAndGetManager(d);return this.eventManagers[f]={promise:_},_.catch(()=>{delete this.eventManagers[f]}),_}initAndGetManager(d){var f=this;return(0,I.Z)(function*(){const _=yield function Du(g){return bu.apply(this,arguments)}(d),S=new Tt(d);return _.register("authEvent",N=>(V(N?.authEvent,d,"invalid-auth-event"),{status:S.onEvent(N.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),f.eventManagers[d._key()]={manager:S},f.iframes[d._key()]=_,S})()}_isIframeWebStorageSupported(d,f){this.iframes[d._key()].send(_d,{type:_d},S=>{var N;const G=null===(N=S?.[0])||void 0===N?void 0:N[_d];void 0!==G&&f(!!G),be(d,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function wu(g){return bo.apply(this,arguments)}(d)),this.originValidationPromises[f]}get _shouldInitProactively(){return Cs()||ct()||Rt()}}),this.cordovaResolver=ne(class $h{constructor(){this._redirectPersistence=bi,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_initialize(d){var f=this;return(0,I.Z)(function*(){const _=d._key();let S=f.eventManagers.get(_);return S||(S=new xu(d),f.eventManagers.set(_,S),f.attachCallbackListeners(d,S)),S})()}_openPopup(d){be(d,"operation-not-supported-in-this-environment")}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){!function Uh(g){var d,f,_,S,N,G,se,Pe,Xe,gt;const ft=To();V("function"==typeof(null===(d=ft?.universalLinks)||void 0===d?void 0:d.subscribe),g,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),V(typeof(null===(f=ft?.BuildInfo)||void 0===f?void 0:f.packageName)<"u",g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),V("function"==typeof(null===(N=null===(S=null===(_=ft?.cordova)||void 0===_?void 0:_.plugins)||void 0===S?void 0:S.browsertab)||void 0===N?void 0:N.openUrl),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(Pe=null===(se=null===(G=ft?.cordova)||void 0===G?void 0:G.plugins)||void 0===se?void 0:se.browsertab)||void 0===Pe?void 0:Pe.isAvailable),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),V("function"==typeof(null===(gt=null===(Xe=ft?.cordova)||void 0===Xe?void 0:Xe.InAppBrowser)||void 0===gt?void 0:gt.open),g,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(d);const G=yield N._initialize(d);yield G.initialized(),G.resetRedirect(),function wo(){fr.clear()}(),yield N._originValidation(d);const se=function vp(g,d,f=null){return{type:d,eventId:f,urlResponse:null,sessionId:Dd(),postBody:null,tenantId:g.tenantId,error:me(g,"no-auth-event")}}(d,_,S);yield function Ip(g,d){return So()._set(Zc(g),d)}(d,se);const Pe=yield function zs(g,d,f){return Co.apply(this,arguments)}(d,se,f),Xe=yield function Ed(g){const{cordova:d}=To();return new Promise(f=>{d.plugins.browsertab.isAvailable(_=>{let S=null;_?d.plugins.browsertab.openUrl(g):S=d.InAppBrowser.open(g,function Jn(g=(0,k.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(g)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(g)}()?"_blank":"_system","location=yes"),f(S)})})}(Pe);return function bm(g,d,f){return _p.apply(this,arguments)}(d,G,Xe)})()}_isIframeWebStorageSupported(d,f){throw new Error("Method not implemented.")}_originValidation(d){const f=d._key();return this.originValidationPromises[f]||(this.originValidationPromises[f]=function Id(g){return wd.apply(this,arguments)}(d)),this.originValidationPromises[f]}attachCallbackListeners(d,f){const{universalLinks:_,handleOpenURL:S,BuildInfo:N}=To(),G=setTimeout((0,I.Z)(function*(){yield jh(d),f.onEvent(Hh())}),500),se=function(){var gt=(0,I.Z)(function*(ft){clearTimeout(G);const Zn=yield jh(d);let ni=null;Zn&&ft?.url&&(ni=function wp(g,d){var f,_;const S=function dn(g){const d=Yc(g),f=d.link?decodeURIComponent(d.link):void 0,_=Yc(f).link,S=d.deep_link_id?decodeURIComponent(d.deep_link_id):void 0;return Yc(S).link||S||_||f||g}(d);if(S.includes("/__/auth/callback")){const N=Yc(S),G=N.firebaseError?function Cm(g){try{return JSON.parse(g)}catch{return null}}(decodeURIComponent(N.firebaseError)):null,se=null===(_=null===(f=G?.code)||void 0===f?void 0:f.split("auth/"))||void 0===_?void 0:_[1],Pe=se?me(se):null;return Pe?{type:g.type,eventId:g.eventId,tenantId:g.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:g.type,eventId:g.eventId,tenantId:g.tenantId,sessionId:g.sessionId,urlResponse:S,postBody:null}}return null}(Zn,ft.url)),f.onEvent(ni||Hh())});return function(Zn){return gt.apply(this,arguments)}}();typeof _<"u"&&"function"==typeof _.subscribe&&_.subscribe(null,se);const Pe=S,Xe=`${N.packageName.toLowerCase()}://`;To().handleOpenURL=function(){var gt=(0,I.Z)(function*(ft){if(ft.toLowerCase().startsWith(Xe)&&se({url:ft}),"function"==typeof Pe)try{Pe(ft)}catch(Zn){console.error(Zn)}});return function(ft){return gt.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=bi,this._completeRedirectFn=Z,this._overrideRedirectResult=Hr}_initialize(d){var f=this;return(0,I.Z)(function*(){return yield f.selectUnderlyingResolver(),f.assertedUnderlyingResolver._initialize(d)})()}_openPopup(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openPopup(d,f,_,S)})()}_openRedirect(d,f,_,S){var N=this;return(0,I.Z)(function*(){return yield N.selectUnderlyingResolver(),N.assertedUnderlyingResolver._openRedirect(d,f,_,S)})()}_isIframeWebStorageSupported(d,f){this.assertedUnderlyingResolver._isIframeWebStorageSupported(d,f)}_originValidation(d){return this.assertedUnderlyingResolver._originValidation(d)}get _shouldInitProactively(){return Xc()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return xo(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var d=this;return(0,I.Z)(function*(){if(d.underlyingResolver)return;const f=yield function Iv(){return el.apply(this,arguments)}();d.underlyingResolver=f?d.cordovaResolver:d.browserResolver})()}}function nl(g){return g.unwrap()}function Sm(g){return xd(g)}function xd(g){const{_tokenResponse:d}=g instanceof k.ZR?g.customData:g;if(!d)return null;if(!(g instanceof k.ZR)&&"temporaryProof"in d&&"phoneNumber"in d)return ei.credentialFromResult(g);const f=d.providerId;if(!f||"password"===f)return null;let _;switch(f){case"google.com":_=Wa;break;case"facebook.com":_=Wo;break;case"github.com":_=Tc;break;case"twitter.com":_=Vr;break;default:const{oauthIdToken:S,oauthAccessToken:N,oauthTokenSecret:G,pendingToken:se,nonce:Pe}=d;return N||G||S||se?se?f.startsWith("saml.")?qo._create(f,se):Mi._fromParams({providerId:f,signInMethod:f,pendingToken:se,idToken:S,accessToken:N}):new Ms(f).credential({idToken:S,accessToken:N,rawNonce:Pe}):null}return g instanceof k.ZR?_.credentialFromError(g):_.credentialFromResult(g)}function rr(g,d){return d.catch(f=>{throw f instanceof k.ZR&&function Cp(g,d){var f,_;const S=null===(f=d.customData)||void 0===f?void 0:f._tokenResponse;if("auth/multi-factor-auth-required"===(null===(_=d)||void 0===_?void 0:_.code))d.resolver=new Md(g,function bn(g,d){var f;const _=(0,k.m9)(g),S=d;return V(d.customData.operationType,_,"argument-error"),V(null===(f=S.customData._serverResponse)||void 0===f?void 0:f.mfaPendingCredential,_,"argument-error"),cu._fromError(_,S)}(g,d));else if(S){const N=xd(d),G=d;N&&(G.credential=N,G.tenantId=S.tenantId||void 0,G.email=S.email||void 0,G.phoneNumber=S.phoneNumber||void 0)}}(g,f),f}).then(f=>{const S=f.user;return{operationType:f.operationType,credential:Sm(f),additionalUserInfo:au(f),user:Ci.getOrCreate(S)}})}function qs(g,d){return ji.apply(this,arguments)}function ji(){return(ji=(0,I.Z)(function*(g,d){const f=yield d;return{verificationId:f.verificationId,confirm:_=>rr(g,f.confirm(_))}})).apply(this,arguments)}class Md{constructor(d,f){this.resolver=f,this.auth=function zh(g){return g.wrapped()}(d)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(d){return rr(nl(this.auth),this.resolver.resolveSignIn(d))}}class Ci{constructor(d){this._delegate=d,this.multiFactor=function uo(g){const d=(0,k.m9)(g);return ao.has(d)||ao.set(d,Nh._fromUser(d)),ao.get(d)}(d)}static getOrCreate(d){return Ci.USER_MAP.has(d)||Ci.USER_MAP.set(d,new Ci(d)),Ci.USER_MAP.get(d)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(d){return this._delegate.getIdTokenResult(d)}getIdToken(d){return this._delegate.getIdToken(d)}linkAndRetrieveDataWithCredential(d){return this.linkWithCredential(d)}linkWithCredential(d){var f=this;return(0,I.Z)(function*(){return rr(f.auth,Qa(f._delegate,d))})()}linkWithPhoneNumber(d,f){var _=this;return(0,I.Z)(function*(){return qs(_.auth,function yr(g,d,f){return dr.apply(this,arguments)}(_._delegate,d,f))})()}linkWithPopup(d){var f=this;return(0,I.Z)(function*(){return rr(f.auth,function _o(g,d,f){return Cr.apply(this,arguments)}(f._delegate,d,nr))})()}linkWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield tl(hn(f.auth)),function E(g,d,f){return function b(g,d,f){return A.apply(this,arguments)}(g,d,f)}(f._delegate,d,nr)})()}reauthenticateAndRetrieveDataWithCredential(d){return this.reauthenticateWithCredential(d)}reauthenticateWithCredential(d){var f=this;return(0,I.Z)(function*(){return rr(f.auth,Ja(f._delegate,d))})()}reauthenticateWithPhoneNumber(d,f){return qs(this.auth,function qn(g,d,f){return mo.apply(this,arguments)}(this._delegate,d,f))}reauthenticateWithPopup(d){return rr(this.auth,function ge(g,d,f){return gi.apply(this,arguments)}(this._delegate,d,nr))}reauthenticateWithRedirect(d){var f=this;return(0,I.Z)(function*(){return yield tl(hn(f.auth)),function Eo(g,d,f){return function Tn(g,d,f){return Vi.apply(this,arguments)}(g,d,f)}(f._delegate,d,nr)})()}sendEmailVerification(d){return function kc(g,d){return ea.apply(this,arguments)}(this._delegate,d)}unlink(d){var f=this;return(0,I.Z)(function*(){return yield function Tr(g,d){return qa.apply(this,arguments)}(f._delegate,d),f})()}updateEmail(d){return function nd(g,d){return Ps((0,k.m9)(g),d,null)}(this._delegate,d)}updatePassword(d){return function ks(g,d){return Ps((0,k.m9)(g),null,d)}(this._delegate,d)}updatePhoneNumber(d){return function ps(g,d){return ha.apply(this,arguments)}(this._delegate,d)}updateProfile(d){return function Lc(g,d){return Fc.apply(this,arguments)}(this._delegate,d)}verifyBeforeUpdateEmail(d,f){return function Pc(g,d,f){return iu.apply(this,arguments)}(this._delegate,d,f)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ci.USER_MAP=new WeakMap;const Mo=V;let fn=(()=>{class g{constructor(f,_){if(this.app=f,_.isInitialized())return this._delegate=_.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:S}=f.options;Mo(S,"invalid-api-key",{appName:f.name}),Mo(S,"invalid-api-key",{appName:f.name});const N=typeof window<"u"?nr:void 0;this._delegate=_.initialize({options:{persistence:rl(S,f.name),popupRedirectResolver:N}}),this._delegate._updateErrorMap(Ae),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ci.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(f){this._delegate.languageCode=f}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(f){this._delegate.tenantId=f}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(f,_){!function $a(g,d,f){const _=hn(g);V(_._canInitEmulator,_,"emulator-config-failed"),V(/^https?:\/\//.test(d),_,"invalid-emulator-scheme");const S=!!f?.disableWarnings,N=wi(d),{host:G,port:se}=function Ln(g){const d=wi(g),f=/(\/\/)?([^?#/]+)/.exec(g.substr(d.length));if(!f)return{host:"",port:null};const _=f[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(_);if(S){const N=S[1];return{host:N,port:ts(_.substr(N.length+1))}}{const[N,G]=_.split(":");return{host:N,port:ts(G)}}}(d);_.config.emulator={url:`${N}//${G}${null===se?"":`:${se}`}/`},_.settings.appVerificationDisabledForTesting=!0,_.emulatorConfig=Object.freeze({host:G,port:se,protocol:N.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function ns(){function g(){const d=document.createElement("p"),f=d.style;d.innerText="Running in emulator mode. Do not use with production credentials.",f.position="fixed",f.width="100%",f.backgroundColor="#ffffff",f.border=".1em solid #000000",f.color="#b50000",f.bottom="0px",f.left="0px",f.margin="0px",f.zIndex="10000",f.textAlign="center",d.classList.add("firebase-emulator-warning"),document.body.appendChild(d)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",g):g())}()}(this._delegate,f,_)}applyActionCode(f){return function Xr(g,d){return Zo.apply(this,arguments)}(this._delegate,f)}checkActionCode(f){return Yo(this._delegate,f)}confirmPasswordReset(f,_){return function nu(g,d,f){return io.apply(this,arguments)}(this._delegate,f,_)}createUserWithEmailAndPassword(f,_){var S=this;return(0,I.Z)(function*(){return rr(S._delegate,function Qo(g,d,f){return Dn.apply(this,arguments)}(S._delegate,f,_))})()}fetchProvidersForEmail(f){return this.fetchSignInMethodsForEmail(f)}fetchSignInMethodsForEmail(f){return function ru(g,d){return Xo.apply(this,arguments)}(this._delegate,f)}isSignInWithEmailLink(f){return function Li(g,d){return"EMAIL_SIGNIN"===za.parseLink(d)?.operation}(0,f)}getRedirectResult(){var f=this;return(0,I.Z)(function*(){Mo(Ao(),f._delegate,"operation-not-supported-in-this-environment");const _=yield function O(g,d){return W.apply(this,arguments)}(f._delegate,nr);return _?rr(f._delegate,Promise.resolve(_)):{credential:null,user:null}})()}addFrameworkForLogging(f){!function Gr(g,d){hn(g)._logFramework(d)}(this._delegate,f)}onAuthStateChanged(f,_,S){const{next:N,error:G,complete:se}=Pu(f,_,S);return this._delegate.onAuthStateChanged(N,G,se)}onIdTokenChanged(f,_,S){const{next:N,error:G,complete:se}=Pu(f,_,S);return this._delegate.onIdTokenChanged(N,G,se)}sendSignInLinkToEmail(f,_){return function Nc(g,d,f){return Rs.apply(this,arguments)}(this._delegate,f,_)}sendPasswordResetEmail(f,_){return function tu(g,d,f){return En.apply(this,arguments)}(this._delegate,f,_||void 0)}setPersistence(f){var _=this;return(0,I.Z)(function*(){let S;switch(function bp(g,d){wa(Object.values(Ar).includes(d),g,"invalid-persistence-type"),(0,k.b$)()?wa(d!==Ar.SESSION,g,"unsupported-persistence-type"):(0,k.UG)()?wa(d===Ar.NONE,g,"unsupported-persistence-type"):Ia()?wa(d===Ar.NONE||d===Ar.LOCAL&&(0,k.hl)(),g,"unsupported-persistence-type"):wa(d===Ar.NONE||Ad(),g,"unsupported-persistence-type")}(_._delegate,f),f){case Ar.SESSION:S=bi;break;case Ar.LOCAL:S=(yield ne(co)._isAvailable())?co:na;break;case Ar.NONE:S=F;break;default:return be("argument-error",{appName:_._delegate.name})}return _._delegate.setPersistence(S)})()}signInAndRetrieveDataWithCredential(f){return this.signInWithCredential(f)}signInAnonymously(){return rr(this._delegate,function Ah(g){return wn.apply(this,arguments)}(this._delegate))}signInWithCredential(f){return rr(this._delegate,mn(this._delegate,f))}signInWithCustomToken(f){return rr(this._delegate,function Ac(g,d){return Ko.apply(this,arguments)}(this._delegate,f))}signInWithEmailAndPassword(f,_){return rr(this._delegate,function Di(g,d,f){return mn((0,k.m9)(g),Ei.credential(d,f))}(this._delegate,f,_))}signInWithEmailLink(f,_){return rr(this._delegate,function op(g,d,f){return Jo.apply(this,arguments)}(this._delegate,f,_))}signInWithPhoneNumber(f,_){return qs(this._delegate,function zc(g,d,f){return pi.apply(this,arguments)}(this._delegate,f,_))}signInWithPopup(f){var _=this;return(0,I.Z)(function*(){return Mo(Ao(),_._delegate,"operation-not-supported-in-this-environment"),rr(_._delegate,function pd(g,d,f){return pa.apply(this,arguments)}(_._delegate,f,nr))})()}signInWithRedirect(f){var _=this;return(0,I.Z)(function*(){return Mo(Ao(),_._delegate,"operation-not-supported-in-this-environment"),yield tl(_._delegate),function Vn(g,d,f){return function kh(g,d,f){return Bn.apply(this,arguments)}(g,d,f)}(_._delegate,f,nr)})()}updateCurrentUser(f){return this._delegate.updateCurrentUser(f)}verifyPasswordResetCode(f){return function Mc(g,d){return td.apply(this,arguments)}(this._delegate,f)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return g.Persistence=Ar,g})();function Pu(g,d,f){let _=g;"function"!=typeof g&&({next:_,error:d,complete:f}=g);const S=_;return{next:G=>S(G&&Ci.getOrCreate(G)),error:d,complete:f}}function rl(g,d){const f=function Tp(g,d){const f=Ea();if(!f)return[];const _=z(Ws,g,d);switch(f.getItem(_)){case Ar.NONE:return[F];case Ar.LOCAL:return[co,bi];case Ar.SESSION:return[bi];default:return[]}}(g,d);if(typeof self<"u"&&!f.includes(co)&&f.push(co),typeof window<"u")for(const _ of[na,bi])f.includes(_)||f.push(_);return f.includes(F)||f.push(F),f}class No{constructor(){this.providerId="phone",this._delegate=new ei(nl(X.Z.auth()))}static credential(d,f){return ei.credential(d,f)}verifyPhoneNumber(d,f){return this._delegate.verifyPhoneNumber(d,f)}unwrap(){return this._delegate}}No.PHONE_SIGN_IN_METHOD=ei.PHONE_SIGN_IN_METHOD,No.PROVIDER_ID=ei.PROVIDER_ID;const wv=V;class Sp{constructor(d,f,_=X.Z.app()){var S;wv(null===(S=_.options)||void 0===S?void 0:S.apiKey,"invalid-api-key",{appName:_.name}),this._delegate=new tr(d,f,_.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Am(g){g.INTERNAL.registerComponent(new he.wA("auth-compat",d=>{const f=d.getProvider("app-compat").getImmediate(),_=d.getProvider("auth");return new fn(f,_)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ei,FacebookAuthProvider:Wo,GithubAuthProvider:Tc,GoogleAuthProvider:Wa,OAuthProvider:Ms,SAMLAuthProvider:Qr,PhoneAuthProvider:No,PhoneMultiFactorGenerator:Au,RecaptchaVerifier:Sp,TwitterAuthProvider:Vr,Auth:fn,AuthCredential:ur,Error:k.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),g.registerVersion("@firebase/auth-compat","0.2.23")}(X.Z)},8306:(dt,Se,L)=>{L.d(Se,{y:()=>$});var I=L(2961),X=L(727),k=L(8822),ae=L(4671);var he=L(2416),le=L(576),ve=L(2806);let $=(()=>{class xe{constructor(We){We&&(this._subscribe=We)}lift(We){const fe=new xe;return fe.source=this,fe.operator=We,fe}subscribe(We,fe,pe){const qe=function ze(xe){return xe&&xe instanceof I.Lv||function Y(xe){return xe&&(0,le.m)(xe.next)&&(0,le.m)(xe.error)&&(0,le.m)(xe.complete)}(xe)&&(0,X.Nn)(xe)}(We)?We:new I.Hp(We,fe,pe);return(0,ve.x)(()=>{const{operator:Qe,source:be}=this;qe.add(Qe?Qe.call(qe,be):be?this._subscribe(qe):this._trySubscribe(qe))}),qe}_trySubscribe(We){try{return this._subscribe(We)}catch(fe){We.error(fe)}}forEach(We,fe){return new(fe=U(fe))((pe,qe)=>{const Qe=new I.Hp({next:be=>{try{We(be)}catch(me){qe(me),Qe.unsubscribe()}},error:qe,complete:pe});this.subscribe(Qe)})}_subscribe(We){var fe;return null===(fe=this.source)||void 0===fe?void 0:fe.subscribe(We)}[k.L](){return this}pipe(...We){return function de(xe){return 0===xe.length?ae.y:1===xe.length?xe[0]:function(We){return xe.reduce((fe,pe)=>pe(fe),We)}}(We)(this)}toPromise(We){return new(We=U(We))((fe,pe)=>{let qe;this.subscribe(Qe=>qe=Qe,Qe=>pe(Qe),()=>fe(qe))})}}return xe.create=Ae=>new xe(Ae),xe})();function U(xe){var Ae;return null!==(Ae=xe??he.v.Promise)&&void 0!==Ae?Ae:Promise}},7579:(dt,Se,L)=>{L.d(Se,{x:()=>he});var I=L(8306),X=L(727);const ae=(0,L(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ie=L(8737),de=L(2806);let he=(()=>{class ve extends I.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(U){const Y=new le(this,this);return Y.operator=U,Y}_throwIfClosed(){if(this.closed)throw new ae}next(U){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(U)}})}error(U){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=U;const{observers:Y}=this;for(;Y.length;)Y.shift().error(U)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:U}=this;for(;U.length;)U.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var U;return(null===(U=this.observers)||void 0===U?void 0:U.length)>0}_trySubscribe(U){return this._throwIfClosed(),super._trySubscribe(U)}_subscribe(U){return this._throwIfClosed(),this._checkFinalizedStatuses(U),this._innerSubscribe(U)}_innerSubscribe(U){const{hasError:Y,isStopped:ze,observers:xe}=this;return Y||ze?X.Lc:(this.currentObservers=null,xe.push(U),new X.w0(()=>{this.currentObservers=null,(0,ie.P)(xe,U)}))}_checkFinalizedStatuses(U){const{hasError:Y,thrownError:ze,isStopped:xe}=this;Y?U.error(ze):xe&&U.complete()}asObservable(){const U=new I.y;return U.source=this,U}}return ve.create=($,U)=>new le($,U),ve})();class le extends he{constructor($,U){super(),this.destination=$,this.source=U}next($){var U,Y;null===(Y=null===(U=this.destination)||void 0===U?void 0:U.next)||void 0===Y||Y.call(U,$)}error($){var U,Y;null===(Y=null===(U=this.destination)||void 0===U?void 0:U.error)||void 0===Y||Y.call(U,$)}complete(){var $,U;null===(U=null===($=this.destination)||void 0===$?void 0:$.complete)||void 0===U||U.call($)}_subscribe($){var U,Y;return null!==(Y=null===(U=this.source)||void 0===U?void 0:U.subscribe($))&&void 0!==Y?Y:X.Lc}}},2961:(dt,Se,L)=>{L.d(Se,{Hp:()=>We,Lv:()=>Y});var I=L(576),X=L(727),k=L(2416),ae=L(7849);function ie(){}const de=ve("C",void 0,void 0);function ve(be,me,Ie){return{kind:be,value:me,error:Ie}}var $=L(3410),U=L(2806);class Y extends X.w0{constructor(me){super(),this.isStopped=!1,me?(this.destination=me,(0,X.Nn)(me)&&me.add(this)):this.destination=Qe}static create(me,Ie,Ue){return new We(me,Ie,Ue)}next(me){this.isStopped?qe(function le(be){return ve("N",be,void 0)}(me),this):this._next(me)}error(me){this.isStopped?qe(function he(be){return ve("E",void 0,be)}(me),this):(this.isStopped=!0,this._error(me))}complete(){this.isStopped?qe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(me){this.destination.next(me)}_error(me){try{this.destination.error(me)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ze=Function.prototype.bind;function xe(be,me){return ze.call(be,me)}class Ae{constructor(me){this.partialObserver=me}next(me){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(me)}catch(Ue){fe(Ue)}}error(me){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(me)}catch(Ue){fe(Ue)}else fe(me)}complete(){const{partialObserver:me}=this;if(me.complete)try{me.complete()}catch(Ie){fe(Ie)}}}class We extends Y{constructor(me,Ie,Ue){let Ve;if(super(),(0,I.m)(me)||!me)Ve={next:me??void 0,error:Ie??void 0,complete:Ue??void 0};else{let V;this&&k.v.useDeprecatedNextContext?(V=Object.create(me),V.unsubscribe=()=>this.unsubscribe(),Ve={next:me.next&&xe(me.next,V),error:me.error&&xe(me.error,V),complete:me.complete&&xe(me.complete,V)}):Ve=me}this.destination=new Ae(Ve)}}function fe(be){k.v.useDeprecatedSynchronousErrorHandling?(0,U.O)(be):(0,ae.h)(be)}function qe(be,me){const{onStoppedNotification:Ie}=k.v;Ie&&$.z.setTimeout(()=>Ie(be,me))}const Qe={closed:!0,next:ie,error:function pe(be){throw be},complete:ie}},727:(dt,Se,L)=>{L.d(Se,{Lc:()=>de,w0:()=>ie,Nn:()=>he});var I=L(576);const k=(0,L(3888).d)(ve=>function(U){ve(this),this.message=U?`${U.length} errors occurred during unsubscription:\n${U.map((Y,ze)=>`${ze+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=U});var ae=L(8737);class ie{constructor($){this.initialTeardown=$,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let $;if(!this.closed){this.closed=!0;const{_parentage:U}=this;if(U)if(this._parentage=null,Array.isArray(U))for(const xe of U)xe.remove(this);else U.remove(this);const{initialTeardown:Y}=this;if((0,I.m)(Y))try{Y()}catch(xe){$=xe instanceof k?xe.errors:[xe]}const{_finalizers:ze}=this;if(ze){this._finalizers=null;for(const xe of ze)try{le(xe)}catch(Ae){$=$??[],Ae instanceof k?$=[...$,...Ae.errors]:$.push(Ae)}}if($)throw new k($)}}add($){var U;if($&&$!==this)if(this.closed)le($);else{if($ instanceof ie){if($.closed||$._hasParent(this))return;$._addParent(this)}(this._finalizers=null!==(U=this._finalizers)&&void 0!==U?U:[]).push($)}}_hasParent($){const{_parentage:U}=this;return U===$||Array.isArray(U)&&U.includes($)}_addParent($){const{_parentage:U}=this;this._parentage=Array.isArray(U)?(U.push($),U):U?[U,$]:$}_removeParent($){const{_parentage:U}=this;U===$?this._parentage=null:Array.isArray(U)&&(0,ae.P)(U,$)}remove($){const{_finalizers:U}=this;U&&(0,ae.P)(U,$),$ instanceof ie&&$._removeParent(this)}}ie.EMPTY=(()=>{const ve=new ie;return ve.closed=!0,ve})();const de=ie.EMPTY;function he(ve){return ve instanceof ie||ve&&"closed"in ve&&(0,I.m)(ve.remove)&&(0,I.m)(ve.add)&&(0,I.m)(ve.unsubscribe)}function le(ve){(0,I.m)(ve)?ve():ve.unsubscribe()}},2416:(dt,Se,L)=>{L.d(Se,{v:()=>I});const I={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(dt,Se,L)=>{L.d(Se,{E:()=>X});const X=new(L(8306).y)(ie=>ie.complete())},8996:(dt,Se,L)=>{L.d(Se,{D:()=>me});var I=L(8421),X=L(5363),k=L(9468),de=L(8306),le=L(2202),ve=L(576),$=L(9672);function Y(Ie,Ue){if(!Ie)throw new Error("Iterable cannot be null");return new de.y(Ve=>{(0,$.f)(Ve,Ue,()=>{const V=Ie[Symbol.asyncIterator]();(0,$.f)(Ve,Ue,()=>{V.next().then(ce=>{ce.done?Ve.complete():Ve.next(ce.value)})},0,!0)})})}var ze=L(3670),xe=L(8239),Ae=L(1144),We=L(6495),fe=L(2206),pe=L(4532),qe=L(3260);function me(Ie,Ue){return Ue?function be(Ie,Ue){if(null!=Ie){if((0,ze.c)(Ie))return function ae(Ie,Ue){return(0,I.Xf)(Ie).pipe((0,k.R)(Ue),(0,X.Q)(Ue))}(Ie,Ue);if((0,Ae.z)(Ie))return function he(Ie,Ue){return new de.y(Ve=>{let V=0;return Ue.schedule(function(){V===Ie.length?Ve.complete():(Ve.next(Ie[V++]),Ve.closed||this.schedule())})})}(Ie,Ue);if((0,xe.t)(Ie))return function ie(Ie,Ue){return(0,I.Xf)(Ie).pipe((0,k.R)(Ue),(0,X.Q)(Ue))}(Ie,Ue);if((0,fe.D)(Ie))return Y(Ie,Ue);if((0,We.T)(Ie))return function U(Ie,Ue){return new de.y(Ve=>{let V;return(0,$.f)(Ve,Ue,()=>{V=Ie[le.h](),(0,$.f)(Ve,Ue,()=>{let ce,H;try{({value:ce,done:H}=V.next())}catch(Q){return void Ve.error(Q)}H?Ve.complete():Ve.next(ce)},0,!0)}),()=>(0,ve.m)(V?.return)&&V.return()})}(Ie,Ue);if((0,qe.L)(Ie))return function Qe(Ie,Ue){return Y((0,qe.Q)(Ie),Ue)}(Ie,Ue)}throw(0,pe.z)(Ie)}(Ie,Ue):(0,I.Xf)(Ie)}},8421:(dt,Se,L)=>{L.d(Se,{Xf:()=>ze});var I=L(655),X=L(1144),k=L(8239),ae=L(8306),ie=L(3670),de=L(2206),he=L(4532),le=L(6495),ve=L(3260),$=L(576),U=L(7849),Y=L(8822);function ze(be){if(be instanceof ae.y)return be;if(null!=be){if((0,ie.c)(be))return function xe(be){return new ae.y(me=>{const Ie=be[Y.L]();if((0,$.m)(Ie.subscribe))return Ie.subscribe(me);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(be);if((0,X.z)(be))return function Ae(be){return new ae.y(me=>{for(let Ie=0;Ie<be.length&&!me.closed;Ie++)me.next(be[Ie]);me.complete()})}(be);if((0,k.t)(be))return function We(be){return new ae.y(me=>{be.then(Ie=>{me.closed||(me.next(Ie),me.complete())},Ie=>me.error(Ie)).then(null,U.h)})}(be);if((0,de.D)(be))return pe(be);if((0,le.T)(be))return function fe(be){return new ae.y(me=>{for(const Ie of be)if(me.next(Ie),me.closed)return;me.complete()})}(be);if((0,ve.L)(be))return function qe(be){return pe((0,ve.Q)(be))}(be)}throw(0,he.z)(be)}function pe(be){return new ae.y(me=>{(function Qe(be,me){var Ie,Ue,Ve,V;return(0,I.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,I.KL)(be);!(Ue=yield Ie.next()).done;)if(me.next(Ue.value),me.closed)return}catch(ce){Ve={error:ce}}finally{try{Ue&&!Ue.done&&(V=Ie.return)&&(yield V.call(Ie))}finally{if(Ve)throw Ve.error}}me.complete()})})(be,me).catch(Ie=>me.error(Ie))})}},6451:(dt,Se,L)=>{L.d(Se,{T:()=>de});var I=L(6131),X=L(8421),k=L(515),ae=L(7669),ie=L(8996);function de(...he){const le=(0,ae.yG)(he),ve=(0,ae._6)(he,1/0),$=he;return $.length?1===$.length?(0,X.Xf)($[0]):(0,I.J)(ve)((0,ie.D)($,le)):k.E}},5403:(dt,Se,L)=>{L.d(Se,{x:()=>X});var I=L(2961);function X(ae,ie,de,he,le){return new k(ae,ie,de,he,le)}class k extends I.Lv{constructor(ie,de,he,le,ve,$){super(ie),this.onFinalize=ve,this.shouldUnsubscribe=$,this._next=de?function(U){try{de(U)}catch(Y){ie.error(Y)}}:super._next,this._error=le?function(U){try{le(U)}catch(Y){ie.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=he?function(){try{he()}catch(U){ie.error(U)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ie;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ie=this.onFinalize)||void 0===ie||ie.call(this))}}}},4004:(dt,Se,L)=>{L.d(Se,{U:()=>k});var I=L(4482),X=L(5403);function k(ae,ie){return(0,I.e)((de,he)=>{let le=0;de.subscribe((0,X.x)(he,ve=>{he.next(ae.call(ie,ve,le++))}))})}},6131:(dt,Se,L)=>{L.d(Se,{J:()=>$});var I=L(4004),X=L(8421),k=L(4482),ae=L(9672),ie=L(5403),he=L(576);function le(U,Y,ze=1/0){return(0,he.m)(Y)?le((xe,Ae)=>(0,I.U)((We,fe)=>Y(xe,We,Ae,fe))((0,X.Xf)(U(xe,Ae))),ze):("number"==typeof Y&&(ze=Y),(0,k.e)((xe,Ae)=>function de(U,Y,ze,xe,Ae,We,fe,pe){const qe=[];let Qe=0,be=0,me=!1;const Ie=()=>{me&&!qe.length&&!Qe&&Y.complete()},Ue=V=>Qe<xe?Ve(V):qe.push(V),Ve=V=>{We&&Y.next(V),Qe++;let ce=!1;(0,X.Xf)(ze(V,be++)).subscribe((0,ie.x)(Y,H=>{Ae?.(H),We?Ue(H):Y.next(H)},()=>{ce=!0},void 0,()=>{if(ce)try{for(Qe--;qe.length&&Qe<xe;){const H=qe.shift();fe?(0,ae.f)(Y,fe,()=>Ve(H)):Ve(H)}Ie()}catch(H){Y.error(H)}}))};return U.subscribe((0,ie.x)(Y,Ue,()=>{me=!0,Ie()})),()=>{pe?.()}}(xe,Ae,U,ze)))}var ve=L(4671);function $(U=1/0){return le(ve.y,U)}},5363:(dt,Se,L)=>{L.d(Se,{Q:()=>ae});var I=L(9672),X=L(4482),k=L(5403);function ae(ie,de=0){return(0,X.e)((he,le)=>{he.subscribe((0,k.x)(le,ve=>(0,I.f)(le,ie,()=>le.next(ve),de),()=>(0,I.f)(le,ie,()=>le.complete(),de),ve=>(0,I.f)(le,ie,()=>le.error(ve),de)))})}},3099:(dt,Se,L)=>{L.d(Se,{B:()=>ie});var I=L(8421),X=L(7579),k=L(2961),ae=L(4482);function ie(he={}){const{connector:le=(()=>new X.x),resetOnError:ve=!0,resetOnComplete:$=!0,resetOnRefCountZero:U=!0}=he;return Y=>{let ze,xe,Ae,We=0,fe=!1,pe=!1;const qe=()=>{xe?.unsubscribe(),xe=void 0},Qe=()=>{qe(),ze=Ae=void 0,fe=pe=!1},be=()=>{const me=ze;Qe(),me?.unsubscribe()};return(0,ae.e)((me,Ie)=>{We++,!pe&&!fe&&qe();const Ue=Ae=Ae??le();Ie.add(()=>{We--,0===We&&!pe&&!fe&&(xe=de(be,U))}),Ue.subscribe(Ie),!ze&&We>0&&(ze=new k.Hp({next:Ve=>Ue.next(Ve),error:Ve=>{pe=!0,qe(),xe=de(Qe,ve,Ve),Ue.error(Ve)},complete:()=>{fe=!0,qe(),xe=de(Qe,$),Ue.complete()}}),(0,I.Xf)(me).subscribe(ze))})(Y)}}function de(he,le,...ve){if(!0===le)return void he();if(!1===le)return;const $=new k.Hp({next:()=>{$.unsubscribe(),he()}});return le(...ve).subscribe($)}},9468:(dt,Se,L)=>{L.d(Se,{R:()=>X});var I=L(4482);function X(k,ae=0){return(0,I.e)((ie,de)=>{de.add(k.schedule(()=>ie.subscribe(de),ae))})}},4408:(dt,Se,L)=>{L.d(Se,{o:()=>ie});var I=L(727);class X extends I.w0{constructor(he,le){super()}schedule(he,le=0){return this}}const k={setInterval(de,he,...le){const{delegate:ve}=k;return ve?.setInterval?ve.setInterval(de,he,...le):setInterval(de,he,...le)},clearInterval(de){const{delegate:he}=k;return(he?.clearInterval||clearInterval)(de)},delegate:void 0};var ae=L(8737);class ie extends X{constructor(he,le){super(he,le),this.scheduler=he,this.work=le,this.pending=!1}schedule(he,le=0){var ve;if(this.closed)return this;this.state=he;const $=this.id,U=this.scheduler;return null!=$&&(this.id=this.recycleAsyncId(U,$,le)),this.pending=!0,this.delay=le,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(U,this.id,le),this}requestAsyncId(he,le,ve=0){return k.setInterval(he.flush.bind(he,this),ve)}recycleAsyncId(he,le,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return le;null!=le&&k.clearInterval(le)}execute(he,le){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(he,le);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,le){let $,ve=!1;try{this.work(he)}catch(U){ve=!0,$=U||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),$}unsubscribe(){if(!this.closed){const{id:he,scheduler:le}=this,{actions:ve}=le;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(ve,this),null!=he&&(this.id=this.recycleAsyncId(le,he,null)),this.delay=null,super.unsubscribe()}}}},7565:(dt,Se,L)=>{L.d(Se,{v:()=>k});var I=L(6063);class X{constructor(ie,de=X.now){this.schedulerActionCtor=ie,this.now=de}schedule(ie,de=0,he){return new this.schedulerActionCtor(this,ie).schedule(he,de)}}X.now=I.l.now;class k extends X{constructor(ie,de=X.now){super(ie,de),this.actions=[],this._active=!1}flush(ie){const{actions:de}=this;if(this._active)return void de.push(ie);let he;this._active=!0;do{if(he=ie.execute(ie.state,ie.delay))break}while(ie=de.shift());if(this._active=!1,he){for(;ie=de.shift();)ie.unsubscribe();throw he}}}},4986:(dt,Se,L)=>{L.d(Se,{z:()=>k});var I=L(4408);const k=new(L(7565).v)(I.o)},6063:(dt,Se,L)=>{L.d(Se,{l:()=>I});const I={now:()=>(I.delegate||Date).now(),delegate:void 0}},3410:(dt,Se,L)=>{L.d(Se,{z:()=>I});const I={setTimeout(X,k,...ae){const{delegate:ie}=I;return ie?.setTimeout?ie.setTimeout(X,k,...ae):setTimeout(X,k,...ae)},clearTimeout(X){const{delegate:k}=I;return(k?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(dt,Se,L)=>{L.d(Se,{h:()=>X});const X=function I(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(dt,Se,L)=>{L.d(Se,{L:()=>I});const I="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(dt,Se,L)=>{L.d(Se,{_6:()=>de,yG:()=>ie});var I=L(576);function k(he){return he[he.length-1]}function ie(he){return function X(he){return he&&(0,I.m)(he.schedule)}(k(he))?he.pop():void 0}function de(he,le){return"number"==typeof k(he)?he.pop():le}},8737:(dt,Se,L)=>{function I(X,k){if(X){const ae=X.indexOf(k);0<=ae&&X.splice(ae,1)}}L.d(Se,{P:()=>I})},3888:(dt,Se,L)=>{function I(X){const ae=X(ie=>{Error.call(ie),ie.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}L.d(Se,{d:()=>I})},2806:(dt,Se,L)=>{L.d(Se,{O:()=>ae,x:()=>k});var I=L(2416);let X=null;function k(ie){if(I.v.useDeprecatedSynchronousErrorHandling){const de=!X;if(de&&(X={errorThrown:!1,error:null}),ie(),de){const{errorThrown:he,error:le}=X;if(X=null,he)throw le}}else ie()}function ae(ie){I.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ie)}},9672:(dt,Se,L)=>{function I(X,k,ae,ie=0,de=!1){const he=k.schedule(function(){ae(),de?X.add(this.schedule(null,ie)):this.unsubscribe()},ie);if(X.add(he),!de)return he}L.d(Se,{f:()=>I})},4671:(dt,Se,L)=>{function I(X){return X}L.d(Se,{y:()=>I})},1144:(dt,Se,L)=>{L.d(Se,{z:()=>I});const I=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(dt,Se,L)=>{L.d(Se,{D:()=>X});var I=L(576);function X(k){return Symbol.asyncIterator&&(0,I.m)(k?.[Symbol.asyncIterator])}},576:(dt,Se,L)=>{function I(X){return"function"==typeof X}L.d(Se,{m:()=>I})},3670:(dt,Se,L)=>{L.d(Se,{c:()=>k});var I=L(8822),X=L(576);function k(ae){return(0,X.m)(ae[I.L])}},6495:(dt,Se,L)=>{L.d(Se,{T:()=>k});var I=L(2202),X=L(576);function k(ae){return(0,X.m)(ae?.[I.h])}},8239:(dt,Se,L)=>{L.d(Se,{t:()=>X});var I=L(576);function X(k){return(0,I.m)(k?.then)}},3260:(dt,Se,L)=>{L.d(Se,{L:()=>ae,Q:()=>k});var I=L(655),X=L(576);function k(ie){return(0,I.FC)(this,arguments,function*(){const he=ie.getReader();try{for(;;){const{value:le,done:ve}=yield(0,I.qq)(he.read());if(ve)return yield(0,I.qq)(void 0);yield yield(0,I.qq)(le)}}finally{he.releaseLock()}})}function ae(ie){return(0,X.m)(ie?.getReader)}},4482:(dt,Se,L)=>{L.d(Se,{e:()=>k});var I=L(576);function k(ae){return ie=>{if(function X(ae){return(0,I.m)(ae?.lift)}(ie))return ie.lift(function(de){try{return ae(de,this)}catch(he){this.error(he)}});throw new TypeError("Unable to lift unknown Observable type")}}},7849:(dt,Se,L)=>{L.d(Se,{h:()=>k});var I=L(2416),X=L(3410);function k(ae){X.z.setTimeout(()=>{const{onUnhandledError:ie}=I.v;if(!ie)throw ae;ie(ae)})}},4532:(dt,Se,L)=>{function I(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Se,{z:()=>I})},655:(dt,Se,L)=>{function ae(H,Q){var ne={};for(var ee in H)Object.prototype.hasOwnProperty.call(H,ee)&&Q.indexOf(ee)<0&&(ne[ee]=H[ee]);if(null!=H&&"function"==typeof Object.getOwnPropertySymbols){var Re=0;for(ee=Object.getOwnPropertySymbols(H);Re<ee.length;Re++)Q.indexOf(ee[Re])<0&&Object.prototype.propertyIsEnumerable.call(H,ee[Re])&&(ne[ee[Re]]=H[ee[Re]])}return ne}function le(H,Q,ne,ee){return new(ne||(ne=Promise))(function(Me,lt){function zt(en){try{Ye(ee.next(en))}catch(un){lt(un)}}function Ot(en){try{Ye(ee.throw(en))}catch(un){lt(un)}}function Ye(en){en.done?Me(en.value):function Re(Me){return Me instanceof ne?Me:new ne(function(lt){lt(Me)})}(en.value).then(zt,Ot)}Ye((ee=ee.apply(H,Q||[])).next())})}function fe(H){return this instanceof fe?(this.v=H,this):new fe(H)}function pe(H,Q,ne){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Re,ee=ne.apply(H,Q||[]),Me=[];return Re={},lt("next"),lt("throw"),lt("return"),Re[Symbol.asyncIterator]=function(){return this},Re;function lt(Ht){ee[Ht]&&(Re[Ht]=function(Wt){return new Promise(function(wr,St){Me.push([Ht,Wt,wr,St])>1||zt(Ht,Wt)})})}function zt(Ht,Wt){try{!function Ot(Ht){Ht.value instanceof fe?Promise.resolve(Ht.value.v).then(Ye,en):un(Me[0][2],Ht)}(ee[Ht](Wt))}catch(wr){un(Me[0][3],wr)}}function Ye(Ht){zt("next",Ht)}function en(Ht){zt("throw",Ht)}function un(Ht,Wt){Ht(Wt),Me.shift(),Me.length&&zt(Me[0][0],Me[0][1])}}function Qe(H){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ne,Q=H[Symbol.asyncIterator];return Q?Q.call(H):(H=function Y(H){var Q="function"==typeof Symbol&&Symbol.iterator,ne=Q&&H[Q],ee=0;if(ne)return ne.call(H);if(H&&"number"==typeof H.length)return{next:function(){return H&&ee>=H.length&&(H=void 0),{value:H&&H[ee++],done:!H}}};throw new TypeError(Q?"Object is not iterable.":"Symbol.iterator is not defined.")}(H),ne={},ee("next"),ee("throw"),ee("return"),ne[Symbol.asyncIterator]=function(){return this},ne);function ee(Me){ne[Me]=H[Me]&&function(lt){return new Promise(function(zt,Ot){!function Re(Me,lt,zt,Ot){Promise.resolve(Ot).then(function(Ye){Me({value:Ye,done:zt})},lt)}(zt,Ot,(lt=H[Me](lt)).done,lt.value)})}}}L.d(Se,{FC:()=>pe,KL:()=>Qe,_T:()=>ae,mG:()=>le,qq:()=>fe})},4650:(dt,Se,L)=>{L.d(Se,{$8M:()=>_u,AFp:()=>zl,AaK:()=>le,CHM:()=>eu,CZH:()=>Kg,EJc:()=>GD,EpF:()=>ic,F4k:()=>OI,FYo:()=>S,FiY:()=>O,G48:()=>XD,GfV:()=>Pe,JOm:()=>Ro,KtG:()=>tu,LFG:()=>Vn,Lbi:()=>lw,Lck:()=>I_,MAs:()=>Ty,NdJ:()=>bf,OlP:()=>on,Q6J:()=>Qd,QGY:()=>lg,Qsj:()=>N,R0b:()=>Ds,RDi:()=>Im,Rgc:()=>fh,SBq:()=>d,TTD:()=>Ri,TgZ:()=>cg,X6Q:()=>Kb,Xpm:()=>Ee,Y36:()=>fl,YNc:()=>kI,Yjl:()=>_e,Yz7:()=>Wt,ZZ4:()=>cv,_UZ:()=>Cy,_c5:()=>ub,_uU:()=>Uy,aQg:()=>Eh,cJS:()=>St,cg1:()=>Ff,dDg:()=>qD,dqk:()=>Xt,eFA:()=>yw,eoX:()=>em,g9A:()=>cw,h0i:()=>lc,hGG:()=>Pw,hij:()=>Nf,ifc:()=>ut,ip1:()=>Q_,kL8:()=>nh,lG2:()=>z,lri:()=>vh,oAB:()=>At,oxw:()=>Xd,q4F:()=>Xe,qLn:()=>kd,qZA:()=>Df,rWj:()=>ai,sBO:()=>tb,sIi:()=>If,s_b:()=>ph,soG:()=>Yg,vHH:()=>Ae,wAp:()=>mt,xp6:()=>nf,zSh:()=>tl,zs3:()=>Hu});var I=L(7579),X=L(727),k=L(8306),ae=L(6451),ie=L(3099);function de(r){for(let s in r)if(r[s]===de)return s;throw Error("Could not find renamed property on target object.")}function le(r){if("string"==typeof r)return r;if(Array.isArray(r))return"["+r.map(le).join(", ")+"]";if(null==r)return""+r;if(r.overriddenName)return`${r.overriddenName}`;if(r.name)return`${r.name}`;const s=r.toString();if(null==s)return""+s;const o=s.indexOf("\n");return-1===o?s:s.substring(0,o)}function ve(r,s){return null==r||""===r?null===s?"":s:null==s||""===s?r:r+" "+s}const $=de({__forward_ref__:de});function U(r){return r.__forward_ref__=U,r.toString=function(){return le(this())},r}function Y(r){return function ze(r){return"function"==typeof r&&r.hasOwnProperty($)&&r.__forward_ref__===U}(r)?r():r}class Ae extends Error{constructor(s,o){super(function We(r,s){return`NG0${Math.abs(r)}${s?": "+s.trim():""}`}(s,o)),this.code=s}}function fe(r){return"string"==typeof r?r:null==r?"":String(r)}function me(r,s){throw new Ae(-201,!1)}function Ot(r,s){null==r&&function Ye(r,s,o,u){throw new Error(`ASSERTION ERROR: ${r}`+(null==u?"":` [Expected=> ${o} ${u} ${s} <=Actual]`))}(s,r,null,"!=")}function Wt(r){return{token:r.token,providedIn:r.providedIn||null,factory:r.factory,value:void 0}}function St(r){return{providers:r.providers||[],imports:r.imports||[]}}function nn(r){return ci(r,li)||ci(r,Zr)}function ci(r,s){return r.hasOwnProperty(s)?r[s]:null}function Ts(r){return r&&(r.hasOwnProperty(Kr)||r.hasOwnProperty(Ho))?r[Kr]:null}const li=de({\u0275prov:de}),Kr=de({\u0275inj:de}),Zr=de({ngInjectableDef:de}),Ho=de({ngInjectorDef:de});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let gr;function $n(r){const s=gr;return gr=r,s}function Yr(r,s,o){const u=nn(r);return u&&"root"==u.providedIn?void 0===u.value?u.value=u.factory():u.value:o&Je.Optional?null:void 0!==s?s:void me(le(r))}function An(r){return{toString:r}.toString()}var Pn=(()=>((Pn=Pn||{})[Pn.OnPush=0]="OnPush",Pn[Pn.Default=1]="Default",Pn))(),ut=(()=>{return(r=ut||(ut={}))[r.Emulated=0]="Emulated",r[r.None=2]="None",r[r.ShadowDom=3]="ShadowDom",ut;var r})();const Xt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lr={},bt=[],Xi=de({\u0275cmp:de}),Zt=de({\u0275dir:de}),Ii=de({\u0275pipe:de}),Yt=de({\u0275mod:de}),Hn=de({\u0275fac:de}),Dr=de({__NG_ELEMENT_ID__:de});let tt=0;function Ee(r){return An(()=>{const o=!0===r.standalone,u={},l={type:r.type,providersResolver:null,decls:r.decls,vars:r.vars,factory:null,template:r.template||null,consts:r.consts||null,ngContentSelectors:r.ngContentSelectors,hostBindings:r.hostBindings||null,hostVars:r.hostVars||0,hostAttrs:r.hostAttrs||null,contentQueries:r.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:r.exportAs||null,onPush:r.changeDetection===Pn.OnPush,directiveDefs:null,pipeDefs:null,standalone:o,dependencies:o&&r.dependencies||null,getStandaloneInjector:null,selectors:r.selectors||bt,viewQuery:r.viewQuery||null,features:r.features||null,data:r.data||{},encapsulation:r.encapsulation||ut.Emulated,id:"c"+tt++,styles:r.styles||bt,_:null,setInput:null,schemas:r.schemas||null,tView:null},h=r.dependencies,m=r.features;return l.inputs=F(r.inputs,u),l.outputs=F(r.outputs),m&&m.forEach(v=>v(l)),l.directiveDefs=h?()=>("function"==typeof h?h():h).map(vt).filter(_t):null,l.pipeDefs=h?()=>("function"==typeof h?h():h).map(ct).filter(_t):null,l})}function vt(r){return K(r)||$e(r)}function _t(r){return null!==r}function At(r){return An(()=>({type:r.type,bootstrap:r.bootstrap||bt,declarations:r.declarations||bt,imports:r.imports||bt,exports:r.exports||bt,transitiveCompileScopes:null,schemas:r.schemas||null,id:r.id||null}))}function F(r,s){if(null==r)return Lr;const o={};for(const u in r)if(r.hasOwnProperty(u)){let l=r[u],h=l;Array.isArray(l)&&(h=l[1],l=l[0]),o[l]=u,s&&(s[l]=h)}return o}const z=Ee;function _e(r){return{type:r.type,name:r.name,factory:null,pure:!1!==r.pure,standalone:!0===r.standalone,onDestroy:r.type.prototype.ngOnDestroy||null}}function K(r){return r[Xi]||null}function $e(r){return r[Zt]||null}function ct(r){return r[Ii]||null}function Xn(r){return Array.isArray(r)&&"object"==typeof r[1]}function br(r){return Array.isArray(r)&&!0===r[1]}function Ga(r){return 0!=(8&r.flags)}function zo(r){return 2==(2&r.flags)}function wc(r){return 1==(1&r.flags)}function mr(r){return null!==r.template}function Dh(r){return 0!=(256&r[2])}function Ei(r,s){return r.hasOwnProperty(Hn)?r[Hn]:null}class Ni{constructor(s,o,u){this.previousValue=s,this.currentValue=o,this.firstChange=u}isFirstChange(){return this.firstChange}}function Ri(){return Ms}function Ms(r){return r.type.prototype.ngOnChanges&&(r.setInput=Wa),Wo}function Wo(){const r=Ch(this),s=r?.current;if(s){const o=r.previous;if(o===Lr)r.previous=s;else for(let u in s)o[u]=s[u];r.current=null,this.ngOnChanges(s)}}function Wa(r,s,o,u){const l=Ch(r)||function qo(r,s){return r[Tc]=s}(r,{previous:Lr,current:null}),h=l.current||(l.current={}),m=l.previous,v=this.declaredInputs[o],w=m[v];h[v]=new Ni(w&&w.currentValue,s,m===Lr),r[u]=s}Ri.ngInherit=!0;const Tc="__ngSimpleChanges__";function Ch(r){return r[Tc]||null}function wn(r){for(;Array.isArray(r);)r=r[0];return r}function Tr(r,s){return wn(s[r.index])}function ro(r,s){return r.data[s]}function $t(r,s){const o=s[r];return Xn(o)?o:o[0]}function Ns(r){return 64==(64&r[2])}function hi(r,s){return null==s?null:r[s]}function Ya(r){r[18]=0}function mn(r,s){r[5]+=s;let o=r,u=r[3];for(;null!==u&&(1===s&&1===o[5]||-1===s&&0===o[5]);)u[5]+=s,o=u,u=u[3]}const wt={lFrame:Lc(null),bindingsEnabled:!0};function Oi(){return wt.bindingsEnabled}function De(){return wt.lFrame.lView}function Ft(){return wt.lFrame.tView}function eu(r){return wt.lFrame.contextLView=r,r[8]}function tu(r){return wt.lFrame.contextLView=null,r}function En(){let r=nu();for(;null!==r&&64===r.type;)r=r.parent;return r}function nu(){return wt.lFrame.currentTNode}function Xr(r,s){const o=wt.lFrame;o.currentTNode=r,o.isParent=s}function Zo(){return wt.lFrame.isParent}function Rs(){return wt.lFrame.bindingIndex++}function ap(r,s){const o=wt.lFrame;o.bindingIndex=o.bindingRootIndex=r,ru(s)}function ru(r){wt.lFrame.currentDirectiveIndex=r}function ea(r){wt.lFrame.currentQueryIndex=r}function Pc(r){const s=r[1];return 2===s.type?s.declTNode:1===s.type?r[6]:null}function iu(r,s,o){if(o&Je.SkipSelf){let l=s,h=r;for(;!(l=l.parent,null!==l||o&Je.Host||(l=Pc(h),null===l||(h=h[15],10&l.type))););if(null===l)return!1;s=l,r=h}const u=wt.lFrame=Oc();return u.currentTNode=s,u.lView=r,!0}function su(r){const s=Oc(),o=r[1];wt.lFrame=s,s.currentTNode=o.firstChild,s.lView=r,s.tView=o,s.contextLView=r,s.bindingIndex=o.bindingStartIndex,s.inI18n=!1}function Oc(){const r=wt.lFrame,s=null===r?null:r.child;return null===s?Lc(r):s}function Lc(r){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:r,child:null,inI18n:!1};return null!==r&&(r.child=s),s}function Fc(){const r=wt.lFrame;return wt.lFrame=r.parent,r.currentTNode=null,r.lView=null,r}const nd=Fc;function ks(){const r=Fc();r.isParent=!0,r.tView=null,r.selectedIndex=-1,r.contextLView=null,r.elementDepthCount=0,r.currentDirectiveIndex=-1,r.currentNamespace=null,r.bindingRootIndex=-1,r.bindingIndex=-1,r.currentQueryIndex=0}function Wn(){return wt.lFrame.selectedIndex}function Br(r){wt.lFrame.selectedIndex=r}function uu(r,s){for(let o=s.directiveStart,u=s.directiveEnd;o<u;o++){const h=r.data[o].type.prototype,{ngAfterContentInit:m,ngAfterContentChecked:v,ngAfterViewInit:w,ngAfterViewChecked:C,ngOnDestroy:x}=h;m&&(r.contentHooks||(r.contentHooks=[])).push(-o,m),v&&((r.contentHooks||(r.contentHooks=[])).push(o,v),(r.contentCheckHooks||(r.contentCheckHooks=[])).push(o,v)),w&&(r.viewHooks||(r.viewHooks=[])).push(-o,w),C&&((r.viewHooks||(r.viewHooks=[])).push(o,C),(r.viewCheckHooks||(r.viewCheckHooks=[])).push(o,C)),null!=x&&(r.destroyHooks||(r.destroyHooks=[])).push(o,x)}}function Os(r,s,o){oo(r,s,3,o)}function so(r,s,o,u){(3&r[2])===o&&oo(r,s,o,u)}function sd(r,s){let o=r[2];(3&o)===s&&(o&=2047,o+=1,r[2]=o)}function oo(r,s,o,u){const h=u??-1,m=s.length-1;let v=0;for(let w=void 0!==u?65535&r[18]:0;w<m;w++)if("number"==typeof s[w+1]){if(v=s[w],null!=u&&v>=u)break}else s[w]<0&&(r[18]+=65536),(v<h||-1==h)&&(od(r,o,s,w),r[18]=(4294901760&r[18])+w+2),w++}function od(r,s,o,u){const l=o[u]<0,h=o[u+1],v=r[l?-o[u]:o[u]];if(l){if(r[2]>>11<r[18]>>16&&(3&r[2])===s){r[2]+=2048;try{h.call(v)}finally{}}}else try{h.call(v)}finally{}}class as{constructor(s,o,u){this.factory=s,this.resolving=!1,this.canSeeViewProviders=o,this.injectImpl=u}}function uo(r,s,o){let u=0;for(;u<o.length;){const l=o[u];if("number"==typeof l){if(0!==l)break;u++;const h=o[u++],m=o[u++],v=o[u++];r.setAttribute(s,m,v,h)}else{const h=l,m=o[++u];hu(h)?r.setProperty(s,h,m):r.setAttribute(s,h,m),u++}}return u}function Fs(r){return 3===r||4===r||6===r}function hu(r){return 64===r.charCodeAt(0)}function ta(r,s){if(null!==s&&0!==s.length)if(null===r||0===r.length)r=s.slice();else{let o=-1;for(let u=0;u<s.length;u++){const l=s[u];"number"==typeof l?o=l:0===o||ud(r,o,l,null,-1===o||2===o?s[++u]:null)}}return r}function ud(r,s,o,u,l){let h=0,m=r.length;if(-1===s)m=-1;else for(;h<r.length;){const v=r[h++];if("number"==typeof v){if(v===s){m=-1;break}if(v>s){m=h-1;break}}}for(;h<r.length;){const v=r[h];if("number"==typeof v)break;if(v===o){if(null===u)return void(null!==l&&(r[h+1]=l));if(u===r[h+1])return void(r[h+2]=l)}h++,null!==u&&h++,null!==l&&h++}-1!==m&&(r.splice(m,0,s),h=m+1),r.splice(h++,0,o),null!==u&&r.splice(h++,0,u),null!==l&&r.splice(h++,0,l)}function cd(r){return-1!==r}function er(r){return 32767&r}function ra(r,s){let o=function na(r){return r>>16}(r),u=s;for(;o>0;)u=u[15],o--;return u}let bi=!0;function ia(r){const s=bi;return bi=r,s}let xn=0;const fi={};function Vs(r,s){const o=pu(r,s);if(-1!==o)return o;const u=s[1];u.firstCreatePass&&(r.injectorIndex=s.length,oa(u.data,r),oa(s,null),oa(u.blueprint,null));const l=gu(r,s),h=r.injectorIndex;if(cd(l)){const m=er(l),v=ra(l,s),w=v[1].data;for(let C=0;C<8;C++)s[h+C]=v[m+C]|w[m+C]}return s[h+8]=l,h}function oa(r,s){r.push(0,0,0,0,0,0,0,0,s)}function pu(r,s){return-1===r.injectorIndex||r.parent&&r.parent.injectorIndex===r.injectorIndex||null===s[r.injectorIndex+8]?-1:r.injectorIndex}function gu(r,s){if(r.parent&&-1!==r.parent.injectorIndex)return r.parent.injectorIndex;let o=0,u=null,l=s;for(;null!==l;){if(u=lo(l),null===u)return-1;if(o++,l=l[15],-1!==u.injectorIndex)return u.injectorIndex|o<<16}return-1}function us(r,s,o){!function fu(r,s,o){let u;"string"==typeof o?u=o.charCodeAt(0)||0:o.hasOwnProperty(Dr)&&(u=o[Dr]),null==u&&(u=o[Dr]=xn++);const l=255&u;s.data[r+(l>>5)]|=1<<l}(r,s,o)}function cs(r,s,o){if(o&Je.Optional||void 0!==r)return r;me()}function jc(r,s,o,u){if(o&Je.Optional&&void 0===u&&(u=null),0==(o&(Je.Self|Je.Host))){const l=r[9],h=$n(void 0);try{return l?l.get(s,u,o&Je.Optional):Yr(s,u,o&Je.Optional)}finally{$n(h)}}return cs(u,0,o)}function Bs(r,s,o,u=Je.Default,l){if(null!==r){if(1024&s[2]){const m=function co(r,s,o,u,l){let h=r,m=s;for(;null!==h&&null!==m&&1024&m[2]&&!(256&m[2]);){const v=aa(h,m,o,u|Je.Self,fi);if(v!==fi)return v;let w=h.parent;if(!w){const C=m[21];if(C){const x=C.get(o,fi,u);if(x!==fi)return x}w=lo(m),m=m[15]}h=w}return l}(r,s,o,u,fi);if(m!==fi)return m}const h=aa(r,s,o,u,fi);if(h!==fi)return h}return jc(s,o,u,l)}function aa(r,s,o,u,l){const h=function $c(r){if("string"==typeof r)return r.charCodeAt(0)||0;const s=r.hasOwnProperty(Dr)?r[Dr]:void 0;return"number"==typeof s?s>=0?255&s:Hc:s}(o);if("function"==typeof h){if(!iu(s,r,u))return u&Je.Host?cs(l,0,u):jc(s,o,u,l);try{const m=h(u);if(null!=m||u&Je.Optional)return m;me()}finally{nd()}}else if("number"==typeof h){let m=null,v=pu(r,s),w=-1,C=u&Je.Host?s[16][6]:null;for((-1===v||u&Je.SkipSelf)&&(w=-1===v?gu(r,s):s[v+8],-1!==w&&ca(u,!1)?(m=s[1],v=er(w),s=ra(w,s)):v=-1);-1!==v;){const x=s[1];if(mu(h,v,x.data)){const R=hd(v,s,o,m,u,C);if(R!==fi)return R}w=s[v+8],-1!==w&&ca(u,s[1].data[v+8]===C)&&mu(h,v,s)?(m=x,v=er(w),s=ra(w,s)):v=-1}}return l}function hd(r,s,o,u,l,h){const m=s[1],v=m.data[r+8],x=function ua(r,s,o,u,l){const h=r.providerIndexes,m=s.data,v=1048575&h,w=r.directiveStart,x=h>>20,j=l?v+x:r.directiveEnd;for(let J=u?v:v+x;J<j;J++){const ye=m[J];if(J<w&&o===ye||J>=w&&ye.type===o)return J}if(l){const J=m[w];if(J&&mr(J)&&J.type===o)return w}return null}(v,m,o,null==u?zo(v)&&bi:u!=m&&0!=(3&v.type),l&Je.Host&&h===v);return null!==x?ls(s,m,x,v):fi}function ls(r,s,o,u){let l=r[o];const h=s.data;if(function Ls(r){return r instanceof as}(l)){const m=l;m.resolving&&function qe(r,s){const o=s?`. Dependency path: ${s.join(" > ")} > ${r}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${r}${o}`)}(function pe(r){return"function"==typeof r?r.name||r.toString():"object"==typeof r&&null!=r&&"function"==typeof r.type?r.type.name||r.type.toString():fe(r)}(h[o]));const v=ia(m.canSeeViewProviders);m.resolving=!0;const w=m.injectImpl?$n(m.injectImpl):null;iu(r,u,Je.Default);try{l=r[o]=m.factory(void 0,h,r,u),s.firstCreatePass&&o>=u.directiveStart&&function id(r,s,o){const{ngOnChanges:u,ngOnInit:l,ngDoCheck:h}=s.type.prototype;if(u){const m=Ms(s);(o.preOrderHooks||(o.preOrderHooks=[])).push(r,m),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,m)}l&&(o.preOrderHooks||(o.preOrderHooks=[])).push(0-r,l),h&&((o.preOrderHooks||(o.preOrderHooks=[])).push(r,h),(o.preOrderCheckHooks||(o.preOrderCheckHooks=[])).push(r,h))}(o,h[o],s)}finally{null!==w&&$n(w),ia(v),m.resolving=!1,nd()}}return l}function mu(r,s,o){return!!(o[s+(r>>5)]&1<<r)}function ca(r,s){return!(r&Je.Self||r&Je.Host&&s)}class Us{constructor(s,o){this._tNode=s,this._lView=o}get(s,o,u){return Bs(this._tNode,this._lView,s,u,o)}}function Hc(){return new Us(En(),De())}function lo(r){const s=r[1],o=s.type;return 2===o?s.declTNode:1===o?r[6]:null}function _u(r){return function dd(r,s){if("class"===s)return r.classes;if("style"===s)return r.styles;const o=r.attrs;if(o){const u=o.length;let l=0;for(;l<u;){const h=o[l];if(Fs(h))break;if(0===h)l+=2;else if("number"==typeof h)for(l++;l<u&&"string"==typeof o[l];)l++;else{if(h===s)return o[l+1];l+=2}}}return null}(En(),r)}const hs="__parameters__";function po(r,s,o){return An(()=>{const u=function vu(r){return function(...o){if(r){const u=r(...o);for(const l in u)this[l]=u[l]}}}(s);function l(...h){if(this instanceof l)return u.apply(this,h),this;const m=new l(...h);return v.annotation=m,v;function v(w,C,x){const R=w.hasOwnProperty(hs)?w[hs]:Object.defineProperty(w,hs,{value:[]})[hs];for(;R.length<=x;)R.push(null);return(R[x]=R[x]||[]).push(m),w}}return o&&(l.prototype=Object.create(o.prototype)),l.prototype.ngMetadataName=r,l.annotationCls=l,l})}class on{constructor(s,o){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof o?this.__NG_ELEMENT_ID__=o:void 0!==o&&(this.\u0275prov=Wt({token:this,providedIn:o.providedIn||"root",factory:o.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function dr(r,s){r.forEach(o=>Array.isArray(o)?dr(o,s):s(o))}function qn(r,s,o){s>=r.length?r.push(o):r.splice(s,0,o)}function mo(r,s){return s>=r.length-1?r.pop():r.splice(s,1)[0]}const fr={},nt="__NG_DI_FLAG__",vo="ngTempTokenPath",Hs=/\n/gm,wo="__source";let Hr;function Fi(r){const s=Hr;return Hr=r,s}function ms(r,s=Je.Default){if(void 0===Hr)throw new Ae(-203,!1);return null===Hr?Yr(r,void 0,s):Hr.get(r,s&Je.Optional?null:void 0,s)}function Vn(r,s=Je.Default){return(function Ji(){return gr}()||ms)(Y(r),s)}function Eo(r){const s=[];for(let o=0;o<r.length;o++){const u=Y(r[o]);if(Array.isArray(u)){if(0===u.length)throw new Ae(900,!1);let l,h=Je.Default;for(let m=0;m<u.length;m++){const v=u[m],w=Vi(v);"number"==typeof w?-1===w?l=v.token:h|=w:l=v}s.push(Vn(l,h))}else s.push(Vn(u))}return s}function Tn(r,s){return r[nt]=s,r.prototype[nt]=s,r}function Vi(r){return r[nt]}const O=Tn(po("Optional"),8),Z=Tn(po("SkipSelf"),4);let ya;function Im(r){ya=r}const Gh=new on("ENVIRONMENT_INITIALIZER"),Ru=new on("INJECTOR",-1),Cd=new on("INJECTOR_DEF_TYPES");class Sd{get(s,o=fr){if(o===fr){const u=new Error(`NullInjectorError: No provider for ${le(s)}!`);throw u.name="NullInjectorError",u}return o}}function Ad(...r){return{\u0275providers:Ia(0,r)}}function Ia(r,...s){const o=[],u=new Set;let l;return dr(s,h=>{const m=h;Xc(m,o,[],u)&&(l||(l=[]),l.push(m))}),void 0!==l&&Ao(l,o),o}function Ao(r,s){for(let o=0;o<r.length;o++){const{providers:l}=r[o];dr(l,h=>{s.push(h)})}}function Xc(r,s,o,u){if(!(r=Y(r)))return!1;let l=null,h=Ts(r);const m=!h&&K(r);if(h||m){if(m&&!m.standalone)return!1;l=r}else{const w=r.ngModule;if(h=Ts(w),!h)return!1;l=w}const v=u.has(l);if(m){if(v)return!1;if(u.add(l),m.dependencies){const w="function"==typeof m.dependencies?m.dependencies():m.dependencies;for(const C of w)Xc(C,s,o,u)}}else{if(!h)return!1;{if(null!=h.imports&&!v){let C;u.add(l);try{dr(h.imports,x=>{Xc(x,s,o,u)&&(C||(C=[]),C.push(x))})}finally{}void 0!==C&&Ao(C,s)}if(!v){const C=Ei(l)||(()=>new l);s.push({provide:l,useFactory:C,deps:bt},{provide:Cd,useValue:l,multi:!0},{provide:Gh,useValue:()=>Vn(l),multi:!0})}const w=h.providers;null==w||v||dr(w,x=>{s.push(x)})}}return l!==r&&void 0!==r.providers}const el=de({provide:String,useValue:de});function ku(r){return null!==r&&"object"==typeof r&&el in r}function Ws(r){return"function"==typeof r}const tl=new on("Set Injector scope."),_s={},Tp={};let Ea;function xo(){return void 0===Ea&&(Ea=new Sd),Ea}class nr{}class nl extends nr{constructor(s,o,u,l){super(),this.parent=o,this.source=u,this.scopes=l,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Mo(s,m=>this.processProvider(m)),this.records.set(Ru,rr(void 0,this)),l.has("environment")&&this.records.set(nr,rr(void 0,this));const h=this.records.get(tl);null!=h&&"string"==typeof h.value&&this.scopes.add(h.value),this.injectorDefTypes=new Set(this.get(Cd.multi,bt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const o=Fi(this),u=$n(void 0);try{return s()}finally{Fi(o),$n(u)}}get(s,o=fr,u=Je.Default){this.assertNotDestroyed();const l=Fi(this),h=$n(void 0);try{if(!(u&Je.SkipSelf)){let v=this.records.get(s);if(void 0===v){const w=function Md(r){return"function"==typeof r||"object"==typeof r&&r instanceof on}(s)&&nn(s);v=w&&this.injectableDefInScope(w)?rr(zh(s),_s):null,this.records.set(s,v)}if(null!=v)return this.hydrate(s,v)}return(u&Je.Self?xo():this.parent).get(s,o=u&Je.Optional&&o===fr?null:o)}catch(m){if("NullInjectorError"===m.name){if((m[vo]=m[vo]||[]).unshift(le(s)),l)throw m;return function E(r,s,o,u){const l=r[vo];throw s[wo]&&l.unshift(s[wo]),r.message=function b(r,s,o,u=null){r=r&&"\n"===r.charAt(0)&&"\u0275"==r.charAt(1)?r.slice(2):r;let l=le(s);if(Array.isArray(s))l=s.map(le).join(" -> ");else if("object"==typeof s){let h=[];for(let m in s)if(s.hasOwnProperty(m)){let v=s[m];h.push(m+":"+("string"==typeof v?JSON.stringify(v):le(v)))}l=`{${h.join(", ")}}`}return`${o}${u?"("+u+")":""}[${l}]: ${r.replace(Hs,"\n  ")}`}("\n"+r.message,l,o,u),r.ngTokenPath=l,r[vo]=null,r}(m,s,"R3InjectorError",this.source)}throw m}finally{$n(h),Fi(l)}}resolveInjectorInitializers(){const s=Fi(this),o=$n(void 0);try{const u=this.get(Gh.multi,bt,Je.Self);for(const l of u)l()}finally{Fi(s),$n(o)}}toString(){const s=[],o=this.records;for(const u of o.keys())s.push(le(u));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(s){let o=Ws(s=Y(s))?s:Y(s&&s.provide);const u=function Cp(r){return ku(r)?rr(void 0,r.useValue):rr(function xd(r,s,o){let u;if(Ws(r)){const l=Y(r);return Ei(l)||zh(l)}if(ku(r))u=()=>Y(r.useValue);else if(function wa(r){return!(!r||!r.useFactory)}(r))u=()=>r.useFactory(...Eo(r.deps||[]));else if(function Ar(r){return!(!r||!r.useExisting)}(r))u=()=>Vn(Y(r.useExisting));else{const l=Y(r&&(r.useClass||r.provide));if(!function qs(r){return!!r.deps}(r))return Ei(l)||zh(l);u=()=>new l(...Eo(r.deps))}return u}(r),_s)}(s);if(Ws(s)||!0!==s.multi)this.records.get(o);else{let l=this.records.get(o);l||(l=rr(void 0,_s,!0),l.factory=()=>Eo(l.multi),this.records.set(o,l)),o=s,l.multi.push(s)}this.records.set(o,u)}hydrate(s,o){return o.value===_s&&(o.value=Tp,o.value=o.factory()),"object"==typeof o.value&&o.value&&function ji(r){return null!==r&&"object"==typeof r&&"function"==typeof r.ngOnDestroy}(o.value)&&this._ngOnDestroyHooks.add(o.value),o.value}injectableDefInScope(s){if(!s.providedIn)return!1;const o=Y(s.providedIn);return"string"==typeof o?"any"===o||this.scopes.has(o):this.injectorDefTypes.has(o)}}function zh(r){const s=nn(r),o=null!==s?s.factory:Ei(r);if(null!==o)return o;if(r instanceof on)throw new Ae(204,!1);if(r instanceof Function)return function Sm(r){const s=r.length;if(s>0)throw function fs(r,s){const o=[];for(let u=0;u<r;u++)o.push(s);return o}(s,"?"),new Ae(204,!1);const o=function Er(r){const s=r&&(r[li]||r[Zr]);if(s){const o=function Or(r){if(r.hasOwnProperty("name"))return r.name;const s=(""+r).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(r);return console.warn(`DEPRECATED: DI is instantiating a token "${o}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${o}" class.`),s}return null}(r);return null!==o?()=>o.factory(r):()=>new r}(r);throw new Ae(204,!1)}function rr(r,s,o=!1){return{factory:r,value:s,multi:o?[]:void 0}}function Ci(r){return!!r.\u0275providers}function Mo(r,s){for(const o of r)Array.isArray(o)?Mo(o,s):Ci(o)?Mo(o.\u0275providers,s):s(o)}class Pu{}class Sp{resolveComponentFactory(s){throw function rl(r){const s=Error(`No component factory found for ${le(r)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=r,s}(s)}}let Nd=(()=>{class r{}return r.NULL=new Sp,r})();function Am(){return g(En(),De())}function g(r,s){return new d(Tr(r,s))}let d=(()=>{class r{constructor(o){this.nativeElement=o}}return r.__NG_ELEMENT_ID__=Am,r})();class S{}let N=(()=>{class r{}return r.__NG_ELEMENT_ID__=()=>function G(){const r=De(),o=$t(En().index,r);return(Xn(o)?o:r)[11]}(),r})(),se=(()=>{class r{}return r.\u0275prov=Wt({token:r,providedIn:"root",factory:()=>null}),r})();class Pe{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const Xe=new Pe("14.2.7"),gt={};function Mn(r){return r.ngOriginalError}class kd{constructor(){this._console=console}handleError(s){const o=this._findOriginalError(s);this._console.error("ERROR",s),o&&this._console.error("ORIGINAL ERROR",o)}_findOriginalError(s){let o=s&&Mn(s);for(;o&&Mn(o);)o=Mn(o);return o||null}}const Ks=new Map;let Tv=0;const Pm="__ngContext__";function zr(r,s){Xn(s)?(r[Pm]=s[20],function Rm(r){Ks.set(r[20],r)}(s)):r[Pm]=s}var Ro=(()=>((Ro=Ro||{})[Ro.Important=1]="Important",Ro[Ro.DashCase=2]="DashCase",Ro))();function kp(r,s){return undefined(r,s)}function Od(r){const s=r[3];return br(s)?s[3]:s}function ko(r){return Bv(r[13])}function Xh(r){return Bv(r[4])}function Bv(r){for(;null!==r&&!br(r);)r=r[4];return r}function yn(r,s,o,u,l){if(null!=u){let h,m=!1;br(u)?h=u:Xn(u)&&(m=!0,u=u[0]);const v=wn(u);0===r&&null!==o?null==l?jm(s,o,v):al(s,o,v,l||null,!0):1===r&&null!==o?al(s,o,v,l||null,!0):2===r?function ef(r,s,o){const u=pn(r,s);u&&function Fd(r,s,o,u){r.removeChild(s,o,u)}(r,u,s,o)}(s,v,m):3===r&&s.destroyNode(v),null!=h&&function $i(r,s,o,u,l){const h=o[7];h!==wn(o)&&yn(s,r,u,h,l);for(let v=10;v<o.length;v++){const w=o[v];Sa(w[1],w,r,s,u,h)}}(s,r,h,o,l)}}function It(r,s,o){return r.createElement(s,o)}function jv(r,s){const o=r[9],u=o.indexOf(s),l=s[3];512&s[2]&&(s[2]&=-513,mn(l,-1)),o.splice(u,1)}function Bm(r,s){if(r.length<=10)return;const o=10+s,u=r[o];if(u){const l=u[17];null!==l&&l!==r&&jv(l,u),s>0&&(r[o-1][4]=u[4]);const h=mo(r,10+s);!function qw(r,s){Sa(r,s,s[11],2,null,null),s[0]=null,s[6]=null}(u[1],u);const m=h[19];null!==m&&m.detachView(h[1]),u[3]=null,u[4]=null,u[2]&=-65}return u}function $v(r,s){if(!(128&s[2])){const o=s[11];o.destroyNode&&Sa(r,s,o,3,null,null),function Ce(r){let s=r[13];if(!s)return Um(r[1],r);for(;s;){let o=null;if(Xn(s))o=s[13];else{const u=s[10];u&&(o=u)}if(!o){for(;s&&!s[4]&&s!==r;)Xn(s)&&Um(s[1],s),s=s[3];null===s&&(s=r),Xn(s)&&Um(s[1],s),o=s&&s[4]}s=o}}(s)}}function Um(r,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function Hv(r,s){let o;if(null!=r&&null!=(o=r.destroyHooks))for(let u=0;u<o.length;u+=2){const l=s[o[u]];if(!(l instanceof as)){const h=o[u+1];if(Array.isArray(h))for(let m=0;m<h.length;m+=2){const v=l[h[m]],w=h[m+1];try{w.call(v)}finally{}}else try{h.call(l)}finally{}}}}(r,s),function Kw(r,s){const o=r.cleanup,u=s[7];let l=-1;if(null!==o)for(let h=0;h<o.length-1;h+=2)if("string"==typeof o[h]){const m=o[h+1],v="function"==typeof m?m(s):wn(s[m]),w=u[l=o[h+2]],C=o[h+3];"boolean"==typeof C?v.removeEventListener(o[h],w,C):C>=0?u[l=C]():u[l=-C].unsubscribe(),h+=2}else{const m=u[l=o[h+1]];o[h].call(m)}if(null!==u){for(let h=l+1;h<u.length;h++)(0,u[h])();s[7]=null}}(r,s),1===s[1].type&&s[11].destroy();const o=s[17];if(null!==o&&br(s[3])){o!==s[3]&&jv(o,s);const u=s[19];null!==u&&u.detachView(r)}!function Sv(r){Ks.delete(r[20])}(s)}}function Gv(r,s,o){return function Zw(r,s,o){let u=s;for(;null!==u&&40&u.type;)u=(s=u).parent;if(null===u)return o[0];if(2&u.flags){const l=r.data[u.directiveStart].encapsulation;if(l===ut.None||l===ut.Emulated)return null}return Tr(u,o)}(r,s.parent,o)}function al(r,s,o,u,l){r.insertBefore(s,o,u,l)}function jm(r,s,o){r.appendChild(s,o)}function Ct(r,s,o,u,l){null!==u?al(r,s,o,u,l):jm(r,s,o)}function pn(r,s){return r.parentNode(s)}let zv=function Kt(r,s,o){return 40&r.type?Tr(r,o):null};function ul(r,s,o,u){const l=Gv(r,u,s),h=s[11],v=function Vd(r,s,o){return zv(r,s,o)}(u.parent||s[6],u,s);if(null!=l)if(Array.isArray(o))for(let w=0;w<o.length;w++)Ct(h,l,o[w],v,!1);else Ct(h,l,o,v,!1)}function Bd(r,s){if(null!==s){const o=s.type;if(3&o)return Tr(s,r);if(4&o)return $m(-1,r[s.index]);if(8&o){const u=s.child;if(null!==u)return Bd(r,u);{const l=r[s.index];return br(l)?$m(-1,l):wn(l)}}if(32&o)return kp(s,r)()||wn(r[s.index]);{const u=Bu(r,s);return null!==u?Array.isArray(u)?u[0]:Bd(Od(r[16]),u):Bd(r,s.next)}}return null}function Bu(r,s){return null!==s?r[16][6].projection[s.projection]:null}function $m(r,s){const o=10+r+1;if(o<s.length){const u=s[o],l=u[1].firstChild;if(null!==l)return Bd(u,l)}return s[7]}function Hm(r,s,o,u,l,h,m){for(;null!=o;){const v=u[o.index],w=o.type;if(m&&0===s&&(v&&zr(wn(v),u),o.flags|=4),64!=(64&o.flags))if(8&w)Hm(r,s,o.child,u,l,h,!1),yn(s,r,l,v,h);else if(32&w){const C=kp(o,u);let x;for(;x=C();)yn(s,r,l,x,h);yn(s,r,l,v,h)}else 16&w?Gm(r,s,u,o,l,h):yn(s,r,l,v,h);o=m?o.projectionNext:o.next}}function Sa(r,s,o,u,l,h){Hm(o,u,r.firstChild,s,l,h,!1)}function Gm(r,s,o,u,l,h){const m=o[16],w=m[6].projection[u.projection];if(Array.isArray(w))for(let C=0;C<w.length;C++)yn(s,r,l,w[C],h);else Hm(r,s,w,m[3],l,h,!0)}function Wm(r,s,o){r.setAttribute(s,"style",o)}function Op(r,s,o){""===o?r.removeAttribute(s,"class"):r.setAttribute(s,"class",o)}function Aa(r,s,o){let u=r.length;for(;;){const l=r.indexOf(s,o);if(-1===l)return l;if(0===l||r.charCodeAt(l-1)<=32){const h=s.length;if(l+h===u||r.charCodeAt(l+h)<=32)return l}o=l+1}}const re="ng-template";function Lp(r,s,o){let u=0;for(;u<r.length;){let l=r[u++];if(o&&"class"===l){if(l=r[u],-1!==Aa(l.toLowerCase(),s,0))return!0}else if(1===l){for(;u<r.length&&"string"==typeof(l=r[u++]);)if(l.toLowerCase()===s)return!0;return!1}}return!1}function vs(r){return 4===r.type&&r.value!==re}function Qw(r,s,o){return s===(4!==r.type||o?r.value:re)}function tf(r,s,o){let u=4;const l=r.attrs||[],h=function qm(r){for(let s=0;s<r.length;s++)if(Fs(r[s]))return s;return r.length}(l);let m=!1;for(let v=0;v<s.length;v++){const w=s[v];if("number"!=typeof w){if(!m)if(4&u){if(u=2|1&u,""!==w&&!Qw(r,w,o)||""===w&&1===s.length){if(Nr(u))return!1;m=!0}}else{const C=8&u?w:s[++v];if(8&u&&null!==r.attrs){if(!Lp(r.attrs,C,o)){if(Nr(u))return!1;m=!0}continue}const R=Jw(8&u?"class":w,l,vs(r),o);if(-1===R){if(Nr(u))return!1;m=!0;continue}if(""!==C){let j;j=R>h?"":l[R+1].toLowerCase();const J=8&u?j:null;if(J&&-1!==Aa(J,C,0)||2&u&&C!==j){if(Nr(u))return!1;m=!0}}}}else{if(!m&&!Nr(u)&&!Nr(w))return!1;if(m&&Nr(w))continue;m=!1,u=w|1&u}}return Nr(u)||m}function Nr(r){return 0==(1&r)}function Jw(r,s,o,u){if(null===s)return-1;let l=0;if(u||!o){let h=!1;for(;l<s.length;){const m=s[l];if(m===r)return l;if(3===m||6===m)h=!0;else{if(1===m||2===m){let v=s[++l];for(;"string"==typeof v;)v=s[++l];continue}if(4===m)break;if(0===m){l+=4;continue}}l+=h?1:2}return-1}return function Xw(r,s){let o=r.indexOf(4);if(o>-1)for(o++;o<r.length;){const u=r[o];if("number"==typeof u)return-1;if(u===s)return o;o++}return-1}(s,r)}function Uu(r,s,o=!1){for(let u=0;u<s.length;u++)if(tf(r,s[u],o))return!0;return!1}function mi(r,s){return r?":not("+s.trim()+")":s}function Zv(r){let s=r[0],o=1,u=2,l="",h=!1;for(;o<r.length;){let m=r[o];if("string"==typeof m)if(2&u){const v=r[++o];l+="["+m+(v.length>0?'="'+v+'"':"")+"]"}else 8&u?l+="."+m:4&u&&(l+=" "+m);else""!==l&&!Nr(m)&&(s+=mi(h,l),l=""),u=m,h=h||!Nr(u);o++}return""!==l&&(s+=mi(h,l)),s}const st={};function nf(r){Rr(Ft(),De(),Wn()+r,!1)}function Rr(r,s,o,u){if(!u)if(3==(3&s[2])){const h=r.preOrderCheckHooks;null!==h&&Os(s,h,o)}else{const h=r.preOrderHooks;null!==h&&so(s,h,0,o)}Br(o)}function $u(r,s=null,o=null,u){const l=Fp(r,s,o,u);return l.resolveInjectorInitializers(),l}function Fp(r,s=null,o=null,u,l=new Set){const h=[o||bt,Ad(r)];return u=u||("object"==typeof r?void 0:le(r)),new nl(h,s||xo(),u||null,l)}let Hu=(()=>{class r{static create(o,u){if(Array.isArray(o))return $u({name:""},u,o,"");{const l=o.name??"";return $u({name:l},o.parent,o.providers,l)}}}return r.THROW_IF_NOT_FOUND=fr,r.NULL=new Sd,r.\u0275prov=Wt({token:r,providedIn:"any",factory:()=>Vn(Ru)}),r.__NG_ELEMENT_ID__=-1,r})();function fl(r,s=Je.Default){const o=De();return null===o?Vn(r,s):Bs(En(),o,Y(r),s)}function gI(r,s){const o=r.contentQueries;if(null!==o)for(let u=0;u<o.length;u+=2){const l=o[u],h=o[u+1];if(-1!==h){const m=r.data[h];ea(l),m.contentQueries(2,s[h],h)}}}function _l(r,s,o,u,l,h,m,v,w,C,x){const R=s.blueprint.slice();return R[0]=l,R[2]=76|u,(null!==x||r&&1024&r[2])&&(R[2]|=1024),Ya(R),R[3]=R[15]=r,R[8]=o,R[10]=m||r&&r[10],R[11]=v||r&&r[11],R[12]=w||r&&r[12]||null,R[9]=C||r&&r[9]||null,R[6]=h,R[20]=function Cv(){return Tv++}(),R[21]=x,R[16]=2==s.type?r[16]:R,R}function ka(r,s,o,u,l){let h=r.data[s];if(null===h)h=function Kp(r,s,o,u,l){const h=nu(),m=Zo(),w=r.data[s]=function Qt(r,s,o,u,l,h){return{type:o,index:u,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:l,attrs:h,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,m?h:h&&h.parent,o,s,u,l);return null===r.firstChild&&(r.firstChild=w),null!==h&&(m?null==h.child&&null!==w.parent&&(h.child=w):null===h.next&&(h.next=w)),w}(r,s,o,u,l),function op(){return wt.lFrame.inI18n}()&&(h.flags|=64);else if(64&h.type){h.type=o,h.value=u,h.attrs=l;const m=function io(){const r=wt.lFrame,s=r.currentTNode;return r.isParent?s:s.parent}();h.injectorIndex=null===m?-1:m.injectorIndex}return Xr(h,!0),h}function Hd(r,s,o,u){if(0===o)return-1;const l=s.length;for(let h=0;h<o;h++)s.push(u),r.blueprint.push(u),r.data.push(null);return l}function vl(r,s,o){su(s);try{const u=r.viewQuery;null!==u&&Xp(1,u,o);const l=r.template;null!==l&&oy(r,s,l,1,o),r.firstCreatePass&&(r.firstCreatePass=!1),r.staticContentQueries&&gI(r,s),r.staticViewQueries&&Xp(2,r.viewQuery,o);const h=r.components;null!==h&&function Rn(r,s){for(let o=0;o<s.length;o++)kr(r,s[o])}(s,h)}catch(u){throw r.firstCreatePass&&(r.incompleteFirstPass=!0,r.firstCreatePass=!1),u}finally{s[2]&=-5,ks()}}function Zp(r,s,o,u){const l=s[2];if(128!=(128&l)){su(s);try{Ya(s),function Nc(r){return wt.lFrame.bindingIndex=r}(r.bindingStartIndex),null!==o&&oy(r,s,o,2,u);const m=3==(3&l);if(m){const C=r.preOrderCheckHooks;null!==C&&Os(s,C,null)}else{const C=r.preOrderHooks;null!==C&&so(s,C,0,null),sd(s,0)}if(function mf(r){for(let s=ko(r);null!==s;s=Xh(s)){if(!s[2])continue;const o=s[9];for(let u=0;u<o.length;u++){const l=o[u],h=l[3];0==(512&l[2])&&mn(h,1),l[2]|=512}}}(s),function _E(r){for(let s=ko(r);null!==s;s=Xh(s))for(let o=10;o<s.length;o++){const u=s[o],l=u[1];Ns(u)&&Zp(l,u,l.template,u[8])}}(s),null!==r.contentQueries&&gI(r,s),m){const C=r.contentCheckHooks;null!==C&&Os(s,C)}else{const C=r.contentHooks;null!==C&&so(s,C,1),sd(s,1)}!function lf(r,s){const o=r.hostBindingOpCodes;if(null!==o)try{for(let u=0;u<o.length;u++){const l=o[u];if(l<0)Br(~l);else{const h=l,m=o[++u],v=o[++u];ap(m,h),v(2,s[h])}}}finally{Br(-1)}}(r,s);const v=r.components;null!==v&&function fE(r,s){for(let o=0;o<s.length;o++)DI(r,s[o])}(s,v);const w=r.viewQuery;if(null!==w&&Xp(2,w,u),m){const C=r.viewCheckHooks;null!==C&&Os(s,C)}else{const C=r.viewHooks;null!==C&&so(s,C,2),sd(s,2)}!0===r.firstUpdatePass&&(r.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,mn(s[3],-1))}finally{ks()}}}function oy(r,s,o,u,l){const h=Wn(),m=2&u;try{Br(-1),m&&s.length>22&&Rr(r,s,22,!1),o(u,l)}finally{Br(h)}}function Zs(r,s,o){!Oi()||(function gE(r,s,o,u){const l=o.directiveStart,h=o.directiveEnd;r.firstCreatePass||Vs(o,s),zr(u,s);const m=o.initialInputs;for(let v=l;v<h;v++){const w=r.data[v],C=mr(w);C&&vI(s,o,w);const x=ls(s,r,v,o);zr(x,s),null!==m&&II(0,v-l,x,w,0,m),C&&($t(o.index,s)[8]=x)}}(r,s,o,Tr(o,s)),128==(128&o.flags)&&function mE(r,s,o){const u=o.directiveStart,l=o.directiveEnd,h=o.index,m=function Rc(){return wt.lFrame.currentDirectiveIndex}();try{Br(h);for(let v=u;v<l;v++){const w=r.data[v],C=s[v];ru(v),(null!==w.hostBindings||0!==w.hostVars||null!==w.hostAttrs)&&kt(w,C)}}finally{Br(-1),ru(m)}}(r,s,o))}function Yp(r,s,o=Tr){const u=s.localNames;if(null!==u){let l=s.index+1;for(let h=0;h<u.length;h+=2){const m=u[h+1],v=-1===m?o(s,r):r[m];r[l++]=v}}}function ay(r){const s=r.tView;return null===s||s.incompleteFirstPass?r.tView=Qp(1,null,r.template,r.decls,r.vars,r.directiveDefs,r.pipeDefs,r.viewQuery,r.schemas,r.consts):s}function Qp(r,s,o,u,l,h,m,v,w,C){const x=22+u,R=x+l,j=function Gd(r,s){const o=[];for(let u=0;u<s;u++)o.push(u<r?null:st);return o}(x,R),J="function"==typeof C?C():C;return j[1]={type:r,blueprint:j,template:o,queries:null,viewQuery:v,declTNode:s,data:j.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:R,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof h?h():h,pipeRegistry:"function"==typeof m?m():m,firstChild:null,schemas:w,consts:J,incompleteFirstPass:!1}}function uy(r,s,o){for(let u in r)if(r.hasOwnProperty(u)){const l=r[u];(o=null===o?{}:o).hasOwnProperty(u)?o[u].push(s,l):o[u]=[s,l]}return o}function cy(r,s){const u=s.directiveEnd,l=r.data,h=s.attrs,m=[];let v=null,w=null;for(let C=s.directiveStart;C<u;C++){const x=l[C],R=x.inputs,j=null===h||vs(s)?null:wI(R,h);m.push(j),v=uy(R,C,v),w=uy(x.outputs,C,w)}null!==v&&(v.hasOwnProperty("class")&&(s.flags|=16),v.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=m,s.inputs=v,s.outputs=w}function yi(r,s){const o=$t(s,r);16&o[2]||(o[2]|=32)}function Is(r,s,o,u){let l=!1;if(Oi()){const h=function yE(r,s,o){const u=r.directiveRegistry;let l=null;if(u)for(let h=0;h<u.length;h++){const m=u[h];Uu(o,m.selectors,!1)&&(l||(l=[]),us(Vs(o,s),r,m.type),mr(m)?(hf(r,o),l.unshift(m)):l.push(m))}return l}(r,s,o),m=null===u?null:{"":-1};if(null!==h){l=!0,gf(o,r.data.length,h.length);for(let x=0;x<h.length;x++){const R=h[x];R.providersResolver&&R.providersResolver(R)}let v=!1,w=!1,C=Hd(r,s,h.length,null);for(let x=0;x<h.length;x++){const R=h[x];o.mergedAttrs=ta(o.mergedAttrs,R.hostAttrs),dy(r,o,s,C,R),pf(C,R,m),null!==R.contentQueries&&(o.flags|=8),(null!==R.hostBindings||null!==R.hostAttrs||0!==R.hostVars)&&(o.flags|=128);const j=R.type.prototype;!v&&(j.ngOnChanges||j.ngOnInit||j.ngDoCheck)&&((r.preOrderHooks||(r.preOrderHooks=[])).push(o.index),v=!0),!w&&(j.ngOnChanges||j.ngDoCheck)&&((r.preOrderCheckHooks||(r.preOrderCheckHooks=[])).push(o.index),w=!0),C++}cy(r,o)}m&&function ff(r,s,o){if(s){const u=r.localNames=[];for(let l=0;l<s.length;l+=2){const h=o[s[l+1]];if(null==h)throw new Ae(-301,!1);u.push(s[l],h)}}}(o,u,m)}return o.mergedAttrs=ta(o.mergedAttrs,o.attrs),l}function ly(r,s,o,u,l,h){const m=h.hostBindings;if(m){let v=r.hostBindingOpCodes;null===v&&(v=r.hostBindingOpCodes=[]);const w=~s.index;(function df(r){let s=r.length;for(;s>0;){const o=r[--s];if("number"==typeof o&&o<0)return o}return 0})(v)!=w&&v.push(w),v.push(u,l,m)}}function kt(r,s){null!==r.hostBindings&&r.hostBindings(1,s)}function hf(r,s){s.flags|=2,(r.components||(r.components=[])).push(s.index)}function pf(r,s,o){if(o){if(s.exportAs)for(let u=0;u<s.exportAs.length;u++)o[s.exportAs[u]]=r;mr(s)&&(o[""]=r)}}function gf(r,s,o){r.flags|=1,r.directiveStart=s,r.directiveEnd=s+o,r.providerIndexes=s}function dy(r,s,o,u,l){r.data[u]=l;const h=l.factory||(l.factory=Ei(l.type)),m=new as(h,mr(l),fl);r.blueprint[u]=m,o[u]=m,ly(r,s,0,u,Hd(r,o,l.hostVars,st),l)}function vI(r,s,o){const u=Tr(s,r),l=ay(o),h=r[10],m=yf(r,_l(r,l,null,o.onPush?32:16,u,s,h,h.createRenderer(u,o),null,null,null));r[s.index]=m}function II(r,s,o,u,l,h){const m=h[s];if(null!==m){const v=u.setInput;for(let w=0;w<m.length;){const C=m[w++],x=m[w++],R=m[w++];null!==v?u.setInput(o,R,C,x):o[x]=R}}}function wI(r,s){let o=null,u=0;for(;u<s.length;){const l=s[u];if(0!==l)if(5!==l){if("number"==typeof l)break;r.hasOwnProperty(l)&&(null===o&&(o=[]),o.push(l,r[l],s[u+1])),u+=2}else u+=2;else u+=4}return o}function EI(r,s,o,u){return new Array(r,!0,!1,s,null,0,u,o,null,null)}function DI(r,s){const o=$t(s,r);if(Ns(o)){const u=o[1];48&o[2]?Zp(u,o,u.template,o[8]):o[5]>0&&fy(o)}}function fy(r){for(let u=ko(r);null!==u;u=Xh(u))for(let l=10;l<u.length;l++){const h=u[l];if(Ns(h))if(512&h[2]){const m=h[1];Zp(m,h,m.template,h[8])}else h[5]>0&&fy(h)}const o=r[1].components;if(null!==o)for(let u=0;u<o.length;u++){const l=$t(o[u],r);Ns(l)&&l[5]>0&&fy(l)}}function kr(r,s){const o=$t(s,r),u=o[1];(function py(r,s){for(let o=s.length;o<r.blueprint.length;o++)s.push(r.blueprint[o])})(u,o),vl(u,o,o[8])}function yf(r,s){return r[13]?r[14][4]=s:r[13]=s,r[14]=s,s}function wl(r){for(;r;){r[2]|=32;const s=Od(r);if(Dh(r)&&!s)return r;r=s}return null}function Wi(r,s,o,u=!0){const l=s[10];l.begin&&l.begin();try{Zp(r,s,r.template,o)}catch(m){throw u&&TI(s,m),m}finally{l.end&&l.end()}}function Xp(r,s,o){ea(0),s(r,o)}function gy(r){return r[7]||(r[7]=[])}function my(r){return r.cleanup||(r.cleanup=[])}function TI(r,s){const o=r[9],u=o?o.get(kd,null):null;u&&u.handleError(s)}function _y(r,s,o,u,l){for(let h=0;h<o.length;){const m=o[h++],v=o[h++],w=s[m],C=r.data[m];null!==C.setInput?C.setInput(w,l,u,v):w[v]=l}}function qi(r,s,o){const u=function Jr(r,s){return wn(s[r])}(s,r);!function Pp(r,s,o){r.setValue(s,o)}(r[11],u,o)}function zd(r,s,o){let u=o?r.styles:null,l=o?r.classes:null,h=0;if(null!==s)for(let m=0;m<s.length;m++){const v=s[m];"number"==typeof v?h=v:1==h?l=ve(l,v):2==h&&(u=ve(u,v+": "+s[++m]+";"))}o?r.styles=u:r.stylesWithoutHost=u,o?r.classes=l:r.classesWithoutHost=l}function tg(r,s,o,u,l=!1){for(;null!==o;){const h=s[o.index];if(null!==h&&u.push(wn(h)),br(h))for(let v=10;v<h.length;v++){const w=h[v],C=w[1].firstChild;null!==C&&tg(w[1],w,C,u)}const m=o.type;if(8&m)tg(r,s,o.child,u);else if(32&m){const v=kp(o,s);let w;for(;w=v();)u.push(w)}else if(16&m){const v=Bu(s,o);if(Array.isArray(v))u.push(...v);else{const w=Od(s[16]);tg(w[1],w,v,u,!0)}}o=l?o.projectionNext:o.next}return u}class Wd{constructor(s,o){this._lView=s,this._cdRefInjectingView=o,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,o=s[1];return tg(o,s,o.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(br(s)){const o=s[8],u=o?o.indexOf(this):-1;u>-1&&(Bm(s,u),mo(o,u))}this._attachedToViewContainer=!1}$v(this._lView[1],this._lView)}onDestroy(s){!function or(r,s,o,u){const l=gy(s);null===o?l.push(u):(l.push(o),r.firstCreatePass&&my(r).push(u,l.length-1))}(this._lView[1],this._lView,null,s)}markForCheck(){wl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Wi(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function oe(r,s){Sa(r,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=s}}class vy extends Wd{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Wi(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class ng extends Nd{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const o=K(s);return new _f(o,this.ngModule)}}function CI(r){const s=[];for(let o in r)r.hasOwnProperty(o)&&s.push({propName:r[o],templateName:o});return s}class vE{constructor(s,o){this.injector=s,this.parentInjector=o}get(s,o,u){const l=this.injector.get(s,gt,u);return l!==gt||o===gt?l:this.parentInjector.get(s,o,u)}}class _f extends Pu{constructor(s,o){super(),this.componentDef=s,this.ngModule=o,this.componentType=s.type,this.selector=function cl(r){return r.map(Zv).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!o}get inputs(){return CI(this.componentDef.inputs)}get outputs(){return CI(this.componentDef.outputs)}create(s,o,u,l){let h=(l=l||this.ngModule)instanceof nr?l:l?.injector;h&&null!==this.componentDef.getStandaloneInjector&&(h=this.componentDef.getStandaloneInjector(h)||h);const m=h?new vE(s,h):s,v=m.get(S,null);if(null===v)throw new Ae(407,!1);const w=m.get(se,null),C=v.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",R=u?function pE(r,s,o){return r.selectRootElement(s,o===ut.ShadowDom)}(C,u,this.componentDef.encapsulation):It(v.createRenderer(null,this.componentDef),x,function SI(r){const s=r.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(x)),j=this.componentDef.onPush?288:272,J=Qp(0,null,null,1,0,null,null,null,null,null),ye=_l(null,J,null,j,null,null,v,C,w,m,null);let ke,Ge;su(ye);try{const ot=function wE(r,s,o,u,l,h){const m=o[1];o[22]=r;const w=ka(m,22,2,"#host",null),C=w.mergedAttrs=s.hostAttrs;null!==C&&(zd(w,C,!0),null!==r&&(uo(l,r,C),null!==w.classes&&Op(l,r,w.classes),null!==w.styles&&Wm(l,r,w.styles)));const x=u.createRenderer(r,s),R=_l(o,ay(s),null,s.onPush?32:16,o[22],w,u,x,h||null,null,null);return m.firstCreatePass&&(us(Vs(w,o),m,s.type),hf(m,w),gf(w,o.length,1)),yf(o,R),o[22]=R}(R,this.componentDef,ye,v,C);if(R)if(u)uo(C,R,["ng-version",Xe.full]);else{const{attrs:yt,classes:Te}=function Yv(r){const s=[],o=[];let u=1,l=2;for(;u<r.length;){let h=r[u];if("string"==typeof h)2===l?""!==h&&s.push(h,r[++u]):8===l&&o.push(h);else{if(!Nr(l))break;l=h}u++}return{attrs:s,classes:o}}(this.componentDef.selectors[0]);yt&&uo(C,R,yt),Te&&Te.length>0&&Op(C,R,Te.join(" "))}if(Ge=ro(J,22),void 0!==o){const yt=Ge.projection=[];for(let Te=0;Te<this.ngContentSelectors.length;Te++){const Dt=o[Te];yt.push(null!=Dt?Array.from(Dt):null)}}ke=function AI(r,s,o,u){const l=o[1],h=function _I(r,s,o){const u=En();r.firstCreatePass&&(o.providersResolver&&o.providersResolver(o),dy(r,u,s,Hd(r,s,1,null),o),cy(r,u));const l=ls(s,r,u.directiveStart,u);zr(l,s);const h=Tr(u,s);return h&&zr(h,s),l}(l,o,s);if(r[8]=o[8]=h,null!==u)for(const v of u)v(h,s);if(s.contentQueries){const v=En();s.contentQueries(1,h,v.directiveStart)}const m=En();return!l.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(Br(m.index),ly(o[1],m,0,m.directiveStart,m.directiveEnd,s),kt(s,h)),h}(ot,this.componentDef,ye,[_i]),vl(J,ye,null)}finally{ks()}return new IE(this.componentType,ke,g(Ge,ye),ye,Ge)}}class IE extends class fn{}{constructor(s,o,u,l,h){super(),this.location=u,this._rootLView=l,this._tNode=h,this.instance=o,this.hostView=this.changeDetectorRef=new vy(l),this.componentType=s}setInput(s,o){const u=this._tNode.inputs;let l;if(null!==u&&(l=u[s])){const h=this._rootLView;_y(h[1],h,l,s,o),yi(h,this._tNode.index)}}get injector(){return new Us(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function _i(){const r=En();uu(De()[1],r)}let sg=null;function El(){if(!sg){const r=Xt.Symbol;if(r&&r.iterator)sg=r.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let o=0;o<s.length;++o){const u=s[o];"entries"!==u&&"size"!==u&&Map.prototype[u]===Map.prototype.entries&&(sg=u)}}}return sg}function If(r){return!!wy(r)&&(Array.isArray(r)||!(r instanceof Map)&&El()in r)}function wy(r){return null!==r&&("function"==typeof r||"object"==typeof r)}function si(r,s,o){return!Object.is(r[s],o)&&(r[s]=o,!0)}function kI(r,s,o,u,l,h,m,v){const w=De(),C=Ft(),x=r+22,R=C.firstCreatePass?function RI(r,s,o,u,l,h,m,v,w){const C=s.consts,x=ka(s,r,4,m||null,hi(C,v));Is(s,o,x,hi(C,w)),uu(s,x);const R=x.tViews=Qp(2,x,u,l,h,s.directiveRegistry,s.pipeRegistry,null,s.schemas,C);return null!==s.queries&&(s.queries.template(s,x),R.queries=s.queries.embeddedTView(x)),x}(x,C,w,s,o,u,l,h,m):C.data[x];Xr(R,!1);const j=w[11].createComment("");ul(C,w,j,R),zr(j,w),yf(w,w[x]=EI(j,w,j,R)),wc(R)&&Zs(C,w,R),null!=m&&Yp(w,R,v)}function Ty(r){return function Pi(r,s){return r[s]}(function Mc(){return wt.lFrame.contextLView}(),22+r)}function Qd(r,s,o){const u=De();return si(u,Rs(),s)&&function zi(r,s,o,u,l,h,m,v){const w=Tr(s,o);let x,C=s.inputs;!v&&null!=C&&(x=C[u])?(_y(r,o,x,u,l),zo(s)&&yi(o,s.index)):3&s.type&&(u=function Ku(r){return"class"===r?"className":"for"===r?"htmlFor":"formaction"===r?"formAction":"innerHtml"===r?"innerHTML":"readonly"===r?"readOnly":"tabindex"===r?"tabIndex":r}(u),l=null!=m?m(l,s.value||"",u):l,h.setProperty(w,u,l))}(Ft(),function ln(){const r=wt.lFrame;return ro(r.tView,r.selectedIndex)}(),u,r,s,u[11],o,!1),Qd}function bl(r,s,o,u,l){const m=l?"class":"style";_y(r,o,s.inputs[m],m,u)}function cg(r,s,o,u){const l=De(),h=Ft(),m=22+r,v=l[11],w=l[m]=It(v,s,function au(){return wt.lFrame.currentNamespace}()),C=h.firstCreatePass?function Tl(r,s,o,u,l,h,m){const v=s.consts,C=ka(s,r,2,l,hi(v,h));return Is(s,o,C,hi(v,m)),null!==C.attrs&&zd(C,C.attrs,!1),null!==C.mergedAttrs&&zd(C,C.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,C),C}(m,h,l,0,s,o,u):h.data[m];Xr(C,!0);const x=C.mergedAttrs;null!==x&&uo(v,w,x);const R=C.classes;null!==R&&Op(v,w,R);const j=C.styles;return null!==j&&Wm(v,w,j),64!=(64&C.flags)&&ul(h,l,w,C),0===function Ja(){return wt.lFrame.elementDepthCount}()&&zr(w,l),function Xa(){wt.lFrame.elementDepthCount++}(),wc(C)&&(Zs(h,l,C),function Il(r,s,o){if(Ga(s)){const l=s.directiveEnd;for(let h=s.directiveStart;h<l;h++){const m=r.data[h];m.contentQueries&&m.contentQueries(1,o[h],h)}}}(h,C,l)),null!==u&&Yp(l,C),cg}function Df(){let r=En();Zo()?function Yo(){wt.lFrame.isParent=!1}():(r=r.parent,Xr(r,!1));const s=r;!function Sc(){wt.lFrame.elementDepthCount--}();const o=Ft();return o.firstCreatePass&&(uu(o,r),Ga(r)&&o.queries.elementEnd(r)),null!=s.classesWithoutHost&&function du(r){return 0!=(16&r.flags)}(s)&&bl(o,s,De(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function ad(r){return 0!=(32&r.flags)}(s)&&bl(o,s,De(),s.stylesWithoutHost,!1),Df}function Cy(r,s,o,u){return cg(r,s,o,u),Df(),Cy}function ic(){return De()}function lg(r){return!!r&&"function"==typeof r.then}function OI(r){return!!r&&"function"==typeof r.subscribe}const ME=OI;function bf(r,s,o,u){const l=De(),h=Ft(),m=En();return function Ay(r,s,o,u,l,h,m,v){const w=wc(u),x=r.firstCreatePass&&my(r),R=s[8],j=gy(s);let J=!0;if(3&u.type||v){const Ge=Tr(u,s),ot=v?v(Ge):Ge,yt=j.length,Te=v?Jt=>v(wn(Jt[u.index])):u.index;let Dt=null;if(!v&&w&&(Dt=function NE(r,s,o,u){const l=r.cleanup;if(null!=l)for(let h=0;h<l.length-1;h+=2){const m=l[h];if(m===o&&l[h+1]===u){const v=s[7],w=l[h+2];return v.length>w?v[w]:null}"string"==typeof m&&(h+=2)}return null}(r,s,l,u.index)),null!==Dt)(Dt.__ngLastListenerFn__||Dt).__ngNextListenerFn__=h,Dt.__ngLastListenerFn__=h,J=!1;else{h=Cf(u,s,R,h,!1);const Jt=o.listen(ot,l,h);j.push(h,Jt),x&&x.push(l,Te,yt,yt+1)}}else h=Cf(u,s,R,h,!1);const ye=u.outputs;let ke;if(J&&null!==ye&&(ke=ye[l])){const Ge=ke.length;if(Ge)for(let ot=0;ot<Ge;ot+=2){const Sn=s[ke[ot]][ke[ot+1]].subscribe(h),yc=j.length;j.push(h,Sn),x&&x.push(l,u.index,yc,-(yc+1))}}}(h,l,l[11],m,r,s,0,u),bf}function Jd(r,s,o,u){try{return!1!==o(u)}catch(l){return TI(r,l),!1}}function Cf(r,s,o,u,l){return function h(m){if(m===Function)return u;wl(2&r.flags?$t(r.index,s):s);let w=Jd(s,0,u,m),C=h.__ngNextListenerFn__;for(;C;)w=Jd(s,0,C,m)&&w,C=C.__ngNextListenerFn__;return l&&!1===w&&(m.preventDefault(),m.returnValue=!1),w}}function Xd(r=1){return function Ps(r){return(wt.lFrame.contextLView=function ou(r,s){for(;r>0;)s=s[15],r--;return s}(r,wt.lFrame.contextLView))[8]}(r)}function Uy(r,s=""){const o=De(),u=Ft(),l=r+22,h=u.firstCreatePass?ka(u,l,1,s,null):u.data[l],m=o[l]=function Ca(r,s){return r.createText(s)}(o[11],s);ul(u,o,m,h),Xr(h,!1)}function Nf(r,s,o){const u=De(),l=function Yu(r,s,o,u){return si(r,Rs(),o)?s+fe(o)+u:st}(u,r,s,o);return l!==st&&qi(u,Wn(),l),Nf}const Rl=void 0;var Of=["en",[["a","p"],["AM","PM"],Rl],[["AM","PM"],Rl,Rl],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Rl,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Rl,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Rl,"{1} 'at' {0}",Rl],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function HE(r){const o=Math.floor(Math.abs(r)),u=r.toString().replace(/^[^.]*\.?/,"").length;return 1===o&&0===u?1:5}];let uc={};function Ff(r){const s=function Xy(r){return r.toLowerCase().replace(/_/g,"-")}(r);let o=vg(s);if(o)return o;const u=s.split("-")[0];if(o=vg(u),o)return o;if("en"===u)return Of;throw new Ae(701,!1)}function nh(r){return Ff(r)[mt.PluralCase]}function vg(r){return r in uc||(uc[r]=Xt.ng&&Xt.ng.common&&Xt.ng.common.locales&&Xt.ng.common.locales[r]),uc[r]}var mt=(()=>((mt=mt||{})[mt.LocaleId=0]="LocaleId",mt[mt.DayPeriodsFormat=1]="DayPeriodsFormat",mt[mt.DayPeriodsStandalone=2]="DayPeriodsStandalone",mt[mt.DaysFormat=3]="DaysFormat",mt[mt.DaysStandalone=4]="DaysStandalone",mt[mt.MonthsFormat=5]="MonthsFormat",mt[mt.MonthsStandalone=6]="MonthsStandalone",mt[mt.Eras=7]="Eras",mt[mt.FirstDayOfWeek=8]="FirstDayOfWeek",mt[mt.WeekendRange=9]="WeekendRange",mt[mt.DateFormat=10]="DateFormat",mt[mt.TimeFormat=11]="TimeFormat",mt[mt.DateTimeFormat=12]="DateTimeFormat",mt[mt.NumberSymbols=13]="NumberSymbols",mt[mt.NumberFormats=14]="NumberFormats",mt[mt.CurrencyCode=15]="CurrencyCode",mt[mt.CurrencySymbol=16]="CurrencySymbol",mt[mt.CurrencyName=17]="CurrencyName",mt[mt.Currencies=18]="Currencies",mt[mt.Directionality=19]="Directionality",mt[mt.PluralCase=20]="PluralCase",mt[mt.ExtraData=21]="ExtraData",mt))();const rh="en-US";let Vf=rh;class lc{}function I_(r,s){return new Ng(r,s??null)}class Ng extends lc{constructor(s,o){super(),this._parent=o,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new ng(this);const u=function rn(r,s){const o=r[Yt]||null;if(!o&&!0===s)throw new Error(`Type ${le(r)} does not have '\u0275mod' property.`);return o}(s);this._bootstrapComponents=function ir(r){return r instanceof Function?r():r}(u.bootstrap),this._r3Injector=Fp(s,o,[{provide:lc,useValue:this},{provide:Nd,useValue:this.componentFactoryResolver}],le(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(o=>o()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class w_ extends class cD{}{constructor(s){super(),this.moduleType=s}create(s){return new Ng(this.moduleType,s)}}function R_(r){return s=>{setTimeout(r,void 0,s)}}const Fa=class ID extends I.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,o,u){let l=s,h=o||(()=>null),m=u;if(s&&"object"==typeof s){const w=s;l=w.next?.bind(w),h=w.error?.bind(w),m=w.complete?.bind(w)}this.__isAsync&&(h=R_(h),l&&(l=R_(l)),m&&(m=R_(m)));const v=super.subscribe({next:l,error:h,complete:m});return s instanceof X.w0&&s.add(v),v}};let fh=(()=>{class r{}return r.__NG_ELEMENT_ID__=DD,r})();const wD=fh,ED=class extends wD{constructor(s,o,u){super(),this._declarationLView=s,this._declarationTContainer=o,this.elementRef=u}createEmbeddedView(s,o){const u=this._declarationTContainer.tViews,l=_l(this._declarationLView,u,s,16,null,u.declTNode,null,null,null,null,o||null);l[17]=this._declarationLView[this._declarationTContainer.index];const m=this._declarationLView[19];return null!==m&&(l[19]=m.createEmbeddedView(u)),vl(u,l,s),new Wd(l)}};function DD(){return function Ug(r,s){return 4&r.type?new ED(s,r,g(r,s)):null}(En(),De())}let ph=(()=>{class r{}return r.__NG_ELEMENT_ID__=bD,r})();function bD(){return function Qn(r,s){let o;const u=s[r.index];if(br(u))o=u;else{let l;if(8&r.type)l=wn(u);else{const h=s[11];l=h.createComment("");const m=Tr(r,s);al(h,pn(h,m),l,function Et(r,s){return r.nextSibling(s)}(h,m),!1)}s[r.index]=o=EI(u,s,l,r),yf(s,o)}return new In(o,r,s)}(En(),De())}const TD=ph,In=class extends TD{constructor(s,o,u){super(),this._lContainer=s,this._hostTNode=o,this._hostLView=u}get element(){return g(this._hostTNode,this._hostLView)}get injector(){return new Us(this._hostTNode,this._hostLView)}get parentInjector(){const s=gu(this._hostTNode,this._hostLView);if(cd(s)){const o=ra(s,this._hostLView),u=er(s);return new Us(o[1].data[u+8],o)}return new Us(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const o=CD(this._lContainer);return null!==o&&o[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,o,u){let l,h;"number"==typeof u?l=u:null!=u&&(l=u.index,h=u.injector);const m=s.createEmbeddedView(o||{},h);return this.insert(m,l),m}createComponent(s,o,u,l,h){const m=s&&!function go(r){return"function"==typeof r}(s);let v;if(m)v=o;else{const R=o||{};v=R.index,u=R.injector,l=R.projectableNodes,h=R.environmentInjector||R.ngModuleRef}const w=m?s:new _f(K(s)),C=u||this.parentInjector;if(!h&&null==w.ngModule){const j=(m?C:this.parentInjector).get(nr,null);j&&(h=j)}const x=w.create(C,l,void 0,h);return this.insert(x.hostView,v),x}insert(s,o){const u=s._lView,l=u[1];if(function Za(r){return br(r[3])}(u)){const x=this.indexOf(s);if(-1!==x)this.detach(x);else{const R=u[3],j=new In(R,R[6],R[3]);j.detach(j.indexOf(s))}}const h=this._adjustIndex(o),m=this._lContainer;!function vr(r,s,o,u){const l=10+u,h=o.length;u>0&&(o[l-1][4]=s),u<h-10?(s[4]=o[l],qn(o,10+u,s)):(o.push(s),s[4]=null),s[3]=o;const m=s[17];null!==m&&o!==m&&function Uv(r,s){const o=r[9];s[16]!==s[3][3][16]&&(r[2]=!0),null===o?r[9]=[s]:o.push(s)}(m,s);const v=s[19];null!==v&&v.insertView(r),s[2]|=64}(l,u,m,h);const v=$m(h,m),w=u[11],C=pn(w,m[7]);return null!==C&&function Ke(r,s,o,u,l,h){u[0]=l,u[6]=s,Sa(r,u,o,1,l,h)}(l,m[6],w,u,C,v),s.attachToViewContainerRef(),qn(W0(m),h,s),s}move(s,o){return this.insert(s,o)}indexOf(s){const o=CD(this._lContainer);return null!==o?o.indexOf(s):-1}remove(s){const o=this._adjustIndex(s,-1),u=Bm(this._lContainer,o);u&&(mo(W0(this._lContainer),o),$v(u[1],u))}detach(s){const o=this._adjustIndex(s,-1),u=Bm(this._lContainer,o);return u&&null!=mo(W0(this._lContainer),o)?new Wd(u):null}_adjustIndex(s,o=0){return s??this.length+o}};function CD(r){return r[8]}function W0(r){return r[8]||(r[8]=[])}function qg(...r){}const Q_=new on("Application Initializer");let Kg=(()=>{class r{constructor(o){this.appInits=o,this.resolve=qg,this.reject=qg,this.initialized=!1,this.done=!1,this.donePromise=new Promise((u,l)=>{this.resolve=u,this.reject=l})}runInitializers(){if(this.initialized)return;const o=[],u=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let l=0;l<this.appInits.length;l++){const h=this.appInits[l]();if(lg(h))o.push(h);else if(ME(h)){const m=new Promise((v,w)=>{h.subscribe({complete:v,error:w})});o.push(m)}}Promise.all(o).then(()=>{u()}).catch(l=>{this.reject(l)}),0===o.length&&u(),this.initialized=!0}}return r.\u0275fac=function(o){return new(o||r)(Vn(Q_,8))},r.\u0275prov=Wt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();const zl=new on("AppId",{providedIn:"root",factory:function Zg(){return`${uw()}${uw()}${uw()}`}});function uw(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const cw=new on("Platform Initializer"),lw=new on("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),pc=new on("appBootstrapListener"),Yg=new on("LocaleId",{providedIn:"root",factory:()=>function Bn(r,s=Je.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Vn(r,s)}(Yg,Je.Optional|Je.SkipSelf)||function HD(){return typeof $localize<"u"&&$localize.locale||rh}()}),GD=new on("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),WD=(()=>Promise.resolve(0))();function Qg(r){typeof Zone>"u"?WD.then(()=>{r&&r.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",r)}class Ds{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:o=!1,shouldCoalesceRunChangeDetection:u=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Fa(!1),this.onMicrotaskEmpty=new Fa(!1),this.onStable=new Fa(!1),this.onError=new Fa(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const l=this;if(l._nesting=0,l._outer=l._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const h=Zone.AsyncStackTaggingZoneSpec;l._inner=l._inner.fork(new h("Angular"))}Zone.TaskTrackingZoneSpec&&(l._inner=l._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(l._inner=l._inner.fork(Zone.longStackTraceZoneSpec)),l.shouldCoalesceEventChangeDetection=!u&&o,l.shouldCoalesceRunChangeDetection=u,l.lastRequestAnimationFrameId=-1,l.nativeRequestAnimationFrame=function Jg(){let r=Xt.requestAnimationFrame,s=Xt.cancelAnimationFrame;if(typeof Zone<"u"&&r&&s){const o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o);const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u)}return{nativeRequestAnimationFrame:r,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function bs(r){const s=()=>{!function Wl(r){r.isCheckStableRunning||-1!==r.lastRequestAnimationFrameId||(r.lastRequestAnimationFrameId=r.nativeRequestAnimationFrame.call(Xt,()=>{r.fakeTopEventTask||(r.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{r.lastRequestAnimationFrameId=-1,Wr(r),r.isCheckStableRunning=!0,Xg(r),r.isCheckStableRunning=!1},void 0,()=>{},()=>{})),r.fakeTopEventTask.invoke()}),Wr(r))}(r)};r._inner=r._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(o,u,l,h,m,v)=>{try{return X_(r),o.invokeTask(l,h,m,v)}finally{(r.shouldCoalesceEventChangeDetection&&"eventTask"===h.type||r.shouldCoalesceRunChangeDetection)&&s(),ev(r)}},onInvoke:(o,u,l,h,m,v,w)=>{try{return X_(r),o.invoke(l,h,m,v,w)}finally{r.shouldCoalesceRunChangeDetection&&s(),ev(r)}},onHasTask:(o,u,l,h)=>{o.hasTask(l,h),u===l&&("microTask"==h.change?(r._hasPendingMicrotasks=h.microTask,Wr(r),Xg(r)):"macroTask"==h.change&&(r.hasPendingMacrotasks=h.macroTask))},onHandleError:(o,u,l,h)=>(o.handleError(l,h),r.runOutsideAngular(()=>r.onError.emit(h)),!1)})}(l)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ds.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(Ds.isInAngularZone())throw new Ae(909,!1)}run(s,o,u){return this._inner.run(s,o,u)}runTask(s,o,u,l){const h=this._inner,m=h.scheduleEventTask("NgZoneEvent: "+l,s,gw,qg,qg);try{return h.runTask(m,o,u)}finally{h.cancelTask(m)}}runGuarded(s,o,u){return this._inner.runGuarded(s,o,u)}runOutsideAngular(s){return this._outer.run(s)}}const gw={};function Xg(r){if(0==r._nesting&&!r.hasPendingMicrotasks&&!r.isStable)try{r._nesting++,r.onMicrotaskEmpty.emit(null)}finally{if(r._nesting--,!r.hasPendingMicrotasks)try{r.runOutsideAngular(()=>r.onStable.emit(null))}finally{r.isStable=!0}}}function Wr(r){r.hasPendingMicrotasks=!!(r._hasPendingMicrotasks||(r.shouldCoalesceEventChangeDetection||r.shouldCoalesceRunChangeDetection)&&-1!==r.lastRequestAnimationFrameId)}function X_(r){r._nesting++,r.isStable&&(r.isStable=!1,r.onUnstable.emit(null))}function ev(r){r._nesting--,Xg(r)}class Kf{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Fa,this.onMicrotaskEmpty=new Fa,this.onStable=new Fa,this.onError=new Fa}run(s,o,u){return s.apply(o,u)}runGuarded(s,o,u){return s.apply(o,u)}runOutsideAngular(s){return s()}runTask(s,o,u,l){return s.apply(o,u)}}const vh=new on(""),ai=new on("");let Ua,qD=(()=>{class r{constructor(o,u,l){this._ngZone=o,this.registry=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Ua||(function Ih(r){Ua=r}(l),l.addToWindow(u)),this._watchAngularEvents(),o.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ds.assertNotInAngularZone(),Qg(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Qg(()=>{for(;0!==this._callbacks.length;){let o=this._callbacks.pop();clearTimeout(o.timeoutId),o.doneCb(this._didWork)}this._didWork=!1});else{let o=this.getPendingTasks();this._callbacks=this._callbacks.filter(u=>!u.updateCb||!u.updateCb(o)||(clearTimeout(u.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(o=>({source:o.source,creationLocation:o.creationLocation,data:o.data})):[]}addCallback(o,u,l){let h=-1;u&&u>0&&(h=setTimeout(()=>{this._callbacks=this._callbacks.filter(m=>m.timeoutId!==h),o(this._didWork,this.getPendingTasks())},u)),this._callbacks.push({doneCb:o,timeoutId:h,updateCb:l})}whenStable(o,u,l){if(l&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(o,u,l),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(o){this.registry.registerApplication(o,this)}unregisterApplication(o){this.registry.unregisterApplication(o)}findProviders(o,u,l){return[]}}return r.\u0275fac=function(o){return new(o||r)(Vn(Ds),Vn(em),Vn(ai))},r.\u0275prov=Wt({token:r,factory:r.\u0275fac}),r})(),em=(()=>{class r{constructor(){this._applications=new Map}registerApplication(o,u){this._applications.set(o,u)}unregisterApplication(o){this._applications.delete(o)}unregisterAllApplications(){this._applications.clear()}getTestability(o){return this._applications.get(o)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(o,u=!0){return Ua?.findTestabilityInTree(this,o,u)??null}}return r.\u0275fac=function(o){return new(o||r)},r.\u0275prov=Wt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})(),$o=null;const gc=new on("AllowMultipleToken"),tv=new on("PlatformDestroyListeners");function yw(r,s,o=[]){const u=`Platform: ${s}`,l=new on(u);return(h=[])=>{let m=rv();if(!m||m.injector.get(gc,!1)){const v=[...o,...h,{provide:l,useValue:!0}];r?r(v):function QD(r){if($o&&!$o.get(gc,!1))throw new Ae(400,!1);$o=r;const s=r.get(Iw);(function mw(r){const s=r.get(cw,null);s&&s.forEach(o=>o())})(r)}(function vw(r=[],s){return Hu.create({name:s,providers:[{provide:tl,useValue:"platform"},{provide:tv,useValue:new Set([()=>$o=null])},...r]})}(v,u))}return function _w(r){const s=rv();if(!s)throw new Ae(401,!1);return s}()}}function rv(){return $o?.get(Iw)??null}let Iw=(()=>{class r{constructor(o){this._injector=o,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(o,u){const l=function Ew(r,s){let o;return o="noop"===r?new Kf:("zone.js"===r?void 0:r)||new Ds(s),o}(u?.ngZone,function ww(r){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!r||!r.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!r||!r.ngZoneRunCoalescing)||!1}}(u)),h=[{provide:Ds,useValue:l}];return l.run(()=>{const m=Hu.create({providers:h,parent:this.injector,name:o.moduleType.name}),v=o.create(m),w=v.injector.get(kd,null);if(!w)throw new Ae(402,!1);return l.runOutsideAngular(()=>{const C=l.onError.subscribe({next:x=>{w.handleError(x)}});v.onDestroy(()=>{Zf(this._modules,v),C.unsubscribe()})}),function Dw(r,s,o){try{const u=o();return lg(u)?u.catch(l=>{throw s.runOutsideAngular(()=>r.handleError(l)),l}):u}catch(u){throw s.runOutsideAngular(()=>r.handleError(u)),u}}(w,l,()=>{const C=v.injector.get(Kg);return C.runInitializers(),C.donePromise.then(()=>(function wg(r){Ot(r,"Expected localeId to be defined"),"string"==typeof r&&(Vf=r.toLowerCase().replace(/_/g,"-"))}(v.injector.get(Yg,rh)||rh),this._moduleDoBootstrap(v),v))})})}bootstrapModule(o,u=[]){const l=bw({},u);return function KD(r,s,o){const u=new w_(o);return Promise.resolve(u)}(0,0,o).then(h=>this.bootstrapModuleFactory(h,l))}_moduleDoBootstrap(o){const u=o.injector.get(iv);if(o._bootstrapComponents.length>0)o._bootstrapComponents.forEach(l=>u.bootstrap(l));else{if(!o.instance.ngDoBootstrap)throw new Ae(403,!1);o.instance.ngDoBootstrap(u)}this._modules.push(o)}onDestroy(o){this._destroyListeners.push(o)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u());const o=this._injector.get(tv,null);o&&(o.forEach(u=>u()),o.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return r.\u0275fac=function(o){return new(o||r)(Vn(Hu))},r.\u0275prov=Wt({token:r,factory:r.\u0275fac,providedIn:"platform"}),r})();function bw(r,s){return Array.isArray(s)?s.reduce(bw,r):{...r,...s}}let iv=(()=>{class r{constructor(o,u,l){this._zone=o,this._injector=u,this._exceptionHandler=l,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const h=new k.y(v=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{v.next(this._stable),v.complete()})}),m=new k.y(v=>{let w;this._zone.runOutsideAngular(()=>{w=this._zone.onStable.subscribe(()=>{Ds.assertNotInAngularZone(),Qg(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,v.next(!0))})})});const C=this._zone.onUnstable.subscribe(()=>{Ds.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{v.next(!1)}))});return()=>{w.unsubscribe(),C.unsubscribe()}});this.isStable=(0,ae.T)(h,m.pipe((0,ie.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(o,u){const l=o instanceof Pu;if(!this._injector.get(Kg).done)throw!l&&function qt(r){const s=K(r)||$e(r)||ct(r);return null!==s&&s.standalone}(o),new Ae(405,false);let m;m=l?o:this._injector.get(Nd).resolveComponentFactory(o),this.componentTypes.push(m.componentType);const v=function YD(r){return r.isBoundToModule}(m)?void 0:this._injector.get(lc),C=m.create(Hu.NULL,[],u||m.selector,v),x=C.location.nativeElement,R=C.injector.get(vh,null);return R?.registerApplication(x),C.onDestroy(()=>{this.detachView(C.hostView),Zf(this.components,C),R?.unregisterApplication(x)}),this._loadComponent(C),C}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let o of this._views)o.detectChanges()}catch(o){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(o))}finally{this._runningTick=!1}}attachView(o){const u=o;this._views.push(u),u.attachToAppRef(this)}detachView(o){const u=o;Zf(this._views,u),u.detachFromAppRef()}_loadComponent(o){this.attachView(o.hostView),this.tick(),this.components.push(o),this._injector.get(pc,[]).concat(this._bootstrapListeners).forEach(l=>l(o))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(o=>o()),this._views.slice().forEach(o=>o.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(o){return this._destroyListeners.push(o),()=>Zf(this._destroyListeners,o)}destroy(){if(this._destroyed)throw new Ae(406,!1);const o=this._injector;o.destroy&&!o.destroyed&&o.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return r.\u0275fac=function(o){return new(o||r)(Vn(Ds),Vn(nr),Vn(kd))},r.\u0275prov=Wt({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();function Zf(r,s){const o=r.indexOf(s);o>-1&&r.splice(o,1)}let Yf=!0,Cw=!1;function Kb(){return Cw=!0,Yf}function XD(){if(Cw)throw new Error("Cannot enable prod mode after platform setup.");Yf=!1}let tb=(()=>{class r{}return r.__NG_ELEMENT_ID__=nb,r})();function nb(r){return function Zb(r,s,o){if(zo(r)&&!o){const u=$t(r.index,s);return new Wd(u,u)}return 47&r.type?new Wd(s[16],s):null}(En(),De(),16==(16&r))}class ui{constructor(){}supports(s){return If(s)}create(s){return new Mw(s)}}const nm=(r,s)=>s;class Mw{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||nm}forEachItem(s){let o;for(o=this._itHead;null!==o;o=o._next)s(o)}forEachOperation(s){let o=this._itHead,u=this._removalsHead,l=0,h=null;for(;o||u;){const m=!u||o&&o.currentIndex<sm(u,l,h)?o:u,v=sm(m,l,h),w=m.currentIndex;if(m===u)l--,u=u._nextRemoved;else if(o=o._next,null==m.previousIndex)l++;else{h||(h=[]);const C=v-l,x=w-l;if(C!=x){for(let j=0;j<C;j++){const J=j<h.length?h[j]:h[j]=0,ye=J+j;x<=ye&&ye<C&&(h[j]=J+1)}h[m.previousIndex]=x-C}}v!==w&&s(m,v,w)}}forEachPreviousItem(s){let o;for(o=this._previousItHead;null!==o;o=o._nextPrevious)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachMovedItem(s){let o;for(o=this._movesHead;null!==o;o=o._nextMoved)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}forEachIdentityChange(s){let o;for(o=this._identityChangesHead;null!==o;o=o._nextIdentityChange)s(o)}diff(s){if(null==s&&(s=[]),!If(s))throw new Ae(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l,h,m,o=this._itHead,u=!1;if(Array.isArray(s)){this.length=s.length;for(let v=0;v<this.length;v++)h=s[v],m=this._trackByFn(v,h),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,h,m,v)),Object.is(o.item,h)||this._addIdentityChange(o,h)):(o=this._mismatch(o,h,m,v),u=!0),o=o._next}else l=0,function SE(r,s){if(Array.isArray(r))for(let o=0;o<r.length;o++)s(r[o]);else{const o=r[El()]();let u;for(;!(u=o.next()).done;)s(u.value)}}(s,v=>{m=this._trackByFn(l,v),null!==o&&Object.is(o.trackById,m)?(u&&(o=this._verifyReinsertion(o,v,m,l)),Object.is(o.item,v)||this._addIdentityChange(o,v)):(o=this._mismatch(o,v,m,l),u=!0),o=o._next,l++}),this.length=l;return this._truncate(o),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,o,u,l){let h;return null===s?h=this._itTail:(h=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._reinsertAfter(s,h,l)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(u,l))?(Object.is(s.item,o)||this._addIdentityChange(s,o),this._moveAfter(s,h,l)):s=this._addAfter(new uv(o,u),h,l),s}_verifyReinsertion(s,o,u,l){let h=null===this._unlinkedRecords?null:this._unlinkedRecords.get(u,null);return null!==h?s=this._reinsertAfter(h,s._prev,l):s.currentIndex!=l&&(s.currentIndex=l,this._addToMoves(s,l)),s}_truncate(s){for(;null!==s;){const o=s._next;this._addToRemovals(this._unlink(s)),s=o}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,o,u){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const l=s._prevRemoved,h=s._nextRemoved;return null===l?this._removalsHead=h:l._nextRemoved=h,null===h?this._removalsTail=l:h._prevRemoved=l,this._insertAfter(s,o,u),this._addToMoves(s,u),s}_moveAfter(s,o,u){return this._unlink(s),this._insertAfter(s,o,u),this._addToMoves(s,u),s}_addAfter(s,o,u){return this._insertAfter(s,o,u),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,o,u){const l=null===o?this._itHead:o._next;return s._next=l,s._prev=o,null===l?this._itTail=s:l._prev=s,null===o?this._itHead=s:o._next=s,null===this._linkedRecords&&(this._linkedRecords=new im),this._linkedRecords.put(s),s.currentIndex=u,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const o=s._prev,u=s._next;return null===o?this._itHead=u:o._next=u,null===u?this._itTail=o:u._prev=o,s}_addToMoves(s,o){return s.previousIndex===o||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new im),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,o){return s.item=o,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class uv{constructor(s,o){this.item=s,this.trackById=o,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rm{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,o){let u;for(u=this._head;null!==u;u=u._nextDup)if((null===o||o<=u.currentIndex)&&Object.is(u.trackById,s))return u;return null}remove(s){const o=s._prevDup,u=s._nextDup;return null===o?this._head=u:o._nextDup=u,null===u?this._tail=o:u._prevDup=o,null===this._head}}class im{constructor(){this.map=new Map}put(s){const o=s.trackById;let u=this.map.get(o);u||(u=new rm,this.map.set(o,u)),u.add(s)}get(s,o){const l=this.map.get(s);return l?l.get(s,o):null}remove(s){const o=s.trackById;return this.map.get(o).remove(s)&&this.map.delete(o),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function sm(r,s,o){const u=r.previousIndex;if(null===u)return u;let l=0;return o&&u<o.length&&(l=o[u]),u+s+l}class Nw{constructor(){}supports(s){return s instanceof Map||wy(s)}create(){return new sb}}class sb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let o;for(o=this._mapHead;null!==o;o=o._next)s(o)}forEachPreviousItem(s){let o;for(o=this._previousMapHead;null!==o;o=o._nextPrevious)s(o)}forEachChangedItem(s){let o;for(o=this._changesHead;null!==o;o=o._nextChanged)s(o)}forEachAddedItem(s){let o;for(o=this._additionsHead;null!==o;o=o._nextAdded)s(o)}forEachRemovedItem(s){let o;for(o=this._removalsHead;null!==o;o=o._nextRemoved)s(o)}diff(s){if(s){if(!(s instanceof Map||wy(s)))throw new Ae(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let o=this._mapHead;if(this._appendAfter=null,this._forEach(s,(u,l)=>{if(o&&o.key===l)this._maybeAddToChanges(o,u),this._appendAfter=o,o=o._next;else{const h=this._getOrCreateRecordForKey(l,u);o=this._insertBeforeOrAppend(o,h)}}),o){o._prev&&(o._prev._next=null),this._removalsHead=o;for(let u=o;null!==u;u=u._nextRemoved)u===this._mapHead&&(this._mapHead=null),this._records.delete(u.key),u._nextRemoved=u._next,u.previousValue=u.currentValue,u.currentValue=null,u._prev=null,u._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,o){if(s){const u=s._prev;return o._next=s,o._prev=u,s._prev=o,u&&(u._next=o),s===this._mapHead&&(this._mapHead=o),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=o,o._prev=this._appendAfter):this._mapHead=o,this._appendAfter=o,null}_getOrCreateRecordForKey(s,o){if(this._records.has(s)){const l=this._records.get(s);this._maybeAddToChanges(l,o);const h=l._prev,m=l._next;return h&&(h._next=m),m&&(m._prev=h),l._next=null,l._prev=null,l}const u=new ob(s);return this._records.set(s,u),u.currentValue=o,this._addToAdditions(u),u}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,o){Object.is(o,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=o,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,o){s instanceof Map?s.forEach(o):Object.keys(s).forEach(u=>o(s[u],u))}}class ob{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Rw(){return new cv([new ui])}let cv=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(null!=u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||Rw()),deps:[[r,new Z,new O]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(null!=u)return u;throw new Ae(901,!1)}}return r.\u0275prov=Wt({token:r,providedIn:"root",factory:Rw}),r})();function lv(){return new Eh([new Nw])}let Eh=(()=>{class r{constructor(o){this.factories=o}static create(o,u){if(u){const l=u.factories.slice();o=o.concat(l)}return new r(o)}static extend(o){return{provide:r,useFactory:u=>r.create(o,u||lv()),deps:[[r,new Z,new O]]}}find(o){const u=this.factories.find(l=>l.supports(o));if(u)return u;throw new Ae(901,!1)}}return r.\u0275prov=Wt({token:r,providedIn:"root",factory:lv}),r})();const ub=yw(null,"core",[]);let Pw=(()=>{class r{constructor(o){}}return r.\u0275fac=function(o){return new(o||r)(Vn(iv))},r.\u0275mod=At({type:r}),r.\u0275inj=St({}),r})()},3942:(dt,Se,L)=>{L.d(Se,{Z:()=>Ae});var I=L(2090),X=L(4859),k=L(9681),ae=L(1877);class ie{constructor(fe,pe){this._delegate=fe,this.firebase=pe,(0,k._addComponent)(fe,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=fe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(fe){this._delegate.automaticDataCollectionEnabled=fe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(fe=>{this._delegate.checkDestroyed(),fe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(fe,pe=k._DEFAULT_ENTRY_NAME){var qe;this._delegate.checkDestroyed();const Qe=this._delegate.container.getProvider(fe);return!Qe.isInitialized()&&"EXPLICIT"===(null===(qe=Qe.getComponent())||void 0===qe?void 0:qe.instantiationMode)&&Qe.initialize(),Qe.getImmediate({identifier:pe})}_removeServiceInstance(fe,pe=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(fe).clearInstance(pe)}_addComponent(fe){(0,k._addComponent)(this._delegate,fe)}_addOrOverwriteComponent(fe){(0,k._addOrOverwriteComponent)(this._delegate,fe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const he=new I.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),$=function ve(){const We=function le(We){const fe={},pe={__esModule:!0,initializeApp:function be(Ve,V={}){const ce=k.initializeApp(Ve,V);if((0,I.r3)(fe,ce.name))return fe[ce.name];const H=new We(ce,pe);return fe[ce.name]=H,H},app:Qe,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Ve){const V=Ve.name,ce=V.replace("-compat","");if(k._registerComponent(Ve)&&"PUBLIC"===Ve.type){const H=(Q=Qe())=>{if("function"!=typeof Q[ce])throw he.create("invalid-app-argument",{appName:V});return Q[ce]()};void 0!==Ve.serviceProps&&(0,I.ZB)(H,Ve.serviceProps),pe[ce]=H,We.prototype[ce]=function(...Q){return this._getService.bind(this,V).apply(this,Ve.multipleInstances?Q:[])}}return"PUBLIC"===Ve.type?pe[ce]:null},removeApp:function qe(Ve){delete fe[Ve]},useAsService:function Ue(Ve,V){return"serverAuth"===V?null:V},modularAPIs:k}};function Qe(Ve){if(!(0,I.r3)(fe,Ve=Ve||k._DEFAULT_ENTRY_NAME))throw he.create("no-app",{appName:Ve});return fe[Ve]}return pe.default=pe,Object.defineProperty(pe,"apps",{get:function me(){return Object.keys(fe).map(Ve=>fe[Ve])}}),Qe.App=We,pe}(ie);return We.INTERNAL=Object.assign(Object.assign({},We.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function fe(pe){(0,I.ZB)(We,pe)},createSubscribe:I.ne,ErrorFactory:I.LL,deepExtend:I.ZB}),We}(),U=new ae.Yd("@firebase/app-compat");if((0,I.jU)()&&void 0!==self.firebase){U.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const We=self.firebase.SDK_VERSION;We&&We.indexOf("LITE")>=0&&U.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ae=$;!function xe(We){(0,k.registerVersion)("@firebase/app-compat","0.1.37",We)}()},9681:(dt,Se,L)=>{L.r(Se),L.d(Se,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Ts,_DEFAULT_ENTRY_NAME:()=>Ot,_addComponent:()=>Ht,_addOrOverwriteComponent:()=>Wt,_apps:()=>en,_clearComponents:()=>Qi,_components:()=>un,_getProvider:()=>St,_registerComponent:()=>wr,_removeServiceInstance:()=>nn,deleteApp:()=>Ho,getApp:()=>Kr,getApps:()=>Zr,initializeApp:()=>li,onLog:()=>Ji,registerVersion:()=>gr,setLogLevel:()=>$n});var I=L(5861),X=L(4859),k=L(1877),ae=L(2090),ie=L(8766);class de{constructor(Ee){this.container=Ee}getPlatformInfoString(){return this.container.getProviders().map(et=>{if(function he(tt){return"VERSION"===tt.getComponent()?.type}(et)){const vt=et.getImmediate();return`${vt.library}/${vt.version}`}return null}).filter(et=>et).join(" ")}}const le="@firebase/app",$=new k.Yd("@firebase/app"),Ot="[DEFAULT]",Ye={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},en=new Map,un=new Map;function Ht(tt,Ee){try{tt.container.addComponent(Ee)}catch(et){$.debug(`Component ${Ee.name} failed to register with FirebaseApp ${tt.name}`,et)}}function Wt(tt,Ee){tt.container.addOrOverwriteComponent(Ee)}function wr(tt){const Ee=tt.name;if(un.has(Ee))return $.debug(`There were multiple attempts to register component ${Ee}.`),!1;un.set(Ee,tt);for(const et of en.values())Ht(et,tt);return!0}function St(tt,Ee){const et=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return et&&et.triggerHeartbeat(),tt.container.getProvider(Ee)}function nn(tt,Ee,et=Ot){St(tt,Ee).clearInstance(et)}function Qi(){un.clear()}const Er=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Or{constructor(Ee,et,vt){this._isDeleted=!1,this._options=Object.assign({},Ee),this._config=Object.assign({},et),this._name=et.name,this._automaticDataCollectionEnabled=et.automaticDataCollectionEnabled,this._container=vt,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ee}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ee){this._isDeleted=Ee}checkDestroyed(){if(this.isDeleted)throw Er.create("app-deleted",{appName:this._name})}}const Ts="9.12.1";function li(tt,Ee={}){let et=tt;"object"!=typeof Ee&&(Ee={name:Ee});const vt=Object.assign({name:Ot,automaticDataCollectionEnabled:!1},Ee),_t=vt.name;if("string"!=typeof _t||!_t)throw Er.create("bad-app-name",{appName:String(_t)});if(et||(et=(0,ae.aH)()),!et)throw Er.create("no-options");const At=en.get(_t);if(At){if((0,ae.vZ)(et,At.options)&&(0,ae.vZ)(vt,At.config))return At;throw Er.create("duplicate-app",{appName:_t})}const B=new X.H0(_t);for(const z of un.values())B.addComponent(z);const F=new Or(et,vt,B);return en.set(_t,F),F}function Kr(tt=Ot){const Ee=en.get(tt);if(!Ee&&tt===Ot)return li();if(!Ee)throw Er.create("no-app",{appName:tt});return Ee}function Zr(){return Array.from(en.values())}function Ho(tt){return Je.apply(this,arguments)}function Je(){return(Je=(0,I.Z)(function*(tt){const Ee=tt.name;en.has(Ee)&&(en.delete(Ee),yield Promise.all(tt.container.getProviders().map(et=>et.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function gr(tt,Ee,et){var vt;let _t=null!==(vt=Ye[tt])&&void 0!==vt?vt:tt;et&&(_t+=`-${et}`);const At=_t.match(/\s|\//),B=Ee.match(/\s|\//);if(At||B){const F=[`Unable to register library "${_t}" with version "${Ee}":`];return At&&F.push(`library name "${_t}" contains illegal characters (whitespace or "/")`),At&&B&&F.push("and"),B&&F.push(`version name "${Ee}" contains illegal characters (whitespace or "/")`),void $.warn(F.join(" "))}wr(new X.wA(`${_t}-version`,()=>({library:_t,version:Ee}),"VERSION"))}function Ji(tt,Ee){if(null!==tt&&"function"!=typeof tt)throw Er.create("invalid-log-argument");(0,k.Am)(tt,Ee)}function $n(tt){(0,k.Ub)(tt)}const An="firebase-heartbeat-store";let Pn=null;function sn(){return Pn||(Pn=(0,ie.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Ee)=>{0===Ee&&tt.createObjectStore(An)}}).catch(tt=>{throw Er.create("idb-open",{originalErrorMessage:tt.message})})),Pn}function ut(){return(ut=(0,I.Z)(function*(tt){var Ee;try{return(yield sn()).transaction(An).objectStore(An).get(On(tt))}catch(et){if(et instanceof ae.ZR)$.warn(et.message);else{const vt=Er.create("idb-get",{originalErrorMessage:null===(Ee=et)||void 0===Ee?void 0:Ee.message});$.warn(vt.message)}}})).apply(this,arguments)}function Xt(tt,Ee){return ar.apply(this,arguments)}function ar(){return(ar=(0,I.Z)(function*(tt,Ee){var et;try{const _t=(yield sn()).transaction(An,"readwrite");return yield _t.objectStore(An).put(Ee,On(tt)),_t.done}catch(vt){if(vt instanceof ae.ZR)$.warn(vt.message);else{const _t=Er.create("idb-set",{originalErrorMessage:null===(et=vt)||void 0===et?void 0:et.message});$.warn(_t.message)}}})).apply(this,arguments)}function On(tt){return`${tt.name}!${tt.options.appId}`}class Xi{constructor(Ee){this.container=Ee,this._heartbeatsCache=null;const et=this.container.getProvider("app").getImmediate();this._storage=new Yt(et),this._heartbeatsCachePromise=this._storage.read().then(vt=>(this._heartbeatsCache=vt,vt))}triggerHeartbeat(){var Ee=this;return(0,I.Z)(function*(){const vt=Ee.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),_t=Zt();if(null===Ee._heartbeatsCache&&(Ee._heartbeatsCache=yield Ee._heartbeatsCachePromise),Ee._heartbeatsCache.lastSentHeartbeatDate!==_t&&!Ee._heartbeatsCache.heartbeats.some(At=>At.date===_t))return Ee._heartbeatsCache.heartbeats.push({date:_t,agent:vt}),Ee._heartbeatsCache.heartbeats=Ee._heartbeatsCache.heartbeats.filter(At=>{const B=new Date(At.date).valueOf();return Date.now()-B<=2592e6}),Ee._storage.overwrite(Ee._heartbeatsCache)})()}getHeartbeatsHeader(){var Ee=this;return(0,I.Z)(function*(){if(null===Ee._heartbeatsCache&&(yield Ee._heartbeatsCachePromise),null===Ee._heartbeatsCache||0===Ee._heartbeatsCache.heartbeats.length)return"";const et=Zt(),{heartbeatsToSend:vt,unsentEntries:_t}=function Ii(tt,Ee=1024){const et=[];let vt=tt.slice();for(const _t of tt){const At=et.find(B=>B.agent===_t.agent);if(At){if(At.dates.push(_t.date),Hn(et)>Ee){At.dates.pop();break}}else if(et.push({agent:_t.agent,dates:[_t.date]}),Hn(et)>Ee){et.pop();break}vt=vt.slice(1)}return{heartbeatsToSend:et,unsentEntries:vt}}(Ee._heartbeatsCache.heartbeats),At=(0,ae.L)(JSON.stringify({version:2,heartbeats:vt}));return Ee._heartbeatsCache.lastSentHeartbeatDate=et,_t.length>0?(Ee._heartbeatsCache.heartbeats=_t,yield Ee._storage.overwrite(Ee._heartbeatsCache)):(Ee._heartbeatsCache.heartbeats=[],Ee._storage.overwrite(Ee._heartbeatsCache)),At})()}}function Zt(){return(new Date).toISOString().substring(0,10)}class Yt{constructor(Ee){this.app=Ee,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,I.Z)(function*(){return!!(0,ae.hl)()&&(0,ae.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ee=this;return(0,I.Z)(function*(){return(yield Ee._canUseIndexedDBPromise)&&(yield function ht(tt){return ut.apply(this,arguments)}(Ee.app))||{heartbeats:[]}})()}overwrite(Ee){var et=this;return(0,I.Z)(function*(){var vt;if(yield et._canUseIndexedDBPromise){const At=yield et.read();return Xt(et.app,{lastSentHeartbeatDate:null!==(vt=Ee.lastSentHeartbeatDate)&&void 0!==vt?vt:At.lastSentHeartbeatDate,heartbeats:Ee.heartbeats})}})()}add(Ee){var et=this;return(0,I.Z)(function*(){var vt;if(yield et._canUseIndexedDBPromise){const At=yield et.read();return Xt(et.app,{lastSentHeartbeatDate:null!==(vt=Ee.lastSentHeartbeatDate)&&void 0!==vt?vt:At.lastSentHeartbeatDate,heartbeats:[...At.heartbeats,...Ee.heartbeats]})}})()}}function Hn(tt){return(0,ae.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Dr(tt){wr(new X.wA("platform-logger",Ee=>new de(Ee),"PRIVATE")),wr(new X.wA("heartbeat",Ee=>new Xi(Ee),"PRIVATE")),gr(le,"0.8.2",tt),gr(le,"0.8.2","esm2017"),gr("fire-js","")}("")},4859:(dt,Se,L)=>{L.d(Se,{H0:()=>le,wA:()=>k});var I=L(5861),X=L(2090);class k{constructor($,U,Y){this.name=$,this.instanceFactory=U,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode($){return this.instantiationMode=$,this}setMultipleInstances($){return this.multipleInstances=$,this}setServiceProps($){return this.serviceProps=$,this}setInstanceCreatedCallback($){return this.onInstanceCreated=$,this}}const ae="[DEFAULT]";class ie{constructor($,U){this.name=$,this.container=U,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get($){const U=this.normalizeInstanceIdentifier($);if(!this.instancesDeferred.has(U)){const Y=new X.BH;if(this.instancesDeferred.set(U,Y),this.isInitialized(U)||this.shouldAutoInitialize())try{const ze=this.getOrInitializeService({instanceIdentifier:U});ze&&Y.resolve(ze)}catch{}}return this.instancesDeferred.get(U).promise}getImmediate($){var U;const Y=this.normalizeInstanceIdentifier($?.identifier),ze=null!==(U=$?.optional)&&void 0!==U&&U;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(ze)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(xe){if(ze)return null;throw xe}}getComponent(){return this.component}setComponent($){if($.name!==this.name)throw Error(`Mismatching Component ${$.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=$,this.shouldAutoInitialize()){if(function he(ve){return"EAGER"===ve.instantiationMode}($))try{this.getOrInitializeService({instanceIdentifier:ae})}catch{}for(const[U,Y]of this.instancesDeferred.entries()){const ze=this.normalizeInstanceIdentifier(U);try{const xe=this.getOrInitializeService({instanceIdentifier:ze});Y.resolve(xe)}catch{}}}}clearInstance($=ae){this.instancesDeferred.delete($),this.instancesOptions.delete($),this.instances.delete($)}delete(){var $=this;return(0,I.Z)(function*(){const U=Array.from($.instances.values());yield Promise.all([...U.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...U.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized($=ae){return this.instances.has($)}getOptions($=ae){return this.instancesOptions.get($)||{}}initialize($={}){const{options:U={}}=$,Y=this.normalizeInstanceIdentifier($.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ze=this.getOrInitializeService({instanceIdentifier:Y,options:U});for(const[xe,Ae]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(xe)&&Ae.resolve(ze);return ze}onInit($,U){var Y;const ze=this.normalizeInstanceIdentifier(U),xe=null!==(Y=this.onInitCallbacks.get(ze))&&void 0!==Y?Y:new Set;xe.add($),this.onInitCallbacks.set(ze,xe);const Ae=this.instances.get(ze);return Ae&&$(Ae,ze),()=>{xe.delete($)}}invokeOnInitCallbacks($,U){const Y=this.onInitCallbacks.get(U);if(Y)for(const ze of Y)try{ze($,U)}catch{}}getOrInitializeService({instanceIdentifier:$,options:U={}}){let Y=this.instances.get($);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=$,ve===ae?void 0:ve),options:U}),this.instances.set($,Y),this.instancesOptions.set($,U),this.invokeOnInitCallbacks(Y,$),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,$,Y)}catch{}var ve;return Y||null}normalizeInstanceIdentifier($=ae){return this.component?this.component.multipleInstances?$:ae:$}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class le{constructor($){this.name=$,this.providers=new Map}addComponent($){const U=this.getProvider($.name);if(U.isComponentSet())throw new Error(`Component ${$.name} has already been registered with ${this.name}`);U.setComponent($)}addOrOverwriteComponent($){this.getProvider($.name).isComponentSet()&&this.providers.delete($.name),this.addComponent($)}getProvider($){if(this.providers.has($))return this.providers.get($);const U=new ie($,this);return this.providers.set($,U),U}getProviders(){return Array.from(this.providers.values())}}},1877:(dt,Se,L)=>{L.d(Se,{Am:()=>ve,Ub:()=>le,Yd:()=>he,in:()=>X});const I=[];var X=(()=>{return($=X||(X={}))[$.DEBUG=0]="DEBUG",$[$.VERBOSE=1]="VERBOSE",$[$.INFO=2]="INFO",$[$.WARN=3]="WARN",$[$.ERROR=4]="ERROR",$[$.SILENT=5]="SILENT",X;var $})();const k={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},ae=X.INFO,ie={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},de=($,U,...Y)=>{if(U<$.logLevel)return;const ze=(new Date).toISOString(),xe=ie[U];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${U})`);console[xe](`[${ze}]  ${$.name}:`,...Y)};class he{constructor(U){this.name=U,this._logLevel=ae,this._logHandler=de,this._userLogHandler=null,I.push(this)}get logLevel(){return this._logLevel}set logLevel(U){if(!(U in X))throw new TypeError(`Invalid value "${U}" assigned to \`logLevel\``);this._logLevel=U}setLogLevel(U){this._logLevel="string"==typeof U?k[U]:U}get logHandler(){return this._logHandler}set logHandler(U){if("function"!=typeof U)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=U}get userLogHandler(){return this._userLogHandler}set userLogHandler(U){this._userLogHandler=U}debug(...U){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...U),this._logHandler(this,X.DEBUG,...U)}log(...U){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...U),this._logHandler(this,X.VERBOSE,...U)}info(...U){this._userLogHandler&&this._userLogHandler(this,X.INFO,...U),this._logHandler(this,X.INFO,...U)}warn(...U){this._userLogHandler&&this._userLogHandler(this,X.WARN,...U),this._logHandler(this,X.WARN,...U)}error(...U){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...U),this._logHandler(this,X.ERROR,...U)}}function le($){I.forEach(U=>{U.setLogLevel($)})}function ve($,U){for(const Y of I){let ze=null;U&&U.level&&(ze=k[U.level]),Y.userLogHandler=null===$?null:(xe,Ae,...We)=>{const fe=We.map(pe=>{if(null==pe)return null;if("string"==typeof pe)return pe;if("number"==typeof pe||"boolean"==typeof pe)return pe.toString();if(pe instanceof Error)return pe.message;try{return JSON.stringify(pe)}catch{return null}}).filter(pe=>pe).join(" ");Ae>=(ze??xe.logLevel)&&$({level:X[Ae].toLowerCase(),message:fe,args:We,type:xe.name})}}}},8766:(dt,Se,L)=>{L.d(Se,{Lj:()=>be,X3:()=>Qe});var I=L(5861);let k,ae;const he=new WeakMap,le=new WeakMap,ve=new WeakMap,$=new WeakMap,U=new WeakMap;let xe={get(V,ce,H){if(V instanceof IDBTransaction){if("done"===ce)return le.get(V);if("objectStoreNames"===ce)return V.objectStoreNames||ve.get(V);if("store"===ce)return H.objectStoreNames[1]?void 0:H.objectStore(H.objectStoreNames[0])}return pe(V[ce])},set:(V,ce,H)=>(V[ce]=H,!0),has:(V,ce)=>V instanceof IDBTransaction&&("done"===ce||"store"===ce)||ce in V};function fe(V){return"function"==typeof V?function We(V){return V!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ae||(ae=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(V)?function(...ce){return V.apply(qe(this),ce),pe(he.get(this))}:function(...ce){return pe(V.apply(qe(this),ce))}:function(ce,...H){const Q=V.call(qe(this),ce,...H);return ve.set(Q,ce.sort?ce.sort():[ce]),pe(Q)}}(V):(V instanceof IDBTransaction&&function ze(V){if(le.has(V))return;const ce=new Promise((H,Q)=>{const ne=()=>{V.removeEventListener("complete",ee),V.removeEventListener("error",Re),V.removeEventListener("abort",Re)},ee=()=>{H(),ne()},Re=()=>{Q(V.error||new DOMException("AbortError","AbortError")),ne()};V.addEventListener("complete",ee),V.addEventListener("error",Re),V.addEventListener("abort",Re)});le.set(V,ce)}(V),((V,ce)=>ce.some(H=>V instanceof H))(V,function ie(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(V,xe):V)}function pe(V){if(V instanceof IDBRequest)return function Y(V){const ce=new Promise((H,Q)=>{const ne=()=>{V.removeEventListener("success",ee),V.removeEventListener("error",Re)},ee=()=>{H(pe(V.result)),ne()},Re=()=>{Q(V.error),ne()};V.addEventListener("success",ee),V.addEventListener("error",Re)});return ce.then(H=>{H instanceof IDBCursor&&he.set(H,V)}).catch(()=>{}),U.set(ce,V),ce}(V);if($.has(V))return $.get(V);const ce=fe(V);return ce!==V&&($.set(V,ce),U.set(ce,V)),ce}const qe=V=>U.get(V);function Qe(V,ce,{blocked:H,upgrade:Q,blocking:ne,terminated:ee}={}){const Re=indexedDB.open(V,ce),Me=pe(Re);return Q&&Re.addEventListener("upgradeneeded",lt=>{Q(pe(Re.result),lt.oldVersion,lt.newVersion,pe(Re.transaction))}),H&&Re.addEventListener("blocked",()=>H()),Me.then(lt=>{ee&&lt.addEventListener("close",()=>ee()),ne&&lt.addEventListener("versionchange",()=>ne())}).catch(()=>{}),Me}function be(V,{blocked:ce}={}){const H=indexedDB.deleteDatabase(V);return ce&&H.addEventListener("blocked",()=>ce()),pe(H).then(()=>{})}const me=["get","getKey","getAll","getAllKeys","count"],Ie=["put","add","delete","clear"],Ue=new Map;function Ve(V,ce){if(!(V instanceof IDBDatabase)||ce in V||"string"!=typeof ce)return;if(Ue.get(ce))return Ue.get(ce);const H=ce.replace(/FromIndex$/,""),Q=ce!==H,ne=Ie.includes(H);if(!(H in(Q?IDBIndex:IDBObjectStore).prototype)||!ne&&!me.includes(H))return;const ee=function(){var Re=(0,I.Z)(function*(Me,...lt){const zt=this.transaction(Me,ne?"readwrite":"readonly");let Ot=zt.store;return Q&&(Ot=Ot.index(lt.shift())),(yield Promise.all([Ot[H](...lt),ne&&zt.done]))[0]});return function(lt){return Re.apply(this,arguments)}}();return Ue.set(ce,ee),ee}!function Ae(V){xe=V(xe)}(V=>({...V,get:(ce,H,Q)=>Ve(ce,H)||V.get(ce,H,Q),has:(ce,H)=>!!Ve(ce,H)||V.has(ce,H)}))},5861:(dt,Se,L)=>{function I(k,ae,ie,de,he,le,ve){try{var $=k[le](ve),U=$.value}catch(Y){return void ie(Y)}$.done?ae(U):Promise.resolve(U).then(de,he)}function X(k){return function(){var ae=this,ie=arguments;return new Promise(function(de,he){var le=k.apply(ae,ie);function ve(U){I(le,de,he,ve,$,"next",U)}function $(U){I(le,de,he,ve,$,"throw",U)}ve(void 0)})}}L.d(Se,{Z:()=>X})}},dt=>{dt(dt.s=1258)}]);